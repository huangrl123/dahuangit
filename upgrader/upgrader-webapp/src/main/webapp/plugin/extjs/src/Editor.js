Ext.define("Ext.Editor",{extend:"Ext.container.Container",xtype:"editor",requires:["Ext.layout.container.Editor"],layout:"editor",allowBlur:true,revertInvalid:true,value:"",alignment:"c-c?",offsets:[0,0],shadow:"frame",constrain:false,swallowKeys:true,completeOnEnter:true,cancelOnEsc:true,updateEl:false,focusOnToFront:false,hidden:true,baseCls:Ext.baseCSSPrefix+"editor",initComponent:function(){var A=this,B=A.field=Ext.ComponentManager.create(A.field,"textfield");B.inEditor=true;B.msgTarget=B.msgTarget||"qtip";A.mon(B,{scope:A,blur:A.onFieldBlur,specialkey:A.onSpecialKey});if(B.grow){A.mon(B,"autosize",A.onFieldAutosize,A,{delay:1})}A.floating={constrain:A.constrain};A.items=B;A.callParent(arguments)},onFieldAutosize:function(){this.updateLayout()},afterRender:function(D,C){var B=this,E=B.field,A=E.inputEl;B.callParent(arguments);if(A){A.dom.name="";if(B.swallowKeys){A.swallowEvent(["keypress","keydown"])}}},onSpecialKey:function(E,D){var C=this,B=D.getKey(),A=C.completeOnEnter&&B==D.ENTER,F=C.cancelOnEsc&&B==D.ESC;if(A||F){D.stopEvent();Ext.defer(function(){if(A){C.completeEdit()}else{C.cancelEdit()}},1)}C.fireEvent("specialkey",C,E,D)},startEdit:function(A,D){var B=this,E=B.field,C;B.completeEdit();B.boundEl=Ext.get(A);C=B.boundEl.dom;D=Ext.isDefined(D)?D:Ext.String.trim(C.textContent||C.innerText||C.innerHTML);if(!B.rendered&&!B.renderTo&&B.ownerCt){(B.renderTo=B.ownerCt.el).position()}if(B.fireEvent("beforestartedit",B,B.boundEl,D)!==false){B.startValue=D;B.show();E.suspendEvents();E.reset();E.setValue(D);E.resumeEvents();B.realign(true);E.focus([E.getRawValue().length]);if(E.autoSize){E.autoSize()}B.editing=true}},realign:function(B){var A=this;if(B===true){A.updateLayout()}A.alignTo(A.boundEl,A.alignment,A.offsets)},completeEdit:function(C){var B=this,D=B.field,A;if(!B.editing){return}if(D.assertValue){D.assertValue()}A=B.getValue();if(!D.isValid()){if(B.revertInvalid!==false){B.cancelEdit(C)}return}if(String(A)===String(B.startValue)&&B.ignoreNoChange){B.onEditComplete(C);return}if(B.fireEvent("beforecomplete",B,A,B.startValue)!==false){A=B.getValue();if(B.updateEl&&B.boundEl){B.boundEl.setHtml(A)}B.onEditComplete(C);B.fireEvent("complete",B,A,B.startValue)}},onShow:function(){var A=this;A.callParent(arguments);if(A.hideEl!==false){A.boundEl.hide()}A.fireEvent("startedit",A,A.boundEl,A.startValue)},cancelEdit:function(D){var B=this,C=B.startValue,E=B.field,A;if(B.editing){if(E){A=B.editedValue=B.getValue();E.suspendEvents();B.setValue(C);E.resumeEvents()}B.onEditComplete(D);B.fireEvent("canceledit",B,A,C);delete B.editedValue}},onEditComplete:function(A){if(A!==true){this.editing=false;this.hide()}},onFieldBlur:function(C,A){var B=this,D=Ext.Element.getActiveElement();if(B.allowBlur===true&&B.editing&&B.selectSameEditor!==true){B.completeEdit()}if(Ext.fly(D).isFocusable()||D.getAttribute("tabIndex")){D.focus()}},onHide:function(){var A=this,B=A.field;if(A.editing){A.completeEdit();return}if(B.hasFocus&&B.triggerBlur){B.triggerBlur()}if(B.collapse){B.collapse()}if(A.hideEl!==false){A.boundEl.show()}A.callParent(arguments)},setValue:function(A){this.field.setValue(A)},getValue:function(){return this.field.getValue()},beforeDestroy:function(){var A=this;Ext.destroy(A.field);delete A.field;delete A.boundEl;A.callParent(arguments)}});
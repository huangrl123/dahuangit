Ext.define("Ext.util.Renderable",{mixinId:"renderable",requires:["Ext.dom.Element"],frameCls:Ext.baseCSSPrefix+"frame",frameIdRegex:/[\-]frame\d+[TMB][LCR]$/,frameElNames:["TL","TC","TR","ML","MC","MR","BL","BC","BR","Table"],frameTpl:["{%this.renderDockedItems(out,values,0);%}",'<tpl if="top">','<tpl if="left"><div id="{fgid}TL" data-ref="frameTL" class="{frameCls}-tl {baseCls}-tl {baseCls}-{ui}-tl<tpl for="uiCls"> {parent.baseCls}-{parent.ui}-{.}-tl</tpl>{frameElCls}" role="presentation"></tpl>','<tpl if="right"><div id="{fgid}TR" data-ref="frameTR" class="{frameCls}-tr {baseCls}-tr {baseCls}-{ui}-tr<tpl for="uiCls"> {parent.baseCls}-{parent.ui}-{.}-tr</tpl>{frameElCls}" role="presentation"></tpl>','<div id="{fgid}TC" data-ref="frameTC" class="{frameCls}-tc {baseCls}-tc {baseCls}-{ui}-tc<tpl for="uiCls"> {parent.baseCls}-{parent.ui}-{.}-tc</tpl>{frameElCls}" role="presentation"></div>','<tpl if="right"></div></tpl>','<tpl if="left"></div></tpl>',"</tpl>",'<tpl if="left"><div id="{fgid}ML" data-ref="frameML" class="{frameCls}-ml {baseCls}-ml {baseCls}-{ui}-ml<tpl for="uiCls"> {parent.baseCls}-{parent.ui}-{.}-ml</tpl>{frameElCls}" role="presentation"></tpl>','<tpl if="right"><div id="{fgid}MR" data-ref="frameMR" class="{frameCls}-mr {baseCls}-mr {baseCls}-{ui}-mr<tpl for="uiCls"> {parent.baseCls}-{parent.ui}-{.}-mr</tpl>{frameElCls}" role="presentation"></tpl>','<div id="{fgid}Body" data-ref="frameBody" class="{frameCls}-mc {baseCls}-mc {baseCls}-{ui}-mc<tpl for="uiCls"> {parent.baseCls}-{parent.ui}-{.}-mc</tpl>{frameElCls}" role="presentation">',"{%this.applyRenderTpl(out, values)%}","</div>",'<tpl if="right"></div></tpl>','<tpl if="left"></div></tpl>','<tpl if="bottom">','<tpl if="left"><div id="{fgid}BL" data-ref="frameBL" class="{frameCls}-bl {baseCls}-bl {baseCls}-{ui}-bl<tpl for="uiCls"> {parent.baseCls}-{parent.ui}-{.}-bl</tpl>{frameElCls}" role="presentation"></tpl>','<tpl if="right"><div id="{fgid}BR" data-ref="frameBR" class="{frameCls}-br {baseCls}-br {baseCls}-{ui}-br<tpl for="uiCls"> {parent.baseCls}-{parent.ui}-{.}-br</tpl>{frameElCls}" role="presentation"></tpl>','<div id="{fgid}BC" data-ref="frameBC" class="{frameCls}-bc {baseCls}-bc {baseCls}-{ui}-bc<tpl for="uiCls"> {parent.baseCls}-{parent.ui}-{.}-bc</tpl>{frameElCls}" role="presentation"></div>','<tpl if="right"></div></tpl>','<tpl if="left"></div></tpl>',"</tpl>","{%this.renderDockedItems(out,values,1);%}"],frameTableTpl:["{%this.renderDockedItems(out,values,0);%}",'<table id="{fgid}Table" data-ref="frameTable" class="{frameCls} ',Ext.baseCSSPrefix+'table-plain" cellpadding="0" role="presentation">','<tpl if="top">','<tr role="presentation">','<tpl if="left"><td id="{fgid}TL" data-ref="frameTL" class="{frameCls}-tl {baseCls}-tl {baseCls}-{ui}-tl<tpl for="uiCls"> {parent.baseCls}-{parent.ui}-{.}-tl</tpl>{frameElCls}" role="presentation"></td></tpl>','<td id="{fgid}TC" data-ref="frameTC" class="{frameCls}-tc {baseCls}-tc {baseCls}-{ui}-tc<tpl for="uiCls"> {parent.baseCls}-{parent.ui}-{.}-tc</tpl>{frameElCls}" role="presentation"></td>','<tpl if="right"><td id="{fgid}TR" data-ref="frameTR" class="{frameCls}-tr {baseCls}-tr {baseCls}-{ui}-tr<tpl for="uiCls"> {parent.baseCls}-{parent.ui}-{.}-tr</tpl>{frameElCls}" role="presentation"></td></tpl>',"</tr>","</tpl>",'<tr role="presentation">','<tpl if="left"><td id="{fgid}ML" data-ref="frameML" class="{frameCls}-ml {baseCls}-ml {baseCls}-{ui}-ml<tpl for="uiCls"> {parent.baseCls}-{parent.ui}-{.}-ml</tpl>{frameElCls}" role="presentation"></td></tpl>','<td id="{fgid}Body" data-ref="frameBody" class="{frameCls}-mc {baseCls}-mc {baseCls}-{ui}-mc<tpl for="uiCls"> {parent.baseCls}-{parent.ui}-{.}-mc</tpl>{frameElCls}" style="{mcStyle}" role="presentation">',"{%this.applyRenderTpl(out, values)%}","</td>",'<tpl if="right"><td id="{fgid}MR" data-ref="frameMR" class="{frameCls}-mr {baseCls}-mr {baseCls}-{ui}-mr<tpl for="uiCls"> {parent.baseCls}-{parent.ui}-{.}-mr</tpl>{frameElCls}" role="presentation"></td></tpl>',"</tr>",'<tpl if="bottom">','<tr role="presentation">','<tpl if="left"><td id="{fgid}BL" data-ref="frameBL" class="{frameCls}-bl {baseCls}-bl {baseCls}-{ui}-bl<tpl for="uiCls"> {parent.baseCls}-{parent.ui}-{.}-bl</tpl>{frameElCls}" role="presentation"></td></tpl>','<td id="{fgid}BC" data-ref="frameBC" class="{frameCls}-bc {baseCls}-bc {baseCls}-{ui}-bc<tpl for="uiCls"> {parent.baseCls}-{parent.ui}-{.}-bc</tpl>{frameElCls}" role="presentation"></td>','<tpl if="right"><td id="{fgid}BR" data-ref="frameBR" class="{frameCls}-br {baseCls}-br {baseCls}-{ui}-br<tpl for="uiCls"> {parent.baseCls}-{parent.ui}-{.}-br</tpl>{frameElCls}" role="presentation"></td></tpl>',"</tr>","</tpl>","</table>","{%this.renderDockedItems(out,values,1);%}"],_renderState:0,statics:{makeRenderSetter:function(C,A){var B=C.name;return function(F){var E=this,D=(E.renderConfigs||(E.renderConfigs={})),G=D[A];if(E._renderState>=A){(C.setter||C.getSetter()).call(E,F)}else{if(!G){D[A]=G={}}if(!(B in G)){G[B]=E[B]}E[B]=F}return E}},processRenderConfig:function(G,J,D){var F=this.prototype,K=this.getConfigurator(),C=Ext.util.Renderable,L=C.makeRenderSetter,B=G[J],H,I,A,E;for(A in B){I=Ext.Config.get(A);if(!F[E=I.names.set]){H=(I.renderSetter||(I.renderSetter={}));F[E]=H[D]||(H[D]=L(I,D))}}delete G[J];K.add(B)}},onClassMixedIn:function(A){var D=A.override,C=this.processRenderConfig,B=function(F){if(F.beforeRenderConfig){this.processRenderConfig(F,"beforeRenderConfig",1)}if(F.renderConfig){this.processRenderConfig(F,"renderConfig",3)}D.call(this,F)},E=function(F,G){F.override=B;F.processRenderConfig=C;if(G.beforeRenderConfig){F.processRenderConfig(G,"beforeRenderConfig",1)}if(G.renderConfig){F.processRenderConfig(G,"renderConfig",3)}};E(A,A.prototype);A.onExtended(E)},afterRender:function(){var A=this,D={},F=A.protoEl,G=A.el,H,C,B,E;A.finishRenderChildren();A._renderState=4;if(A.contentEl){C=Ext.baseCSSPrefix;B=C+"hidden-";E=Ext.get(A.contentEl);E.component=A;E.removeCls([C+"hidden",B+"display",B+"offsets"]);A.getContentTarget().appendChild(E.dom)}F.writeTo(D);H=D.removed;if(H){G.removeCls(H)}H=D.cls;if(H.length){G.addCls(H)}H=D.style;if(D.style){G.setStyle(H)}A.protoEl=null;if(!A.ownerCt){A.updateLayout()}if(!(A.x&&A.y)&&(A.pageX||A.pageY)){A.setPagePosition(A.pageX,A.pageY)}if(A.disableOnRender){A.onDisable()}else{if(A.enableOnRender){A.onEnable()}}if(Ext.enableAria){A.ariaApplyAfterRenderAttributes()}},afterFirstLayout:function(G,A){var H=this,I=H.x,J=H.y,E,F,B,D,K=H.defaultAlign,C=H.alignOffset;if(!H.ownerLayout){E=I!==undefined;F=J!==undefined}if(H.floating&&(!E||!F)){if(H.floatParent){B=H.floatParent.getTargetEl().getViewRegion();D=H.el.getAlignToXY(H.alignTarget||H.floatParent.getTargetEl(),K,C);B.x=D[0]-B.x;B.y=D[1]-B.y}else{D=H.el.getAlignToXY(H.alignTarget||H.container,K,C);B=H.container.translateXY(D[0],D[1])}I=E?I:B.x;J=F?J:B.y;E=F=true}if(E||F){H.setPosition(I,J)}H.onBoxReady(G,A)},beforeRender:function(){var C=this,A=C.floating,D=C.getComponentLayout(),B;C._renderState=1;C.initBindable();if(C.renderConfigs){C.flushRenderConfigs()}if(C.reference){C.publishState()}if(A){C.addCls(Ext.baseCSSPrefix+"layer");B=A.cls;if(B){C.addCls(B)}}C.frame=C.frame||C.alwaysFramed;if(!D.initialized){D.initLayout()}C.initOverflow();C.setUI(C.ui);if(C.disabled){C.disable(true)}},doApplyRenderTpl:function(C,D){var A=D.$comp,B;if(!A.rendered){B=A.initRenderTpl();B.applyOut(D.renderData,C)}},getElConfig:function(){var E=this,B=E.autoEl,D=E.getFrameInfo(),F={tag:"div",tpl:D?E.initFramingTpl(D.table):E.initRenderTpl()},A=E.protoEl,C;E.initStyles(A);A.writeTo(F);A.flush();if(Ext.isString(B)){F.tag=B}else{Ext.apply(F,B)}if(Ext.enableAria&&E.ariaRenderAttributesToElement){Ext.apply(F,E.ariaGetRenderAttributes())}F.id=E.id;if(F.tpl){if(D){F.tplData=C=E.getFrameRenderData();C.renderData=E.initRenderData()}else{F.tplData=E.initRenderData()}}return F},getInsertPosition:function(A){if(A!==undefined){if(Ext.isNumber(A)){A=this.container.dom.childNodes[A]}else{A=Ext.getDom(A)}}return A},getRenderTree:function(){var A=this,B=null;if(!A.hasListeners.beforerender||A.fireEvent("beforerender",A)!==false){A._renderState=1;A.beforeRender();A.rendering=true;A._renderState=2;B=A.getElConfig();if(A.el){B.id=A.$pid=Ext.id(null,A.el.identifiablePrefix)}}return B},initRenderData:function(){var A=this;return Ext.apply({$comp:A,id:A.id,ui:A.ui,uiCls:A.uiCls,baseCls:A.baseCls,componentCls:A.componentCls,frame:A.frame,renderScroller:A.touchScroll,scrollerCls:A.scrollerCls,role:A.ariaRole,childElCls:""},A.renderData)},onRender:function(D,E){var G=this,H=G.x,I=G.y,A=null,C=G.el,F,B;G.applyRenderSelectors();G.rendering=null;G.rendered=true;G._renderState=3;if(G.renderConfigs){G.flushRenderConfigs()}if(H!=null){A={x:H}}if(I!=null){(A=A||{}).y=I}if(!G.getFrameInfo()){F=G.width;B=G.height;if(typeof F==="number"){A=A||{};A.width=F}if(typeof B==="number"){A=A||{};A.height=B}}if(G.touchScroll===1){G.getOverflowEl().disableTouchScroll()}G.lastBox=C.lastBox=A},render:function(E,D){var F=this,C=F.el,A=F.ownerLayout,H,G,B;if(C&&!C.isElement){F.el=C=F.wrapPrimaryEl(C)}Ext.suspendLayouts();E=F.initContainer(E);B=F.getInsertPosition(D);if(!C){G=F.getRenderTree();if(A&&A.transformItemRenderTree){G=A.transformItemRenderTree(G)}if(G){if(B){C=Ext.DomHelper.insertBefore(B,G)}else{C=Ext.DomHelper.append(E,G)}F.wrapPrimaryEl(C);F.cacheRefEls(C)}}else{if(!F.hasListeners.beforerender||F.fireEvent("beforerender",F)!==false){F.beforeRender();F.needsRenderTpl=F.rendering=true;F._renderState=2;F.initStyles(C);if(F.allowDomMove!==false){if(B){E.dom.insertBefore(C.dom,B)}else{E.dom.appendChild(C.dom)}}}else{H=true}}if(C&&!H){F.finishRender(D)}Ext.resumeLayouts(!F.hidden&&!E.isDetachedBody)},ensureAttachedToBody:function(B){var C=this,A;while(C.ownerCt){C=C.ownerCt}if(C.container.isDetachedBody){C.container=A=Ext.getBody();A.appendChild(C.el.dom);if(B){C.updateLayout()}if(typeof C.x=="number"||typeof C.y=="number"){C.setPosition(C.x,C.y)}}},privates:{applyRenderSelectors:function(){var C=this,B=C.renderSelectors,A=C.el,D,E;C.attachChildEls(A);if(B){for(E in B){D=B[E];if(D){C[E]=A.selectNode(D,false)}}}},cacheRefEls:function(D){D=D||this.el;var H=Ext.cache,A=Ext.dom.Element,F=D.isElement?D.dom:D,B=F.querySelectorAll("[data-ref]"),G=B.length,C,E;for(E=0;E<G;E++){C=B[E];if(!H[C.id]){new A(C)}}},doAutoRender:function(){var A=this;if(!A.rendered){if(A.floating){A.render(A.renderTo||document.body)}else{A.render(Ext.isBoolean(A.autoRender)?Ext.getBody():A.autoRender)}}},doRenderContent:function(B,C){var A=C.$comp,D=A.data;if(A.html){Ext.DomHelper.generateMarkup(A.html,B);delete A.html}if(A.tpl){if(!A.tpl.isTemplate){A.tpl=new Ext.XTemplate(A.tpl)}if(D){A.data=D=D.isEntity?D.getData(true):D;A.tpl.applyOut(D,B)}}},doRenderFramingDockedItems:function(B,C,D){var A=C.$comp;if(!A.rendered&&A.doRenderDockedItems){C.renderData.$skipDockedItems=true;A.doRenderDockedItems.call(this,B,C,D)}},flushRenderConfigs:function(){var H=this,E=H.renderConfigs,D=H._renderState,C,G,A,F,B;if(E){for(G=0;G<=D;++G){C=E[G];if(C){E[G]=null;for(A in C){B=C[A];(F||(F={}))[A]=H[A];H[A]=B}}}if(F){H.setConfig(F)}}},finishRender:function(E){var G=this,J=Ext.cache,H,A,F,I,B,C,D;if(!G.el||G.$pid){if(G.container){D=J[G.id];C=D?D.dom:G.container.getById(G.id,true)}else{F=G.$pid||G.id;D=J[F];C=D?D.dom:Ext.getDom(F)}if(!G.el){G.wrapPrimaryEl(C)}else{delete G.$pid;if(!G.el.dom){G.wrapPrimaryEl(G.el)}C.parentNode.insertBefore(G.el.dom,C);H=C;C=G.el.dom;A=C.firstChild;while(H.firstChild){C.insertBefore(H.firstChild,A)}G.el.addCls(H.className);Ext.removeNode(H)}}else{if(G.needsRenderTpl){I=G.initRenderTpl();if(I){B=G.initRenderData();I.insertFirst(G.getTargetEl(),B)}G.cacheRefEls()}}G.el.component=G;if(!G.container){G.container=Ext.get(G.el.dom.parentNode)}if(G.ctCls){G.container.addCls(G.ctCls)}G.onRender(G.container,E);if(!G.overflowInited){G.initOverflow()}G.el.setVisibilityMode(Ext.Element[G.hideMode.toUpperCase()]);if(G.overCls){G.el.hover(G.addOverCls,G.removeOverCls,G)}if(G.hasListeners.render){G.fireEvent("render",G)}G.afterRender();if(G.hasListeners.afterrender){G.fireEvent("afterrender",G)}G.initEvents();if(G.hidden){G.el.hide()}},finishRenderChildren:function(){var A=this.getComponentLayout();A.finishRender()},getFrameRenderData:function(){var B=this,A=B.frameSize,C="";if(B._syncFrameHeight&&B.height){C="height:"+(B.height-A.height)+"px"}return{$comp:B,fgid:B.id+"-frame",ui:B.ui,uiCls:B.uiCls,frameCls:B.frameCls,baseCls:B.baseCls,top:!!A.top,left:!!A.left,right:!!A.right,bottom:!!A.bottom,mcStyle:C,frameElCls:""}},getFrameInfo:function(){if(Ext.supports.CSS3BorderRadius||!this.frame){return false}var H=this,I=H.frameInfoCache,E=H.getFramingInfoCls()+"-frameInfo",K=I[E],V=Math.max,Q,A,L,S,G,T,M,U,B,C,D,F,O,N,W,P,J,R;if(K==null){Q=Ext.fly(H.getStyleProxy(E),"frame-style-el");A=Q.getStyle("font-family");if(A){A=A.split("-");W=parseInt(A[1],10);P=parseInt(A[2],10);J=parseInt(A[3],10);R=parseInt(A[4],10);M=parseInt(A[5],10);U=parseInt(A[6],10);B=parseInt(A[7],10);C=parseInt(A[8],10);D=parseInt(A[9],10);F=parseInt(A[10],10);O=parseInt(A[11],10);N=parseInt(A[12],10);L=V(M,V(W,P));S=V(U,V(P,J));G=V(B,V(R,J));T=V(C,V(W,R));K={table:A[0].charAt(0)==="t",vertical:A[0].charAt(1)==="v",top:L,right:S,bottom:G,left:T,width:T+S,height:L+G,maxWidth:V(L,S,G,T),border:{top:M,right:U,bottom:B,left:C,width:C+U,height:M+B},padding:{top:D,right:F,bottom:O,left:N,width:N+F,height:D+O},radius:{tl:W,tr:P,br:J,bl:R}}}else{K=false}if(H.frame===true&&!K){Ext.log.error("You have set frame: true explicity on this component ("+H.getXType()+") and it does not have any framing defined in the CSS template. In this case IE cannot figure out what sizes to use and thus framing on this component will be disabled.")}I[E]=K}H.frame=!!K;H.frameSize=K;return K},getFramingInfoCls:function(){return this.baseCls+"-"+this.ui},getStyleProxy:function(B){var A=this.styleProxyEl||(Ext.Component.prototype.styleProxyEl=Ext.getBody().createChild({"data-sticky":true,role:"presentation",style:{position:"absolute",top:"-10000px"}},null,true));A.className=B;return A},getFrameTpl:function(A){return this.getTpl(A?"frameTableTpl":"frameTpl")},initContainer:function(B){var A=this;if(!B&&A.el){B=A.el.dom.parentNode;A.allowDomMove=false}A.container=B.dom?B:Ext.get(B);return A.container},initOverflow:function(){var A=this,C=A.getOverflowStyle(),D=A.scrollFlags,E=A.getOverflowEl(),B=A.touchScroll=(D.y||D.x)&&Ext.supports.touchScroll;if(!E){return}A.overflowInited=true;if(B===2){E.setStyle("overflow","hidden")}else{E.setStyle(C)}},doRenderPadding:function(B,C){var A=C.$comp;if(A.touchScroll){B.push("padding:",A.unitizeBox(A.padding))}},initFramingTpl:function(B){var A=this.getFrameTpl(B);if(A&&!A.applyRenderTpl){this.setupFramingTpl(A)}return A},initRenderTpl:function(){var A=this.getTpl("renderTpl");if(A&&!A.renderContent){this.setupRenderTpl(A)}return A},setupFramingTpl:function(A){A.applyRenderTpl=this.doApplyRenderTpl;A.renderDockedItems=this.doRenderFramingDockedItems},setupRenderTpl:function(A){A.renderBody=A.renderContent=this.doRenderContent;A.renderPadding=this.doRenderPadding},updateFrame:function(){if(Ext.supports.CSS3BorderRadius||!this.frame){return}var G=this,I=G.el.dom,A=G.frameTable,L=G.frameBody,Q=L.dom,H=G.getFrameInfo(),D,J,E,P,C,B,K,O,F,N,M;E=document.createElement("div");B=G.getFrameRenderData();O=G.getFrameTpl(H.table);O.insertFirst(E,B);M=E.querySelectorAll("[data-ref]");N=E.querySelector('[data-ref="frameBody"]');for(C=Q;C.parentNode!==I;){C=C.parentNode}while(E.firstChild){I.insertBefore(E.firstChild,C)}N.parentNode.replaceChild(Q,N);Q.className=N.className;L.setSize();D=G.getChildEls();if(A){A.destroy();G.frameTable=null}for(J in D){if(D[J].frame){P=G[J];if(P&&P!==L){P.destroy();G[J]=null}}}for(F=M.length;F--;){J=(K=M[F]).getAttribute("data-ref");if(J!=="frameBody"){G[J]=new Ext.dom.Element(K)}}},frameInfoCache:{}}});
Ext.define("Ext.grid.column.Action",{extend:"Ext.grid.column.Column",alias:["widget.actioncolumn"],alternateClassName:"Ext.grid.ActionColumn",stopSelection:true,actionIdRe:new RegExp(Ext.baseCSSPrefix+"action-col-(\\d+)"),altText:"",menuText:"<i>Actions</i>",sortable:false,innerCls:Ext.baseCSSPrefix+"grid-cell-inner-action-col",actionIconCls:Ext.baseCSSPrefix+"action-col-icon",constructor:function(D){var E=this,G=Ext.apply({},D),C=G.items||E.items||[E],B,A,F;E.origRenderer=G.renderer||E.renderer;E.origScope=G.scope||E.scope;E.renderer=E.scope=G.renderer=G.scope=null;G.items=null;E.callParent([G]);E.items=C;for(A=0,F=C.length;A<F;++A){if(C[A].getClass){B=true;break}}if(E.origRenderer||B){E.hasCustomRenderer=true}},initComponent:function(){var A=this;A.callParent();if(A.sortable&&!A.dataIndex){A.sortable=false}},defaultRenderer:function(B,M,H,P,L,J,D){var G=this,K=Ext.baseCSSPrefix,I=G.origScope||G,N=G.items,A=N.length,F=0,C,Q,E,O;Q=Ext.isFunction(G.origRenderer)?G.origRenderer.apply(I,arguments)||"":"";M.tdCls+=" "+Ext.baseCSSPrefix+"action-col-cell";for(;F<A;F++){C=N[F];E=C.disabled||(C.isDisabled?C.isDisabled.call(C.scope||I,D,P,L,C,H):false);O=E?null:(C.tooltip||(C.getTip?C.getTip.apply(C.scope||I,arguments):null));if(!C.hasActionConfiguration){C.stopSelection=G.stopSelection;C.disable=Ext.Function.bind(G.disableAction,G,[F],0);C.enable=Ext.Function.bind(G.enableAction,G,[F],0);C.hasActionConfiguration=true}Q+='<img role="button" alt="'+(C.altText||G.altText)+'" src="'+(C.icon||Ext.BLANK_IMAGE_URL)+'" class="'+G.actionIconCls+" "+K+"action-col-"+String(F)+" "+(E?K+"item-disabled":" ")+(Ext.isFunction(C.getClass)?C.getClass.apply(C.scope||I,arguments):(C.iconCls||G.iconCls||""))+'"'+(O?' data-qtip="'+O+'"':"")+" />"}return Q},updater:function(C,B){var A={};C.firstChild.innerHTML=Ext.grid.column.Action.prototype.defaultRenderer.call(this,B,A);Ext.fly(C).addCls(A.tdCls)},enableAction:function(B,C){var A=this;if(!B){B=0}else{if(!Ext.isNumber(B)){B=Ext.Array.indexOf(A.items,B)}}A.items[B].disabled=false;A.up("tablepanel").el.select("."+Ext.baseCSSPrefix+"action-col-"+B).removeCls(A.disabledCls);if(!C){A.fireEvent("enable",A)}},disableAction:function(B,C){var A=this;if(!B){B=0}else{if(!Ext.isNumber(B)){B=Ext.Array.indexOf(A.items,B)}}A.items[B].disabled=true;A.up("tablepanel").el.select("."+Ext.baseCSSPrefix+"action-col-"+B).addCls(A.disabledCls);if(!C){A.fireEvent("disable",A)}},destroy:function(){delete this.items;delete this.renderer;return this.callParent(arguments)},processEvent:function(F,A,N,G,E,C,M,H){var K=this,I=C.getTarget(),L=F==="keydown"&&C.getKey(),D,J,B;if(F==="mousedown"){return false}if(L&&!Ext.fly(I).findParent(A.getCellSelector())){I=Ext.fly(N).down("."+Ext.baseCSSPrefix+"action-col-icon",true)}if(I&&(D=I.className.match(K.actionIdRe))){J=K.items[parseInt(D[1],10)];B=J.disabled||(J.isDisabled?J.isDisabled.call(J.scope||K.origScope||K,A,G,E,J,M):false);if(J&&!B){if(F==="click"||(L===C.ENTER||L===C.SPACE)){Ext.callback(J.handler||K.handler,J.scope||K.origScope,[A,G,E,J,C,M,H],undefined,K);if(J.stopSelection!==false){return false}}}}return K.callParent(arguments)},cascade:function(A,B){A.call(B||this,this)},getRefItems:function(){return[]}});
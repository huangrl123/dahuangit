Ext.define("Ext.menu.KeyNav",{extend:"Ext.util.KeyNav",constructor:function(A){var B=this;B.menu=A.target;B.callParent([Ext.apply({down:B.down,enter:B.enter,esc:B.escape,left:B.left,right:B.right,space:B.enter,tab:B.tab,up:B.up},A)])},down:function(A){var B=this,C=B.menu.focusedItem;if(C&&A.getKey()==A.DOWN&&B.isWhitelisted(C)){return true}B.focusNextItem(1)},enter:function(A){var C=this.menu,B=C.focusedItem;if(C.activeItem){C.onClick(A)}else{if(B&&B.isFormField){return true}}},escape:function(A){Ext.menu.Manager.hideAll()},focusNextItem:function(F){var E=this.menu,H=E.items,B=E.focusedItem,D=B?H.indexOf(B):-1,C=D+F,G=H.length,A=0,I;while(A<G&&C!==D){if(C<0){C=G-1}else{if(C>=G){C=0}}I=H.getAt(C);if(E.canActivateItem(I)){E.setActiveItem(I);break}C+=F;++A}},isWhitelisted:function(B){var A=Ext["FocusManager"];return A&&A.isWhitelisted(B)},left:function(A){var C=this.menu,B=C.focusedItem;if(B&&this.isWhitelisted(B)){return true}if(C.parentMenu){C.hide();C.parentMenu.focus()}},right:function(C){var E=this.menu,D=E.focusedItem,B=E.activeItem,A;if(D&&this.isWhitelisted(D)){return true}if(B){A=E.activeItem.menu;if(A){B.expandMenu(0);A.setActiveItem(A.child(":focusable"))}}},tab:function(A){var B=this;if(A.shiftKey){B.up(A)}else{B.down(A)}},up:function(A){var B=this,C=B.menu.focusedItem;if(C&&A.getKey()==A.UP&&B.isWhitelisted(C)){return true}B.focusNextItem(-1)}});
Ext.define("Ext.rtl.dom.Element",{override:"Ext.dom.Element",requires:["Ext.CompositeElementLite"],rtlXAnchors:{l:"r",r:"l"},_positionTopRight:["position","top","right"],pxRe:/^\d+(?:\.\d*)?px$/i,statics:{rtlParseBox:function(A){var A=Ext.Element.parseBox(A),B;B=A.left;A.left=A.right;A.right=B;return A},rtlUnitizeBox:function(A,D){var B=Ext.Element,E=B.addUnits,C=B.parseBox(A);return E(C.top,D)+" "+E(C.left,D)+" "+E(C.bottom,D)+" "+E(C.right,D)}},anchorAnimX:function(A){if(Ext.rootInheritedState.rtl){A=this.rtlXAnchors[A]}this.callParent(arguments)},getPositioning:function(D){var C=Ext.rootInheritedState.rtl?"right":"left",B=this.getStyle([C,"top","position","z-index"]),A=this.dom;if(D){if(B[C]==="auto"){B[C]=(C==="left")?(A.offsetLeft+"px"):(A.offsetParent.offsetWidth-A.offsetLeft-A.offsetWidth)}if(B.top==="auto"){B.top=A.offsetTop+"px"}}return B},getXY:function(){var E=document,B=Math.round,A=this.dom,G=0,H=0,C,F;if(A!==E&&A!==E.body){try{C=A.getBoundingClientRect()}catch(D){C={left:0,top:0}}E=Ext.fly(E,"_internal");if(Ext.rootInheritedState.rtl){F=E.rtlGetScroll();G=Ext.Element.getViewportWidth()-C.right+F.left}else{F=E.getScroll();G=C.left+F.left}G=B(G);H=B(C.top+F.top)}return[G,H]},rtlGetLocalX:function(){var A=this,C=A.dom.offsetParent,B=A.getStyle("right");if(!B||B==="auto"){B=0}else{if(A.pxRe.test(B)){B=parseFloat(B)}else{B=A.getX();if(C){B-=Ext.fly(C,"_internal").getX()}}}return B},rtlGetLocalXY:function(){var A=this,C=A.dom.offsetParent,D=A.getStyle(["right","top"]),B=D.right,E=D.top;if(!B||B==="auto"){B=0}else{if(A.pxRe.test(B)){B=parseFloat(B)}else{B=A.getX();if(C){B-=Ext.fly(C,"_internal").getX()}}}if(!E||E==="auto"){E=0}else{if(A.pxRe.test(E)){E=parseFloat(E)}else{E=A.getY();if(C){E-=Ext.fly(C,"_internal").getY()}}}return[B,E]},rtlGetScroll:function(){var D=this,A=D.dom,G=document,B=G.body,F=D.getScroll(),C=Math.abs(F.left),E=(A===G||A===B);if(E?(3&D._rtlDocScrollFlag):(D._rtlScrollFlag===1)){if(E){A=B}C=A.scrollWidth-C-(E?Ext.Element.getViewportWidth():A.clientWidth)}F.left=C;return F},rtlGetScrollLeft:function(){return this.rtlGetScroll().left},rtlNormalizeScrollLeft:function(B){var A=this.dom,C=this._rtlScrollFlag;if(C===0){B=-B}else{if(C===1){B=A.scrollWidth-B-A.clientWidth}}return B},rtlScrollBy:function(F,E,D){var B=this,A=B.dom,C,G;if(F.length){D=E;E=F[1];F=F[0]}else{if(typeof F!=="number"){D=E;E=F.y;F=F.x}}if(F){C=B.rtlNormalizeScrollLeft(B.constrainScrollLeft(B.rtlGetScrollLeft()+F));B.scrollTo("left",C,D)}if(E){B.scrollTo("top",B.constrainScrollTop(A.scrollTop+E),D)}return B},rtlScrollIntoView:function(B,C,A,D){B=Ext.getDom(B)||Ext.getBody().dom;return this.doScrollIntoView(B,C,A,D,"rtlGetScrollLeft","rtlScrollTo")},rtlScrollTo:function(B,C,A){if(B==="left"){C=this.rtlNormalizeScrollLeft(C)}return this.scrollTo(B,C,A)},rtlSetLocalX:function(B){var A=this.dom.style;A.left="auto";A.right=(B===null)?"auto":B+"px"},rtlSetLocalXY:function(B,C){var A=this.dom.style;A.left="auto";if(B&&B.length){C=B[1];B=B[0]}if(B===null){A.right="auto"}else{if(B!==undefined){A.right=B+"px"}}if(C===null){A.top="auto"}else{if(C!==undefined){A.top=C+"px"}}},rtlSetScrollLeft:function(A){var B=this;B.dom.scrollLeft=B.rtlNormalizeScrollLeft(A);return B},rtlTranslatePoints:function(B,C){var A=this.rtlTranslateXY(B,C);return{right:A.x,top:A.y}},rtlTranslateXY:function(J,K){var I=this,D=I.getStyle(I._positionTopRight),L=(D.position==="relative"),B=parseFloat(D.right),F=parseFloat(D.top),E=I.getXY(),C=I.dom,H,M,A,G;if(J&&J.length){K=J[1];J=J[0]}if(isNaN(B)){H=document;M=H.body;if(C===M){B=0}else{G=C.offsetParent;A=(G&&G!==M&&G!==H.documentElement)?G.scrollWidth:Ext.Element.getViewportWidth();B=A-C.offsetLeft-I.getWidth()}}if(isNaN(F)){F=L?0:I.dom.offsetTop}B=(typeof J==="number")?J-E[0]+B:undefined;F=(typeof K==="number")?K-E[1]+F:undefined;return{x:B,y:F}},translatePoints:function(A,B){return Ext.rootInheritedState.rtl?this.rtlTranslatePoints(A,B):this.callParent(arguments)},translateXY:function(A,B){return Ext.rootInheritedState.rtl?this.rtlTranslateXY(A,B):this.callParent(arguments)},wrap:function(){var E=this.parent(),D=Ext.baseCSSPrefix+"rtl",A=Ext.baseCSSPrefix+"ltr",B=this.callParent(arguments),C;if(E.hasCls(D)){C=D}else{if(E.hasCls(A)){C=A}}if(C){Ext.fly(B,"_internal").addCls(C)}return B}},function(){var B=this;Ext.CompositeElementLite.importElementMethods();function C(){var D=Ext.getBody().createChild({tag:"div",style:"direction:rtl;position:absolute;overflow:auto;height:100px;width:100px;",children:[{tag:"div",style:"height:30px;width:150px;"}]}),E=D.dom,F=2;if(E.scrollLeft===50){F=1}else{E.scrollLeft=-1;if(E.scrollLeft){F=0}}D.destroy();B.prototype._rtlScrollFlag=F}function A(){var J=document,G=J.documentElement,M=J.body,K=4,F=M.style,D=F.direction,H=Ext.getBody().createChild('<div style="height:20000px;width:20000px;"></div>'),E=H.dom,I,L;F.direction="ltr";I=E.getBoundingClientRect().right;F.direction="rtl";L=E.getBoundingClientRect().right;B.prototype._rtlBodyScrollbarOnRight=(I===L);if(G.scrollLeft>0){K=1}else{G.scrollLeft=-1;if(G.scrollLeft){K=0}else{G.scrollLeft=1;if(G.scrollLeft){K=2}}}H.destroy();if(!D){F.direction="ltr";M.scrollWidth}F.direction=D;B.prototype._rtlDocScrollFlag=K}Ext.onReady(function(){A();C()})});
Ext.define("Ext.menu.Item",{extend:"Ext.Component",alias:"widget.menuitem",alternateClassName:"Ext.menu.TextItem",isMenuItem:true,mixins:["Ext.mixin.Queryable"],activeCls:Ext.baseCSSPrefix+"menu-item-active",ariaRole:"menuitem",canActivate:true,clickHideDelay:0,destroyMenu:true,disabledCls:Ext.baseCSSPrefix+"menu-item-disabled",hideOnClick:true,menuAlign:"tl-tr?",menuExpandDelay:200,menuHideDelay:200,tooltipType:"qtip",baseCls:Ext.baseCSSPrefix+"menu-item",arrowCls:Ext.baseCSSPrefix+"menu-item-arrow",baseIconCls:Ext.baseCSSPrefix+"menu-item-icon",textCls:Ext.baseCSSPrefix+"menu-item-text",indentCls:Ext.baseCSSPrefix+"menu-item-indent",indentNoSeparatorCls:Ext.baseCSSPrefix+"menu-item-indent-no-separator",indentRightIconCls:Ext.baseCSSPrefix+"menu-item-indent-right-icon",indentRightArrowCls:Ext.baseCSSPrefix+"menu-item-indent-right-arrow",linkCls:Ext.baseCSSPrefix+"menu-item-link",linkHrefCls:Ext.baseCSSPrefix+"menu-item-link-href",childEls:["itemEl","iconEl","textEl","arrowEl"],renderTpl:'<tpl if="plain">{text}<tpl else><a id="{id}-itemEl" data-ref="itemEl" class="{linkCls}<tpl if="hasHref"> {linkHrefCls}</tpl>{childElCls}" href="{href}" role="menuitem" <tpl if="hrefTarget"> target="{hrefTarget}"</tpl> hidefocus="true" unselectable="on"<tpl if="tabIndex"> tabIndex="{tabIndex}"</tpl>><span id="{id}-textEl" data-ref="textEl" class="{textCls} {textCls}-{ui} {indentCls}{childElCls}" unselectable="on">{text}</span><tpl if="hasIcon"><div role="presentation" id="{id}-iconEl" data-ref="iconEl" class="{baseIconCls}-{ui} {baseIconCls}{[values.rightIcon ? "-right" : ""]} {iconCls}{childElCls} {glyphCls}" style="<tpl if="icon">background-image:url({icon});</tpl><tpl if="glyph && glyphFontFamily">font-family:{glyphFontFamily};</tpl>"><tpl if="glyph">&#{glyph};</tpl></div></tpl><tpl if="showCheckbox"><div role="presentation" id="{id}-checkEl" data-ref="checkEl" class="{baseIconCls}-{ui} {baseIconCls}{[(values.hasIcon && !values.rightIcon) ? "-right" : ""]} {groupCls} {checkboxCls}{childElCls}"></div></tpl><tpl if="hasMenu"><div role="presentation" id="{id}-arrowEl" data-ref="arrowEl" class="{arrowCls} {arrowCls}-{ui}{childElCls}"></div></tpl></a></tpl>',maskOnDisable:false,iconAlign:"left",activate:function(B){var A=this;if(B||(!A.activated&&A.canActivate&&A.rendered&&!A.isDisabled()&&A.isVisible())){if(!A.plain){A.el.addCls(A.activeCls)}A.focus(false,true);A.activated=true;if(A.hasListeners.activate){A.fireEvent("activate",A)}}},deactivate:function(){var A=this,B;if(A.activated){B=A.up("");if(!A.plain){A.el.removeCls(A.activeCls)}if(B){B.focus(false,true)}A.hideMenu();A.activated=false;if(A.hasListeners.deactivate){A.fireEvent("deactivate",A)}}},deferHideMenu:function(){if(this.menu.isVisible()){this.menu.hide()}},cancelDeferHide:function(){clearTimeout(this.hideMenuTimer)},deferHideParentMenus:function(){var A;Ext.menu.Manager.hideAll();if(!Ext.Element.getActiveElement()){A=this.up(":not([hidden])");if(A){A.focus()}}},expandMenu:function(B){var A=this;if(A.menu){A.cancelDeferHide();if(B===0){A.doExpandMenu()}else{clearTimeout(A.expandMenuTimer);A.expandMenuTimer=Ext.defer(A.doExpandMenu,Ext.isNumber(B)?B:A.menuExpandDelay,A)}}},doExpandMenu:function(){var A=this,B=A.menu;if(A.activated&&(!B.rendered||!B.isVisible())){A.parentMenu.activeChild=B;B.ownerItem=A;B.parentMenu=A.parentMenu;B.constrainTo=document.body;B.showBy(A,A.menuAlign)}},getRefItems:function(A){var C=this.menu,B;if(C){B=C.getRefItems(A);B.unshift(C)}return B||[]},hideMenu:function(B){var A=this;if(A.menu){clearTimeout(A.expandMenuTimer);A.hideMenuTimer=Ext.defer(A.deferHideMenu,Ext.isNumber(B)?B:A.menuHideDelay,A)}},initComponent:function(){var C=this,A=Ext.baseCSSPrefix,B="",D;if(C.plain){B+=A+"menu-item-plain"}if(C.cls){B+=" "+C.cls}C.cls=B;if(C.menu){D=C.menu;delete C.menu;C.setMenu(D)}C.callParent(arguments)},onClick:function(B){var C=this,A=C.clickHideDelay,D=B.browserEvent,E;if(!C.href||C.disabled){B.stopEvent()}if(C.disabled||C.handlingClick){return}if(C.hideOnClick&&B.browserEvent.type!=="touchcancel"&&!(B.type==="tap"&&C.menu)){if(!A){C.deferHideParentMenus()}else{C.deferHideParentMenusTimer=Ext.defer(C.deferHideParentMenus,A,C)}}Ext.callback(C.handler,C.scope,[C,B],0,C);C.fireEvent("click",C,B);if(Ext.isIE9m){E=(D.returnValue===false)?true:false}else{E=!!D.defaultPrevented}if(C.href&&!E){C.handlingClick=true;C.itemEl.dom.click();delete C.handlingClick}if(!C.hideOnClick){C.focus()}},onRemoved:function(){var A=this;if(A.activated&&A.parentMenu.activeItem===A){A.parentMenu.deactivateActiveItem()}A.callParent(arguments);A.parentMenu=A.ownerButton=null},beforeDestroy:function(){var A=this;if(A.rendered){A.clearTip()}A.callParent()},onDestroy:function(){var A=this;clearTimeout(A.expandMenuTimer);A.cancelDeferHide();clearTimeout(A.deferHideParentMenusTimer);A.setMenu(null);A.callParent(arguments)},beforeRender:function(){var I=this,A=I.glyph,H=Ext._glyphFontFamily,G=!!(I.icon||I.iconCls||A),F=!!I.menu,C=((I.iconAlign==="right")&&!F),K=I.isMenuCheckItem,J=[],D=I.ownerCt,E=D.plain,B;I.callParent();if(G){if(F&&I.showCheckbox){G=false}}if(typeof A==="string"){B=A.split("@");A=B[0];H=B[1]}if(!E||(G&&!C)||K){if(D.showSeparator&&!E){J.push(I.indentCls)}else{J.push(I.indentNoSeparatorCls)}}if(F){J.push(I.indentRightArrowCls)}else{if(G&&(C||K)){J.push(I.indentRightIconCls)}}Ext.applyIf(I.renderData,{hasHref:!!I.href,href:I.href||"#",hrefTarget:I.hrefTarget,icon:I.icon,iconCls:I.iconCls,glyph:A,glyphCls:A?Ext.baseCSSPrefix+"menu-item-glyph":undefined,glyphFontFamily:H,hasIcon:G,hasMenu:F,indent:!E||G||K,isCheckItem:K,rightIcon:C,plain:I.plain,text:I.text,arrowCls:I.arrowCls,baseIconCls:I.baseIconCls,textCls:I.textCls,indentCls:J.join(" "),linkCls:I.linkCls,linkHrefCls:I.linkHrefCls,groupCls:I.group?I.groupCls:"",tabIndex:I.tabIndex})},onRender:function(){var A=this;A.callParent(arguments);if(A.tooltip){A.setTooltip(A.tooltip,true)}},setMenu:function(E,B){var C=this,D=C.menu,A=C.arrowEl;if(D){delete D.parentMenu;delete D.ownerItem;if(B===true||(B!==false&&C.destroyMenu)){Ext.destroy(D)}}if(E){C.menu=Ext.menu.Manager.get(E);C.menu.ownerItem=C}else{C.menu=null}if(C.rendered&&!C.destroying&&A){A[C.menu?"addCls":"removeCls"](C.arrowCls)}},setHandler:function(A,B){this.handler=A||null;this.scope=B},setIcon:function(C){var A=this.iconEl,B=this.icon;if(A){A.src=C||Ext.BLANK_IMAGE_URL}this.icon=C;this.fireEvent("iconchange",this,B,C)},setIconCls:function(D){var B=this,A=B.iconEl,C=B.iconCls;if(A){if(B.iconCls){A.removeCls(B.iconCls)}if(D){A.addCls(D)}}B.iconCls=D;B.fireEvent("iconchange",B,C,D)},setText:function(C){var B=this,A=B.textEl||B.el,D=B.text;B.text=C;if(B.rendered){A.setHtml(C||"");B.ownerCt.updateLayout()}B.fireEvent("textchange",B,D,C)},getTipAttr:function(){return this.tooltipType=="qtip"?"data-qtip":"title"},clearTip:function(){if(Ext.quickTipsActive&&Ext.isObject(this.tooltip)){Ext.tip.QuickTipManager.unregister(this.itemEl)}},setTooltip:function(C,A){var B=this;if(B.rendered){if(!A){B.clearTip()}if(Ext.quickTipsActive&&Ext.isObject(C)){Ext.tip.QuickTipManager.register(Ext.apply({target:B.itemEl.id},C));B.tooltip=C}else{B.itemEl.dom.setAttribute(B.getTipAttr(),C)}}else{B.tooltip=C}return B},privates:{getFocusEl:function(){return this.itemEl}}});
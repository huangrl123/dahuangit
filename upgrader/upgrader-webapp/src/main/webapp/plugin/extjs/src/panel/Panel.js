Ext.define("Ext.panel.Panel",{extend:"Ext.container.Container",alias:"widget.panel",alternateClassName:"Ext.Panel",requires:["Ext.panel.Header","Ext.util.MixedCollection","Ext.toolbar.Toolbar","Ext.fx.Anim","Ext.util.KeyMap","Ext.panel.DD","Ext.XTemplate","Ext.layout.component.Dock","Ext.util.Memento"],mixins:{docking:"Ext.container.DockingContainer"},childEls:["body"],renderTpl:["{% this.renderDockedItems(out,values,0); %}",'<div id="{id}-body" data-ref="body" class="{baseCls}-body<tpl if="bodyCls"> {bodyCls}</tpl>',' {baseCls}-body-{ui}<tpl if="uiCls">','<tpl for="uiCls"> {parent.baseCls}-body-{parent.ui}-{.}</tpl>','</tpl>{childElCls}"','<tpl if="bodyRole"> role="{bodyRole}"<tpl else> role="presentation"</tpl>','<tpl if="bodyStyle"> style="{bodyStyle}"</tpl>>',"{%this.renderContainer(out,values);%}","</div>","{% this.renderDockedItems(out,values,1); %}"],headerPosition:"top",iconAlign:"left",titleAlign:"left",titleRotation:"default",beforeRenderConfig:{glyph:null,headerPosition:null,icon:null,iconAlign:null,iconCls:null,title:null,titleAlign:null,titleRotation:null},animCollapse:Ext.enableFx,border:true,closable:false,closeAction:"destroy",collapsed:false,collapsedCls:"collapsed",collapseFirst:true,collapsible:undefined,constrain:false,constrainHeader:false,floatable:true,frame:false,frameHeader:true,hideCollapseTool:false,manageHeight:true,maskElement:"el",minButtonWidth:75,preventHeader:false,shrinkWrapDock:false,titleCollapse:undefined,baseCls:Ext.baseCSSPrefix+"panel",bodyPosProps:{x:"x",y:"y"},componentLayout:"dock",contentPaddingProperty:"bodyPadding",emptyArray:[],isPanel:true,defaultBindProperty:"title",addBodyCls:function(B){var C=this,A=C.rendered?C.body:C.getProtoBody();A.addCls(B);return C},addTool:function(B){if(!Ext.isArray(B)){B=[B]}var D=this,A=D.header,C=B.length,F=D.tools,G,E;if(!A||!A.isHeader){A=null;if(!F){D.tools=F=[]}}for(G=0;G<C;G++){E=B[G];E.toolOwner=D;if(A){A.addTool(E)}else{F.push(E)}}D.updateHeader()},addTools:Ext.emptyFn,setCollapsible:function(A){var C=this,D=C.collapsible,B=C.collapseTool;C.collapsible=A;if(A&&!D){C.updateCollapseTool();B=C.collapseTool;if(B){B.show()}}else{if(!A&&D){if(B){B.hide()}}}},addUIClsToElement:function(B){var C=this,A=C.callParent(arguments);C.addBodyCls([Ext.baseCSSPrefix+B,C.baseCls+"-body-"+B,C.baseCls+"-body-"+C.ui+"-"+B]);return A},afterCollapse:function(B){var A=this,C=A.ownerLayout;A.isCollapsingOrExpanding=0;A.updateCollapseTool();if(B){A.removeCls(Ext.baseCSSPrefix+"animating-size")}A.setHiddenDocked();A.fireEvent("collapse",A)},afterExpand:function(B){var A=this,C=A.ownerLayout;A.isCollapsingOrExpanding=0;A.updateCollapseTool();if(B){A.removeCls(Ext.baseCSSPrefix+"animating-size")}A.fireEvent("expand",A);A.fireHierarchyEvent("expand")},beforeDestroy:function(){var A=this;Ext.destroy(A.placeholder,A.ghostPanel,A.dd);this.destroyDockedItems();A.callParent()},beforeRender:function(){var A=this,B;A.callParent();A.initTools();if(!(A.preventHeader||(A.header===false))){A.updateHeader()}if(A.collapsed){if(A.isPlaceHolderCollapse()){if(!A.hidden){A.setHiddenState(true);A.preventCollapseFire=true;A.placeholderCollapse();delete A.preventCollapseFire;B=A.collapsed;A.collapsed=false}}else{A.beginCollapse();A.addClsWithUI(A.collapsedCls)}}if(B){A.collapsed=B}},getMemento:function(B){var A=this;if(B&&typeof B=="string"){B+="Memento";return A[B]||(A[B]=new Ext.util.Memento(A))}},beginCollapse:function(){var E=this,A=E.lastBox,C=E.rendered,B=E.getMemento("collapse"),D=E.getSizeModel(),F=E.header,G;B.capture(["height","minHeight","width","minWidth"]);if(A){B.capture(E.restoreDimension(),A,"last.")}if(E.collapsedVertical()){if(D.width.shrinkWrap){E.width=C?E.getWidth():E.width||E.minWidth||100}delete E.height;E.minHeight=0}else{if(E.collapsedHorizontal()){if(D.height.shrinkWrap){E.height=C?E.getHeight():E.height||E.minHeight||100}delete E.width;E.minWidth=0}}if(E.ownerCt){E.ownerCt.getLayout().beginCollapse(E)}if(!E.isPlaceHolderCollapse()&&F!==false){if(F===(G=E.getReExpander())){F.collapseImmune=true;F.getInherited().collapseImmune=true;F.addClsWithUI(E.getHeaderCollapsedClasses(F));if(F.rendered){F.updateFrame()}}else{if(G.el){G.el.show();G.hidden=false}}}if(E.resizer){E.resizer.disable()}},beginDrag:function(){if(this.floatingDescendants){this.floatingDescendants.hide()}},beginExpand:function(){var E=this,A=E.lastBox,B=E.getMemento("collapse"),C=E.restoreDimension(),F=E.header,D;if(B){B.restore(["minHeight","minWidth",C]);if(A){B.restore(C,true,A,"last.")}}if(E.ownerCt){E.ownerCt.getLayout().beginExpand(E)}if(!E.isPlaceHolderCollapse()&&F!==false){if(F===(D=E.getReExpander())){delete F.collapseImmune;delete F.getInherited().collapseImmune;F.removeClsWithUI(E.getHeaderCollapsedClasses(F));if(F.rendered){F.expanding=true;F.updateFrame();delete F.expanding}}else{D.hidden=true;D.el.hide()}}if(E.resizer){E.resizer.enable()}},bridgeToolbars:function(){var D=this,E=[],C=D.minButtonWidth,F,B;function A(I,G,H){if(Ext.isArray(I)){I={xtype:"toolbar",items:I}}else{if(!I.xtype){I.xtype="toolbar"}}I.dock=G;if(G=="left"||G=="right"){I.vertical=true}if(H){I.layout=Ext.applyIf(I.layout||{},{pack:{left:"start",center:"center"}[D.buttonAlign]||"end"})}return I}if(D.tbar){E.push(A(D.tbar,"top"));D.tbar=null}if(D.bbar){E.push(A(D.bbar,"bottom"));D.bbar=null}if(D.buttons){D.fbar=D.buttons;D.buttons=null}if(D.fbar){F=A(D.fbar,"bottom",true);F.ui="footer";if(C){B=F.defaults;F.defaults=function(G){var J=B||{},I=!G.xtype||G.isButton,H;if(!I){H=Ext.ClassManager.getByAlias("widget."+G.xtype);if(H){I=H.prototype.isButton}}if(I&&!("minWidth" in J)){J=Ext.apply({minWidth:C},J)}return J}}E.push(F);D.fbar=null}if(D.lbar){E.push(A(D.lbar,"left"));D.lbar=null}if(D.rbar){E.push(A(D.rbar,"right"));D.rbar=null}if(D.dockedItems){if(D.dockedItems.isMixedCollection){D.addDocked(E)}else{if(!Ext.isArray(D.dockedItems)){D.dockedItems=[D.dockedItems]}D.dockedItems=D.dockedItems.concat(E)}}else{D.dockedItems=E}},close:function(){if(this.fireEvent("beforeclose",this)!==false){this.doClose()}},collapse:function(F,B){var C=this,D=F||C.collapseDirection,E=C.ownerCt,G=C.ownerLayout,A=C.rendered;if(C.isCollapsingOrExpanding){return C}if(arguments.length<2){B=C.animCollapse}if(C.collapsed||C.fireEvent("beforecollapse",C,F,B)===false){return C}if(G&&G.onBeforeComponentCollapse){if(G.onBeforeComponentCollapse(C)===false){return C}}if(A&&E&&C.isPlaceHolderCollapse()){return C.placeholderCollapse(F,B)}C.collapsed=D;if(A){C.beginCollapse()}C.getInherited().collapsed=true;C.fireHierarchyEvent("collapse");if(A){C.doCollapseExpand(1,B)}return C},collapsedHorizontal:function(){var A=this.getCollapsed();return A==="left"||A==="right"},collapsedVertical:function(){var A=this.getCollapsed();return A==="top"||A==="bottom"},convertCollapseDir:function(A){return A.substr(0,1)},createGhost:function(B){var C=this,A=C.header,D=C.frame&&!C.alwaysFramed;return{xtype:"panel",hidden:false,header:A?{titleAlign:A.getTitleAlign()}:null,ui:D?C.ui.replace(/-framed$/,""):C.ui,id:C.id+"-ghost",renderTo:Ext.getBody(),resizable:false,draggable:false,closable:false,floating:{shadow:false},frame:D,alwaysFramed:C.alwaysFramed,overlapHeader:C.overlapHeader,headerPosition:C.getHeaderPosition(),titleRotation:C.getTitleRotation(),baseCls:C.baseCls,cls:C.baseCls+"-ghost "+(B||"")}},createReExpander:function(A,C){var E=this,F=A==="left",H=A==="right",D=F||H,G=E.ownerCt,B=Ext.apply({hideMode:"offsets",title:E.getTitle(),titleAlign:E.getTitleAlign(),vertical:D,textCls:E.headerTextCls,icon:E.getIcon(),iconCls:E.getIconCls(),iconAlign:E.getIconAlign(),glyph:E.getGlyph(),baseCls:E.self.prototype.baseCls+"-header",ui:E.ui,frame:E.frame&&E.frameHeader,ignoreParentFrame:E.frame||E.overlapHeader,ignoreBorderManagement:E.frame||E.ignoreHeaderBorderManagement,indicateDrag:E.draggable,collapseImmune:true,headerRole:E.headerRole,ownerCt:(G&&E.collapseMode==="placeholder")?G:E,ownerLayout:E.componentLayout,margin:E.margin},C);if(E.collapseMode==="mini"){if(D){B.width=1}else{B.height=1}}if(!E.hideCollapseTool){if(F||(H&&E.isPlaceHolderCollapse())){B.titlePosition=1}B.tools=[{xtype:"tool",type:"expand-"+E.getOppositeDirection(A),uiCls:["top"],handler:E.toggleCollapse,scope:E}]}B=new Ext.panel.Header(B);B.addClsWithUI(E.getHeaderCollapsedClasses(B));return B},doClose:function(){this.fireEvent("close",this);this[this.closeAction]()},doCollapseExpand:function(D,B){var C=this,A=C.animCollapse,E=C.ownerLayout;C.animCollapse=B;C.isCollapsingOrExpanding=D;if(B){C.addCls(Ext.baseCSSPrefix+"animating-size")}if(E&&!B){E.onContentChange(C)}else{C.updateLayout({isRoot:true})}C.animCollapse=A;return C},endDrag:function(){if(this.floatingDescendants){this.floatingDescendants.show()}},expand:function(B){var C=this,D=C.ownerLayout,A=C.rendered;if(C.isCollapsingOrExpanding){return C}if(!arguments.length){B=C.animCollapse}if(!C.collapsed&&!C.floatedFromCollapse){return C}if(C.fireEvent("beforeexpand",C,B)===false){return C}if(D&&D.onBeforeComponentExpand){if(D.onBeforeComponentExpand(C)===false){return C}}delete C.getInherited().collapsed;if(A&&C.isPlaceHolderCollapse()){return C.placeholderExpand(B)}C.restoreHiddenDocked();if(A){C.beginExpand()}C.collapsed=false;if(C.rendered){C.doCollapseExpand(2,B)}return C},findReExpander:function(F){var C=this,E=Ext.Component,B=C.dockedItems.items,D=B.length,G,A;if(C.collapseMode==="mini"){return}switch(F){case E.DIRECTION_TOP:case E.DIRECTION_BOTTOM:for(A=0;A<D;A++){G=B[A];if(!G.hidden){if(G.isHeader&&(!G.dock||G.dock==="top"||G.dock==="bottom")){return G}}}break;case E.DIRECTION_LEFT:case E.DIRECTION_RIGHT:for(A=0;A<D;A++){G=B[A];if(!G.hidden){if(G.isHeader&&(G.dock==="left"||G.dock==="right")){return G}}}break;default:throw ("Panel#findReExpander must be passed a valid collapseDirection")}},floatCollapsedPanel:function(){var F=this,A=F.placeholder,E=A.getSize(),G,B=Ext.baseCSSPrefix+"border-region-slide-in",I=F.collapsed,C=F.ownerCt||F,H,D;if(F.isSliding){return}if(F.el.hasCls(B)){F.slideOutFloatedPanel();return}F.isSliding=true;A.el.hide();A.hidden=true;F.el.show();F.setHiddenState(false);F.collapsed=false;C.updateLayout();G=F.getBox(false,true);A.el.show();A.hidden=false;F.el.hide();F.setHiddenState(true);F.collapsed=I;C.updateLayout();F.slideOutTask=F.slideOutTask||new Ext.util.DelayedTask(F.slideOutFloatedPanel,F);if(Ext.supports.Touch){Ext.on("mousedown",D=function(J){if(!J.within(F.el)){Ext.un("mousedown",D);F.slideOutFloatedPanel()}});if(!F.placeholderListener){F.placeholderListener=A.on({resize:F.onPlaceholderResize,scope:F,destroyable:true})}}A.el.on("mouseleave",F.onMouseLeaveFloated,F);F.el.on("mouseleave",F.onMouseLeaveFloated,F);A.el.on("mouseenter",F.onMouseEnterFloated,F);F.el.on("mouseenter",F.onMouseEnterFloated,F);F.el.addCls(B);F.floated=I;if(F.collapseTool){F.collapseTool.el.hide()}switch(F.collapsed){case"top":F.setLocalXY(G.x,G.y+E.height-1);break;case"right":F.setLocalXY(G.x-E.width+1,G.y);break;case"bottom":F.setLocalXY(G.x,G.y-E.height+1);break;case"left":F.setLocalXY(G.x+E.width-1,G.y);break}H=F.convertCollapseDir(F.collapsed);F.floatedFromCollapse=F.collapsed;F.collapsed=false;F.setHiddenState(false);F.el.slideIn(H,{preserveScroll:true,duration:Ext.Number.from(F.animCollapse,Ext.fx.Anim.prototype.duration),listeners:{afteranimate:function(){F.isSliding=false;F.fireEvent("float",F)}}})},onPlaceholderResize:function(B,E,C){var D=this,A=D.getBox(false,true),F=D.placeholder.getBox(false,true);switch(D.floated){case"top":this.width=E;D.setLocalY(F.y+F.height);break;case"right":this.height=C;D.setLocalX(F.x-A.width);break;case"bottom":this.width=E;D.setLocalY(F.y-A.height);break;case"left":this.height=C;D.setLocalX(F.x+F.width);break}this.updateLayout({isRoot:true})},getAnimationProps:function(){var B=this,A=B.animCollapse,C;C=B.callParent();if(typeof A==="number"){C.duration=A}return C},getCollapsed:function(){var A=this;if(A.collapsed===true){return A.collapseDirection}return A.collapsed},getCollapsedDockedItems:function(){var A=this;return A.header===false||A.collapseMode=="placeholder"?A.emptyArray:[A.getReExpander()]},getComponent:function(B){var A=this.callParent(arguments);if(A===undefined&&!Ext.isNumber(B)){A=this.getDockedComponent(B)}return A},getHeader:function(){return this.header},getHeaderCollapsedClasses:function(D){var A=this,C=A.collapsedCls,B;B=[C,C+"-"+D.getDockName()];if(A.border&&(!A.frame||(A.frame&&Ext.supports.CSS3BorderRadius))){B.push(C+"-border-"+D.getDockName())}return B},getHeightAuthority:function(){if(this.collapsed&&this.collapsedVertical()){return 1}return this.callParent()},getKeyMap:function(){return this.keyMap||(this.keyMap=new Ext.util.KeyMap(Ext.apply({target:this.el},this.keys)))},getOppositeDirection:function(A){var B=Ext.Component;switch(A){case B.DIRECTION_TOP:return B.DIRECTION_BOTTOM;case B.DIRECTION_RIGHT:return B.DIRECTION_LEFT;case B.DIRECTION_BOTTOM:return B.DIRECTION_TOP;case B.DIRECTION_LEFT:return B.DIRECTION_RIGHT}},getPlaceholder:function(G){var D=this,E=G||D.collapseDirection,A=null,F=D.placeholder,C=D.floatable,B=D.titleCollapse;if(!F){if(C||(D.collapsible&&B)){A={click:{fn:(!B&&C)?D.floatCollapsedPanel:D.toggleCollapse,element:"el",scope:D}}}D.placeholder=F=Ext.widget(D.createReExpander(E,{id:D.id+"-placeholder",listeners:A}))}if(!F.placeholderFor){if(!F.isComponent){D.placeholder=F=D.lookupComponent(F)}Ext.applyIf(F,{margin:D.margin,placeholderFor:D,synthetic:true});F.addCls([Ext.baseCSSPrefix+"region-collapsed-placeholder",Ext.baseCSSPrefix+"region-collapsed-"+E+"-placeholder",D.collapsedCls])}return F},getProtoBody:function(){var B=this,A=B.protoBody;if(!A){B.protoBody=A=new Ext.util.ProtoElement({cls:B.bodyCls,style:B.bodyStyle,clsProp:"bodyCls",styleProp:"bodyStyle",styleIsText:true})}return A},getReExpander:function(D){var B=this,C=D||B.collapseDirection,A=B.reExpander||B.findReExpander(C);B.expandDirection=B.getOppositeDirection(C);if(!A){B.reExpander=A=B.createReExpander(C,{dock:C,cls:Ext.baseCSSPrefix+"docked "+B.baseCls+"-"+B.ui+"-collapsed",isCollapsedExpander:true});B.dockedItems.insert(0,A)}return A},getRefItems:function(A){var B=this.callParent(arguments);return this.getDockingRefItems(A,B)},getState:function(){var B=this,E=B.callParent()||{},A=B.collapsed,C=B.floated,D;if(C){B.collapsed=C}E=B.addPropertyToState(E,"collapsed");if(C){B.collapsed=A}if(B.getCollapsed()){D=B.getMemento("collapse").data;E=B.addPropertyToState(E,"collapsed",D);if(B.collapsedVertical()){delete E.height;if(D){E=B.addPropertyToState(E,"height",D.height)}}else{delete E.width;if(D){E=B.addPropertyToState(E,"width",D.width)}}}return E},applyState:function(D){var C=this,B={},A;if(D){A=D.collapsed;if(A){B=C.getMemento("collapse");Ext.Object.merge(B.data,A);D.collapsed=true}C.callParent(arguments)}},ghost:function(D){var J=this,E=J.ghostPanel,F=J.getBox(),K=J.header,B,C,G,I,A,H;if(!E){J.ghostPanel=E=Ext.widget(J.createGhost(D))}else{E.el.show()}E.setHiddenState(false);E.floatParent=J.floatParent;E.toFront();if(K&&!J.preventHeader){B=E.header;B.suspendLayouts();C=B.query("tool");for(H=C.length;H--;){B.remove(C[H])}E.addTool(J.ghostTools());E.setTitle(J.getTitle());B.setTitlePosition(K.titlePosition);I=J.getIconCls();if(I){E.setIconCls(I)}else{G=J.getIcon();if(G){E.setIcon(G)}else{A=J.getGlyph();if(A){E.setGlyph(A)}}}B.addCls(Ext.baseCSSPrefix+"header-ghost");B.resumeLayouts()}E.setPagePosition(F.x,F.y);E.setSize(F.width,F.height);J.el.hide();return E},ghostTools:function(){var A=[],C=this.header,E=C?C.query("tool[hidden=false]"):[],F,B,D;if(E.length){F=0;B=E.length;for(;F<B;F++){D=E[F];A.push({type:D.type})}}else{A=[{type:"placeholder"}]}return A},initBodyBorder:function(){var A=this;if(A.frame&&A.bodyBorder){if(!Ext.isNumber(A.bodyBorder)){A.bodyBorder=1}A.getProtoBody().setStyle("border-width",this.unitizeBox(A.bodyBorder))}},initBodyStyles:function(){var B=this,A=B.getProtoBody();if(B.bodyPadding!==undefined){if(B.layout.managePadding){A.setStyle("padding",0)}else{A.setStyle("padding",this.unitizeBox((B.bodyPadding===true)?5:B.bodyPadding))}}B.initBodyBorder()},initBorderProps:function(){var A=this;if(A.frame&&A.border&&A.bodyBorder===undefined){A.bodyBorder=false}if(A.frame&&A.border&&(A.bodyBorder===false||A.bodyBorder===0)){A.manageBodyBorders=true}},initComponent:function(){var A=this;if(A.collapsible){A.addStateEvents(["expand","collapse"])}if(A.unstyled){A.setUI("plain")}if(A.frame){A.setUI(A.ui+"-framed")}A.bridgeToolbars();this.initBorderProps();A.callParent();A.collapseDirection=A.collapseDirection||A.getHeaderPosition()||Ext.Component.DIRECTION_TOP;A.hiddenOnCollapse=new Ext.dom.CompositeElement()},initItems:function(){this.callParent();this.initDockingItems()},initRenderData:function(){var A=this,B=A.callParent();A.initBodyStyles();A.protoBody.writeTo(B);delete A.protoBody;return B},calculateConstrainedPosition:function(F,C,E,D){var B=this,A;if(B.constrainHeader){if(D){if(!B.header.vertical){D=[D[0],B.header.lastBox.height]}else{D=[B.header.lastBox.width,D[1]]}}else{D=[B.header.lastBox.width,B.header.lastBox.height]}A=B.floatParent;F=F||B.constrainTo||(A?A.getTargetEl():null)||B.container||B.el.parent()}return B.callParent([F,C,E,D])},initTools:function(){var D=this,B=D.tools,A,C;D.tools=[];for(A=B&&B.length;A;){--A;D.tools[A]=C=B[A];C.toolOwner=D}if(D.collapsible&&!(D.hideCollapseTool||D.header===false||D.preventHeader)){D.updateCollapseTool();if(D.collapseFirst){D.tools.unshift(D.collapseTool)}}D.addTools();if(D.pinnable){D.initPinnable()}if(D.closable){D.addClsWithUI("closable");D.addTool({xtype:"tool",type:"close",scope:D,handler:D.close})}if(D.collapseTool&&!D.collapseFirst){D.addTool(D.collapseTool)}},isLayoutRoot:function(){if(this.floatedFromCollapse){return true}return this.callParent()},isPlaceHolderCollapse:function(){return this.collapseMode=="placeholder"},isVisible:function(A){var B=this;if(B.collapsed&&B.placeholder){return B.placeholder.isVisible(A)}return B.callParent(arguments)},onBoxReady:function(){this.callParent();if(this.collapsed){this.setHiddenDocked()}},onHide:function(){var A=this,B=A.dd;if(A.floatedFromCollapse){A.slideOutFloatedPanel(true)}if(A.draggable&&B){B.endDrag()}if(A.collapsed&&A.placeholder){A.placeholder.hide()}else{A.callParent(arguments)}},onMouseEnterFloated:function(A){this.slideOutTask.cancel()},onMouseLeaveFloated:function(A){this.slideOutTask.delay(500)},onRemoved:function(A){var B=this;if(B.placeholder&&!A){B.ownerCt.remove(B.placeholder,false)}B.callParent(arguments)},onShow:function(){var A=this;if(A.collapsed&&A.isPlaceHolderCollapse()){A.setHiddenState(true);A.placeholderCollapse()}else{A.callParent(arguments)}},placeholderCollapse:function(B,C){var D=this,H=D.ownerCt,G=B||D.collapseDirection,E=Ext.baseCSSPrefix+"border-region-slide-in",A=D.getPlaceholder(G),F;D.isCollapsingOrExpanding=1;D.setHiddenState(true);D.collapsed=G;if(A.rendered){if(A.el.dom.parentNode!==D.el.dom.parentNode){D.el.dom.parentNode.insertBefore(A.el.dom,D.el.dom)}A.hidden=false;A.setHiddenState(false);A.el.show();H.updateLayout()}else{H.insert(H.items.indexOf(D),A)}if(D.rendered){D.el.setVisibilityMode(D.placeholderCollapseHideMode);if(C){D.el.addCls(E);A.el.hide();F=D.convertCollapseDir(G);D.el.slideOut(F,{preserveScroll:true,duration:Ext.Number.from(C,Ext.fx.Anim.prototype.duration),listeners:{afteranimate:function(){D.el.removeCls(E);A.el.show().setStyle("display","none").slideIn(F,{easing:"linear",duration:100,listeners:{afteranimate:function(){A.focus();A.setHiddenState(false);D.isCollapsingOrExpanding=0;D.fireEvent("collapse",D)}}})}}})}else{D.el.hide();A.setHiddenState(false);D.isCollapsingOrExpanding=0;D.fireEvent("collapse",D)}}else{D.isCollapsingOrExpanding=0;if(!D.preventCollapseFire){D.fireEvent("collapse",D)}}return D},placeholderExpand:function(C){var E=this,F=E.collapsed,D=Ext.baseCSSPrefix+"border-region-slide-in",B,A,G=E.ownerLayout?E.ownerLayout.centerRegion:null;if(Ext.Component.layoutSuspendCount){C=false}if(E.floatedFromCollapse){A=E.getPosition(true);E.slideOutFloatedPanelBegin();E.slideOutFloatedPanelEnd();E.floated=false}if(C){Ext.suspendLayouts();E.placeholder.hide();E.el.show();E.collapsed=false;E.setHiddenState(false);if(G&&!A){G.hidden=true}Ext.resumeLayouts(true);G.hidden=false;E.el.addCls(D);E.isCollapsingOrExpanding=2;if(A){B=E.getXY();E.setLocalXY(A[0],A[1]);E.setXY([B[0],B[1]],{duration:Ext.Number.from(C,Ext.fx.Anim.prototype.duration),listeners:{afteranimate:function(){E.el.removeCls(D);E.isCollapsingOrExpanding=0;E.fireEvent("expand",E)}}})}else{E.el.hide();E.placeholder.el.show();E.placeholder.hidden=false;E.setHiddenState(false);E.el.slideIn(E.convertCollapseDir(F),{preserveScroll:true,duration:Ext.Number.from(C,Ext.fx.Anim.prototype.duration),listeners:{afteranimate:function(){E.el.removeCls(D);E.placeholder.hide();E.updateLayout();E.isCollapsingOrExpanding=0;E.fireEvent("expand",E)}}})}}else{E.floated=E.collapsed=false;E.el.removeCls(D);Ext.suspendLayouts();E.placeholder.hide();E.show();Ext.resumeLayouts(true);E.fireEvent("expand",E)}return E},removeBodyCls:function(B){var C=this,A=C.rendered?C.body:C.getProtoBody();A.removeCls(B);return C},removeUIClsFromElement:function(B){var C=this,A=C.callParent(arguments);C.removeBodyCls([Ext.baseCSSPrefix+B,C.baseCls+"-body-"+B,C.baseCls+"-body-"+C.ui+"-"+B]);return A},restoreDimension:function(){var A=this.collapseDirection;return(A==="top"||A==="bottom")?"height":"width"},restoreHiddenDocked:function(){var A=this.hiddenOnCollapse;A.setStyle("visibility","");A.clear()},setBodyStyle:function(C,D){var A=this,B=A.rendered?A.body:A.getProtoBody();if(Ext.isFunction(C)){C=C()}if(arguments.length==1){if(Ext.isString(C)){C=Ext.Element.parseStyles(C)}B.setStyle(C)}else{B.setStyle(C,D)}return A},setBorder:function(A,C){if(C){return}var B=this,D=B.header;if(!A){A=0}else{if(A===true){A="1px"}else{A=B.unitizeBox(A)}}if(D){if(D.isHeader){D.setBorder(A)}else{D.border=A}}if(B.rendered&&B.bodyBorder!==false){B.body.setStyle("border-width",A)}B.updateLayout();B.border=A},setHiddenDocked:function(){var D=this,C=D.hiddenOnCollapse,F=D.getDockedItems(),E=F.length,A=0,B,G;if(D.header!==false){G=D.getReExpander()}C.add(D.body);for(;A<E;A++){B=F[A];if(B&&B!==G&&B.el){C.add(B.el)}}C.setStyle("visibility","hidden")},setUI:function(A){var B=this;B.callParent(arguments);if(B.header&&B.header.rendered){B.header.setUI(A)}},toggleCollapse:function(){return(this.collapsed||this.floatedFromCollapse)?this.expand():this.collapse()},updateCollapseTool:function(){var B=this,A=B.collapseTool;if(!A&&B.collapsible){B.collapseDirection=B.collapseDirection||B.getHeaderPosition()||"top";B.collapseTool=B.expandTool=A=Ext.widget({xtype:"tool",handler:B.toggleCollapse,scope:B})}if(A){if(B.collapsed&&!B.isPlaceHolderCollapse()){A.setType("expand-"+B.getOppositeDirection(B.collapseDirection))}else{A.setType("collapse-"+B.collapseDirection)}}},updateGlyph:function(E,C){var B=this,A=B.header,D=B.placeholder;if(A){if(A.isHeader){A.setGlyph(E)}else{A.glyph=E}}else{if(!B._updatingHeader){B.updateHeader()}}if(D&&D.setGlyph){D.setIcon(E)}B.fireEvent("glyphchange",B,E,C)},updateHeaderPosition:function(B){var A=this.header;if(A&&A.isHeader){A.setDock(B)}},updateIcon:function(D,B){var C=this,A=C.header,E=C.placeholder;if(A){if(A.isHeader){A.setIcon(D)}else{A.icon=D}}else{if(!C._updatingHeader){C.updateHeader()}}if(E&&E.setIcon){E.setIcon(D)}C.fireEvent("iconchange",C,D,B)},updateIconAlign:function(B){var A=this.header;if(A&&A.isHeader){A.setIconAlign(B)}},updateIconCls:function(E,C){var B=this,A=B.header,D=B.placeholder;if(A){if(A.isHeader){A.setIconCls(E)}else{A.iconCls=E}}else{if(!B._updatingHeader){B.updateHeader()}}if(D&&D.setIconCls){D.setIconCls(E)}B.fireEvent("iconclschange",B,E,C)},updateTitle:function(D,F){var C=this,A=C.header,B=C.reExpander,E=C.placeholder;if(A){if(A.isHeader){A.setTitle(D)}else{A.title=D}}else{if(C.rendered){C.updateHeader()}}if(B){B.setTitle(D)}if(E&&E.setTitle){E.setTitle(D)}C.fireEvent("titlechange",C,D,F)},updateTitleAlign:function(B){var A=this.header;if(A&&A.isHeader){A.setTitleAlign(B)}},updateTitleRotation:function(A){var B=this.header;if(B&&B.isHeader){B.setTitleRotation(A)}},unghost:function(B,A,D){var C=this,E=C.ghostPanel;if(!E){return}if(B!==false){C.el.show();if(A!==false){C.setPagePosition(E.getXY());if(C.hideMode==="offsets"){delete C.el.hideModeStyles}}if(D){C.focus(false,10)}}E.el.hide();E.setHiddenState(true)},updateHeader:function(C){this._updatingHeader=true;var A=this,J=A.header,I=A.getTitle(),E=A.tools,F=A.getIcon(),B=A.getGlyph(),H=A.getIconCls(),G=B||F||H,K=A.getHeaderPosition(),D=K==="left"||K==="right";if(Ext.isObject(J)||(J!==false&&(C||(I||G)||(E&&E.length)||(A.collapsible&&!A.titleCollapse)))){if(J&&J.isHeader){J.show()}else{J=A.header=Ext.widget(Ext.merge({xtype:"header",title:I,titleAlign:A.getTitleAlign(),vertical:D,dock:A.getHeaderPosition()||"top",titleRotation:A.getTitleRotation(),textCls:A.headerTextCls,iconCls:H,iconAlign:A.getIconAlign(),icon:F,glyph:B,baseCls:A.baseCls+"-header",tools:E,ui:A.ui,id:A.id+"_header",overCls:A.headerOverCls,indicateDrag:A.draggable,frame:(A.frame||A.alwaysFramed)&&A.frameHeader,ignoreParentFrame:A.frame||A.overlapHeader,ignoreBorderManagement:A.frame||A.ignoreHeaderBorderManagement,headerRole:A.headerRole,ownerCt:A,synthetic:true,listeners:A.collapsible&&A.titleCollapse?{click:A.toggleCollapse,scope:A}:null},A.header));A.addDocked(J,0)}}else{if(J){J.hide()}}A._updatingHeader=false},privates:{addUIToElement:function(){var A=this;A.callParent(arguments);A.addBodyCls(A.baseCls+"-body-"+A.ui)},applyTargetCls:function(A){this.getProtoBody().addCls(A)},getDefaultContentTarget:function(){return this.body},getFocusEl:function(){return this.el},getTargetEl:function(){var A=this;return A.body||A.protoBody||A.frameBody||A.el},getWidthAuthority:function(){if(this.collapsed&&this.collapsedHorizontal()){return 1}return this.callParent()},initDraggable:function(){var A=this;if(A.simpleDrag){A.initSimpleDraggable()}else{A.dd=new Ext.panel.DD(A,Ext.isBoolean(A.draggable)?null:A.draggable)}},initResizable:function(){this.callParent(arguments);if(this.collapsed){this.resizer.disable()}},initSimpleDraggable:function(){var B=this,A,C;if(!B.header){B.updateHeader(true)}if(B.header){A=Ext.applyIf({el:B.el,delegate:"#"+B.header.id},B.draggable);if(B.constrain||B.constrainHeader){A.constrain=B.constrain;A.constrainDelegate=B.constrainHeader;A.constrainTo=B.constrainTo||B.container}C=B.dd=new Ext.util.ComponentDragger(B,A);B.relayEvents(C,["dragstart","drag","dragend"]);if(B.maximized){C.disable()}}},removeUIFromElement:function(){var A=this;A.callParent(arguments);A.removeBodyCls(A.baseCls+"-body-"+A.ui)},setupRenderTpl:function(A){this.callParent(arguments);this.setupDockingRenderTpl(A)},slideOutFloatedPanel:function(A){var B=this,D=B.el,C;if(B.isSliding||B.isDestroyed){return}B.isSliding=true;B.floated=false;B.slideOutFloatedPanelBegin();if(typeof B.collapsed=="string"){C=B.convertCollapseDir(B.collapsed)}D.slideOut(C,{preserveScroll:true,duration:Ext.Number.from(B.animCollapse,Ext.fx.Anim.prototype.duration),autoEnd:A===true,listeners:{afteranimate:function(){B.slideOutFloatedPanelEnd();B.el.removeCls(Ext.baseCSSPrefix+"border-region-slide-in")}}})},slideOutFloatedPanelBegin:function(){var C=this,B=C.placeholder.el,A=C.el;C.collapsed=C.floatedFromCollapse;C.setHiddenState(true);C.floatedFromCollapse=null;B.un("mouseleave",C.onMouseLeaveFloated,C);A.un("mouseleave",C.onMouseLeaveFloated,C);B.un("mouseenter",C.onMouseEnterFloated,C);A.un("mouseenter",C.onMouseEnterFloated,C)},slideOutFloatedPanelEnd:function(A){var B=this;if(B.collapseTool){B.collapseTool.el.show()}B.slideOutTask.cancel();B.isSliding=false;if(!A){B.fireEvent("unfloat",B)}}}},function(){var A=this.prototype;A.animCollapse=Ext.enableFx;A.placeholderCollapseHideMode=Ext.Element.VISIBILITY});
Ext.define("Ext.util.ComponentDragger",{extend:"Ext.dd.DragTracker",autoStart:500,constructor:function(B,A){this.comp=B;this.initialConstrainTo=A.constrainTo;this.callParent([A])},onStart:function(A){var B=this,C=B.comp;B.startPosition=C.getXY();if(C.ghost&&!C.liveDrag){B.proxy=C.ghost();B.dragTarget=B.proxy.header.el}if(B.constrain||B.constrainDelegate){B.constrainTo=B.calculateConstrainRegion()}if(C.beginDrag){C.beginDrag()}},calculateConstrainRegion:function(){var A=this,F=A.comp,D=A.initialConstrainTo,G=F.constraintInsets,C,I,B,E=A.proxy?A.proxy.el:F.el,H=(!A.constrainDelegate&&E.shadow&&F.constrainShadow&&!E.shadowDisabled)?E.shadow.getShadowSize():0;if(!(D instanceof Ext.util.Region)){C=Ext.fly(D);D=C.getViewRegion();D.right=D.left+C.dom.clientWidth}else{D=D.copy()}if(G){G=Ext.isObject(G)?G:Ext.Element.parseBox(G);D.adjust(G.top,G.right,G.bottom,G.length)}if(H){D.adjust(H[0],-H[1],-H[2],H[3])}if(!A.constrainDelegate){I=Ext.fly(A.dragTarget).getRegion();B=E.getRegion();D.adjust(I.top-B.top,I.right-B.right,I.bottom-B.bottom,I.left-B.left)}return D},onDrag:function(B){var C=this,D=(C.proxy&&!C.comp.liveDrag)?C.proxy:C.comp,A=C.getOffset(C.constrain||C.constrainDelegate?"dragTarget":null);D.setPagePosition(C.startPosition[0]+A[0],C.startPosition[1]+A[1])},onEnd:function(A){var B=this.comp;if(B.isDestroyed||B.destroying){return}if(this.proxy&&!B.liveDrag){B.unghost()}if(B.endDrag){B.endDrag()}}});
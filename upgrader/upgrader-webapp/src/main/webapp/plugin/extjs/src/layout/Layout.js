Ext.define("Ext.layout.Layout",{mixins:["Ext.mixin.Factoryable"],requires:["Ext.XTemplate","Ext.layout.SizeModel"],uses:["Ext.layout.Context"],factoryConfig:{type:"layout"},isLayout:true,initialized:false,running:false,needsItemSize:true,setsItemSize:true,autoSizePolicy:{readsWidth:1,readsHeight:1,setsWidth:0,setsHeight:0},$configPrefixed:false,$configStrict:false,constructor:function(A){var B=this;B.id=Ext.id(null,B.type+"-");B.initConfig(A);delete B.type;B.layoutCount=0},beginLayout:Ext.emptyFn,beginLayoutCycle:function(C){var B=this,A=B.context,D;if(B.lastWidthModel!=C.widthModel){if(B.lastWidthModel){D=true}B.lastWidthModel=C.widthModel}if(B.lastHeightModel!=C.heightModel){if(B.lastWidthModel){D=true}B.lastHeightModel=C.heightModel}if(D){(A=C.context).clearTriggers(B,false);A.clearTriggers(B,true);B.triggerCount=0}},finishedLayout:function(A){this.lastWidthModel=A.widthModel;this.lastHeightModel=A.heightModel;this.ownerContext=null},redoLayout:Ext.emptyFn,undoLayout:Ext.emptyFn,getAnimatePolicy:function(){return this.animatePolicy},getItemSizePolicy:function(A){return this.autoSizePolicy},getScrollerEl:Ext.emptyFn,isItemBoxParent:function(A){return false},isItemLayoutRoot:function(B){var A=B.getSizeModel(),D=A.width,C=A.height;if(!B.componentLayout.lastComponentSize&&(D.calculated||C.calculated)){return false}return !D.shrinkWrap&&!C.shrinkWrap},isItemShrinkWrap:function(A){return A.shrinkWrap},isRunning:function(){return !!this.ownerContext},getItemsRenderTree:function(G,D){var B=G.length,C,F,A,E;if(B){E=[];for(C=0;C<B;++C){F=G[C];if(!F.rendered){if(D&&(D[F.id]!==undefined)){A=D[F.id]}else{this.configureItem(F);A=F.getRenderTree();if(D){D[F.id]=A}}if(A){E.push(A)}}}}return E},finishRender:Ext.emptyFn,finishRenderItems:function(E,D){var A=D.length,B,C;for(B=0;B<A;B++){C=D[B];if(C.rendering){C.finishRender(B)}}},renderChildren:function(){var A=this,B=A.getLayoutItems(),C=A.getRenderTarget();A.renderItems(B,C)},renderItems:function(D,E){var C=this,F=D.length,A=0,B;if(F){Ext.suspendLayouts();for(;A<F;A++){B=D[A];if(B&&!B.rendered){C.renderItem(B,E,A)}else{if(!C.isValidParent(B,E,A)){C.moveItem(B,E,A)}else{C.configureItem(B)}}}Ext.resumeLayouts(true)}},isValidParent:function(D,E,A){var B=(E&&E.dom)||E,C=this.getItemLayoutEl(D);if(C&&B){if(typeof A=="number"){A=this.getPositionOffset(A);return C===B.childNodes[A]}return C.parentNode===B}return false},getItemLayoutEl:function(D){var A=D.el?D.el.dom:Ext.getDom(D),C=A.parentNode,B;if(C){B=C.className;if(B&&B.indexOf(Ext.baseCSSPrefix+"resizable-wrap")!==-1){A=A.parentNode}}return A},getPositionOffset:function(A){return A},configureItem:function(A){A.ownerLayout=this},renderItem:function(C,D,A){var B=this;if(!C.rendered){B.configureItem(C);C.render(D,A)}},moveItem:function(B,C,A){C=C.dom||C;if(typeof A=="number"){A=C.childNodes[A]}C.insertBefore(B.el.dom,A||null);B.container=Ext.get(C);this.configureItem(B)},onContentChange:function(){this.owner.updateLayout();return true},initLayout:function(){this.initialized=true},setOwner:function(A){this.owner=A},getLayoutItems:function(){return[]},onAdd:function(A){A.ownerLayout=this},onRemove:Ext.emptyFn,onDestroy:Ext.emptyFn,afterRemove:function(C){var B=this,A=C.el,D=B.owner,E;if(C.rendered){E=[].concat(B.itemCls||[]);if(D.itemCls){E=Ext.Array.push(E,D.itemCls)}if(E.length){A.removeCls(E)}}delete C.ownerLayout},destroy:function(){var A=this,B;if(A.targetCls){B=A.getTarget();if(B){B.removeCls(A.targetCls)}}A.onDestroy()},sortWeightedItems:function(C,D){for(var A=0,B=C.length;A<B;++A){C[A].$i=A}Ext.Array.sort(C,function(E,G){var F=G.weight-E.weight;if(!F){F=E.$i-G.$i;if(E[D]){F=-F}}return F});for(A=0;A<B;++A){delete C[A].$i}}},function(){var A=this;A.prototype.sizeModels=A.sizeModels=Ext.layout.SizeModel.sizeModels});
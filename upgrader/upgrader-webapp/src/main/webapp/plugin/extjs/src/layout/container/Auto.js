Ext.define("Ext.layout.container.Auto",{alias:["layout.auto","layout.autocontainer"],extend:"Ext.layout.container.Container",type:"autocontainer",childEls:["outerCt","innerCt"],reserveScrollbar:false,managePadding:true,manageOverflow:false,needsItemSize:false,setsItemSize:false,lastOverflowAdjust:{width:0,height:0},outerCtCls:Ext.baseCSSPrefix+"autocontainer-outerCt",innerCtCls:Ext.baseCSSPrefix+"autocontainer-innerCt",renderTpl:['<div id="{ownerId}-outerCt" data-ref="outerCt" class="{outerCtCls}" role="presentation">','<div id="{ownerId}-innerCt" data-ref="innerCt" style="{%this.renderPadding(out, values)%}" ','class="{innerCtCls}" role="presentation">',"{%this.renderBody(out,values)%}","</div>","</div>"],beginLayout:function(A){this.callParent(arguments);this.initContextItems(A)},beforeLayoutCycle:function(C){var D=this.owner,B=D.inheritedState,A=D.inheritedStateInner;if(!B||B.invalid){B=D.getInherited();A=D.inheritedStateInner}if(C.widthModel.shrinkWrap){A.inShrinkWrapTable=true}else{delete A.inShrinkWrapTable}},beginLayoutCycle:function(A){var I=this,D=I.outerCt,K=I.lastOuterCtWidth||"",H=I.lastOuterCtHeight||"",G=I.lastOuterCtTableLayout||"",E=A.state,L,J,C,F,B;I.callParent(arguments);J=C=F="";if(!A.widthModel.shrinkWrap){J="100%";B=I.owner.inheritedStateInner;L=I.getOverflowXStyle(A);F=(B.inShrinkWrapTable||L==="auto"||L==="scroll")?"":"fixed"}if(!A.heightModel.shrinkWrap&&!Ext.supports.PercentageHeightOverflowBug){C="100%"}if((J!==K)||I.hasOuterCtPxWidth){D.setStyle("width",J);I.lastOuterCtWidth=J;I.hasOuterCtPxWidth=false}if(F!==G){D.setStyle("table-layout",F);I.lastOuterCtTableLayout=F}if((C!==H)||I.hasOuterCtPxHeight){D.setStyle("height",C);I.lastOuterCtHeight=C;I.hasOuterCtPxHeight=false}if(I.hasInnerCtPxHeight){I.innerCt.setStyle("height","");I.hasInnerCtPxHeight=false}E.overflowAdjust=E.overflowAdjust||I.lastOverflowAdjust},calculate:function(C){var A=this,E=C.state,D=A.getContainerSize(C,true),B=E.calculatedItems||(E.calculatedItems=A.calculateItems?A.calculateItems(C,D):true);A.setCtSizeIfNeeded(C,D);if(B&&C.hasDomProp("containerChildrenSizeDone")){A.calculateContentSize(C);if(D.gotAll){if(A.manageOverflow&&!C.state.secondPass&&!A.reserveScrollbar){A.calculateOverflow(C,D)}return}}A.done=false},calculateContentSize:function(F){var D=this,G=((F.widthModel.shrinkWrap?1:0)|(F.heightModel.shrinkWrap?2:0)),C=(G&1)||undefined,A=(G&2)||undefined,B=0,E=F.props;if(C){if(isNaN(E.contentWidth)){++B}else{C=undefined}}if(A){if(isNaN(E.contentHeight)){++B}else{A=undefined}}if(B){if(C&&!F.setContentWidth(D.measureContentWidth(F))){D.done=false}if(A&&!F.setContentHeight(D.measureContentHeight(F))){D.done=false}}},calculateOverflow:function(A){var G=this,F,I,E,D,B,C,H;B=(G.getOverflowXStyle(A)==="auto");C=(G.getOverflowYStyle(A)==="auto");if(B||C){E=Ext.getScrollbarSize();H=A.overflowContext.el.dom;D=0;if(H.scrollWidth>H.clientWidth){D|=1}if(H.scrollHeight>H.clientHeight){D|=2}F=(C&&(D&2))?E.width:0;I=(B&&(D&1))?E.height:0;if(F!==G.lastOverflowAdjust.width||I!==G.lastOverflowAdjust.height){G.done=false;A.invalidate({state:{overflowAdjust:{width:F,height:I},overflowState:D,secondPass:true}})}}},completeLayout:function(A){this.lastOverflowAdjust=A.state.overflowAdjust},doRenderBody:function(D,F){var A=F.$layout,E=Ext.XTemplate,B=A.beforeBodyTpl,C=A.afterBodyTpl;if(B){E.getTpl(A,"beforeBodyTpl").applyOut(F,D)}this.renderItems(D,F);this.renderContent(D,F);if(C){E.getTpl(A,"afterBodyTpl").applyOut(F,D)}},doRenderPadding:function(C,D){var A=D.$layout,E=D.$layout.owner,B=E[E.contentPaddingProperty];if(A.managePadding&&B){C.push("padding:",E.unitizeBox(B))}},finishedLayout:function(A){var B=this.innerCt;this.callParent(arguments);if(Ext.isIE8){B.repaint()}if(Ext.isOpera){B.setStyle("position","relative");B.dom.scrollWidth;B.setStyle("position","")}},getContainerSize:function(C,B){var A=this.callParent(arguments),D=C.state.overflowAdjust;if(D){A.width-=D.width;A.height-=D.height}return A},getRenderData:function(){var A=this,B=A.callParent();B.innerCtCls=A.innerCtCls;B.outerCtCls=A.outerCtCls;return B},getRenderTarget:function(){return this.innerCt},getElementTarget:function(){return this.innerCt},getOverflowXStyle:function(A){return A.overflowXStyle||(A.overflowXStyle=this.owner.scrollFlags.overflowX||A.overflowContext.getStyle("overflow-x"))},getOverflowYStyle:function(A){return A.overflowYStyle||(A.overflowYStyle=this.owner.scrollFlags.overflowY||A.overflowContext.getStyle("overflow-y"))},initContextItems:function(C){var B=this,D=C.target,A=B.owner.customOverflowEl;C.outerCtContext=C.getEl("outerCt",B);C.innerCtContext=C.getEl("innerCt",B);if(A){C.overflowContext=C.getEl(A)}else{C.overflowContext=C.targetContext}if(D[D.contentPaddingProperty]!==undefined){C.paddingContext=C.innerCtContext}},initLayout:function(){var B=this,A=Ext.getScrollbarSize().width,C=B.owner;B.callParent();if(A&&B.manageOverflow&&!B.hasOwnProperty("lastOverflowAdjust")){if(C.autoScroll||B.reserveScrollbar){B.lastOverflowAdjust={width:A,height:0}}}},measureContentHeight:function(B){var A=this.outerCt.getHeight(),C=B.target;if(this.managePadding&&(C[C.contentPaddingProperty]===undefined)){A+=B.targetContext.getPaddingInfo().height}return A},measureContentWidth:function(D){var A,C,B,F,E;if(this.chromeCellMeasureBug){A=this.innerCt.dom;C=A.style;B=C.display;if(B=="table-cell"){C.display="";A.offsetWidth;C.display=B}}F=this.outerCt.getWidth();E=D.target;if(this.managePadding&&(E[E.contentPaddingProperty]===undefined)){F+=D.targetContext.getPaddingInfo().width}return F},setCtSizeIfNeeded:function(B,D){var A=this,C=D.height,H=B.paddingContext.getPaddingInfo(),J=A.getTarget(),K=A.getOverflowXStyle(B),F=(K==="auto"||K==="scroll"),G=Ext.getScrollbarSize(),E,I;if(C&&!B.heightModel.shrinkWrap){if(Ext.supports.PercentageHeightOverflowBug){E=true}if(Ext.isIE8){I=true}if((E||I)&&F&&(J.dom.scrollWidth>J.dom.clientWidth)){C=Math.max(C-G.height,0)}if(E){B.outerCtContext.setProp("height",C+H.height);A.hasOuterCtPxHeight=true}if(I){B.innerCtContext.setProp("height",C);A.hasInnerCtPxHeight=true}}},setupRenderTpl:function(A){this.callParent(arguments);A.renderPadding=this.doRenderPadding},getContentTarget:function(){return this.innerCt},getScrollerEl:function(){return this.outerCt}},function(){this.prototype.chromeCellMeasureBug=Ext.isChrome&&Ext.chromeVersion>=26});
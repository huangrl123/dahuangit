Ext.define("Ext.tab.Panel",{extend:"Ext.panel.Panel",alias:"widget.tabpanel",alternateClassName:["Ext.TabPanel"],requires:["Ext.layout.container.Card","Ext.tab.Bar"],config:{tabBar:undefined,tabPosition:"top",tabRotation:"default",tabStretchMax:true},removePanelHeader:true,plain:false,itemCls:Ext.baseCSSPrefix+"tabpanel-child",minTabWidth:undefined,maxTabWidth:undefined,deferredRender:true,_defaultTabRotation:{top:0,right:1,bottom:0,left:2},initComponent:function(){var F=this,A=F.activeTab||(F.activeTab=0),E=F.getTabPosition(),D=F.getTabRotation(),B=F.dockedItems,H=F.header,I=F.tabBarHeaderPosition,C=F.getTabBar(),G;F.layout=new Ext.layout.container.Card(Ext.apply({owner:F,deferredRender:F.deferredRender,itemCls:F.itemCls,activeItem:A},F.layout));if(I!=null){if(!H){H=F.header={}}G=H.items=(H.items?H.items.slice():[]);H.itemPosition=I;G.push(C);H.hasTabBar=true}else{B=[].concat(F.dockedItems||[]);B.push(C);F.dockedItems=B}F.callParent(arguments);A=F.activeTab=F.getComponent(A);if(A){C.setActiveTab(A.tab,true)}},onRender:function(){var C=this.items.items,B=C.length,A;this.callParent(arguments);for(A=0;A<B;++A){C[A].getBind()}},setActiveTab:function(A){var B=this,C;A=B.getComponent(A);if(A){C=B.getActiveTab();if(C===A||B.fireEvent("beforetabchange",B,A,C)===false){return false}if(!A.isComponent){Ext.suspendLayouts();A=B.add(A);Ext.resumeLayouts()}B.activeTab=A;Ext.suspendLayouts();B.layout.setActiveItem(A);A=B.activeTab=B.layout.getActiveItem();if(A&&A!==C){B.tabBar.setActiveTab(A.tab);Ext.resumeLayouts(true);if(C!==A){B.fireEvent("tabchange",B,A,C)}}else{Ext.resumeLayouts(true)}return A}},setActiveItem:function(A){return this.setActiveTab(A)},getActiveTab:function(){var B=this,A=B.getComponent(B.activeTab);if(A&&B.items.indexOf(A)!=-1){B.activeTab=A}else{B.activeTab=null}return B.activeTab},applyTabBar:function(A){var B=this,C=(B.tabBarHeaderPosition!=null)?B.getHeaderPosition():B.getTabPosition();return new Ext.tab.Bar(Ext.apply({ui:B.ui,dock:C,tabRotation:B.getTabRotation(),vertical:(C=="left"||C=="right"),plain:B.plain,tabStretchMax:B.getTabStretchMax(),tabPanel:B},A))},updateHeaderPosition:function(C,A){var B=this.getTabBar();if(B&&(this.tabBarHeaderPosition!=null)){B.setDock(C)}this.callParent([C,A])},updateTabPosition:function(B){var A=this.getTabBar();if(A&&(this.tabBarHeaderPosition==null)){A.setDock(B)}},updateTabRotation:function(A){var B=this.getTabBar();if(B){B.setTabRotation(A)}},onAdd:function(D,F){var A=this,B=Ext.apply({},D.tabConfig),C=A.getTabBar(),E={xtype:"tab",ui:C.ui,card:D,disabled:D.disabled,closable:D.closable,hidden:D.hidden&&!D.hiddenByLayout,tooltip:D.tooltip,tabBar:C,tabPosition:C.dock,rotation:C.getTabRotation()};if(D.closeText!==undefined){E.closeText=D.closeText}B=Ext.applyIf(B,E);D.tab=A.tabBar.insert(F,B);D.on({scope:A,enable:A.onItemEnable,disable:A.onItemDisable,beforeshow:A.onItemBeforeShow,iconchange:A.onItemIconChange,iconclschange:A.onItemIconClsChange,titlechange:A.onItemTitleChange});if(D.isPanel){if(A.removePanelHeader){if(D.rendered){if(D.header){D.header.hide()}}else{D.header=false}}if(D.isPanel&&A.border){D.setBorder(false)}}if(A.rendered){D.getBind()}},onItemEnable:function(A){A.tab.enable()},onItemDisable:function(A){A.tab.disable()},onItemBeforeShow:function(A){if(A!==this.activeTab){this.setActiveTab(A);return false}},onItemIconChange:function(A,B){A.tab.setIcon(B)},onItemIconClsChange:function(B,A){B.tab.setIconCls(A)},onItemTitleChange:function(B,A){B.tab.setText(A)},onRemove:function(C,B){var A=this;C.un({scope:A,enable:A.onItemEnable,disable:A.onItemDisable,beforeshow:A.onItemBeforeShow});if(!A.destroying&&C.tab.ownerCt===A.tabBar){A.tabBar.remove(C.tab)}},privates:{doRemove:function(C,D){var A=this,B;if(A.removingAll||A.destroying||A.items.getCount()==1){A.activeTab=null}else{if((B=A.tabBar.items.indexOf(A.tabBar.findNextActivatable(C.tab)))!==-1){A.setActiveTab(B)}}this.callParent(arguments);delete C.tab.card;delete C.tab}}});
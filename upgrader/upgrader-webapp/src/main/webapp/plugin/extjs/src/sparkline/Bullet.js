Ext.define("Ext.sparkline.Bullet",{extend:"Ext.sparkline.Base",alias:"widget.sparklinebullet",config:{targetColor:"#f33",targetWidth:3,performanceColor:"#33f",rangeColors:["#d3dafe","#a8b6ff","#7f94ff"],base:null,tipTpl:new Ext.XTemplate("{fieldkey:this.fields} - {value}",{fields:function(A){if(A==="r"){return"Range"}if(A==="p"){return"Performance"}if(A==="t"){return"Target"}}})},applyValues:function(A){A=Ext.Array.map(Ext.Array.from(A),this.normalizeValue);this.disabled=!(A&&A.length);return A},onUpdate:function(){var C=this,D=C.values,A,F,E,B=C.getBase();C.callParent(arguments);E=D.slice();E[0]=E[0]===null?E[2]:E[0];E[1]=D[1]===null?E[2]:E[1];A=Math.min.apply(Math,D);F=Math.max.apply(Math,D);if(B==null){A=A<0?A:0}else{A=B}C.min=A;C.max=F;C.range=F-A;C.shapes={};C.valueShapes={};C.regiondata={};if(!D.length){C.disabled=true}},getRegion:function(B,C){var A=this.canvas.getShapeAt(B,C);return(A!==undefined&&this.shapes[A]!==undefined)?this.shapes[A]:undefined},getRegionFields:function(A){return{fieldkey:A.substr(0,1),value:this.values[A.substr(1)],region:A}},renderHighlight:function(A){switch(A.substr(0,1)){case"r":this.renderRange(A.substr(1),true).append();break;case"p":this.renderPerformance(true).append();break;case"t":this.renderTarget(true).append();break}},renderRange:function(C,B){var A=this.values[C],E=Math.round(this.getWidth()*((A-this.min)/this.range)),D=this.getRangeColors()[C-2];if(B){D=this.calcHighlightColor(D)}return this.canvas.drawRect(0,0,E-1,this.getHeight()-1,D,D)},renderPerformance:function(B){var A=this.values[1],D=Math.round(this.getWidth()*((A-this.min)/this.range)),C=this.getPerformanceColor();if(B){C=this.calcHighlightColor(C)}return this.canvas.drawRect(0,Math.round(this.getHeight()*0.3),D-1,Math.round(this.getHeight()*0.4)-1,C,C)},renderTarget:function(D){var E=this.values[0],C=this.getTargetWidth(),F=Math.round(this.getWidth()*((E-this.min)/this.range)-(C/2)),A=Math.round(this.getHeight()*0.1),B=this.getHeight()-(A*2),G=this.getTargetColor();if(D){G=this.calcHighlightColor(G)}return this.canvas.drawRect(F,A,C-1,B-1,G,G)},renderGraph:function(){var F=this,B=F.values.length,A=F.canvas,C,G,E=F.shapes||(F.shapes={}),D=F.valueShapes||(F.valueShapes={});if(!F.callParent()){return}for(C=2;C<B;C++){G=F.renderRange(C).append();E[G.id]="r"+C;D["r"+C]=G.id}if(F.values[1]!==null){G=F.renderPerformance().append();E[G.id]="p1";D.p1=G.id}if(F.values[0]!==null){G=this.renderTarget().append();E[G.id]="t0";D.t0=G.id}if(F.currentPageXY&&F.el.getRegion().contains(F.currentPageXY)){F.updateDisplay()}A.render()}});
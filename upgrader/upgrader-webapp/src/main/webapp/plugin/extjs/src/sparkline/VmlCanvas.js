Ext.define("Ext.sparkline.VmlCanvas",{extend:"Ext.sparkline.CanvasBase",constructor:function(A){var B=this;B.owner=A;A.element={tag:"span",reference:"element",listeners:{mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",mousemove:"onMouseMove"},style:{display:"inline-block",position:"relative",overflow:"hidden",margin:"0px",padding:"0px",verticalAlign:"top",cursor:"default"},children:[{tag:"svml:group",reference:"groupEl",coordorigin:"0 0",coordsize:"0 0",style:"position:absolute;width:0;height:0;pointer-events:none"}]}},setWidth:function(B){var A=this;A.callParent(arguments);A.owner.groupEl.dom.coordsize=A.width+" "+(A.height||0);A.owner.groupEl.dom.style.width=B+"px"},setHeight:function(A){var B=this;B.callParent(arguments);B.owner.groupEl.dom.coordsize=(B.width||0)+" "+B.height;B.owner.groupEl.dom.style.height=A+"px"},onOwnerUpdate:function(){var A=this;A.group=A.owner.groupEl;A.el=A.owner.element;A.prerender=[]},_drawShape:function(I,H,J,B,F){var K=[],A,L,C,G,D,E;for(E=0,D=H.length;E<D;E++){K[E]=(H[E][0])+","+(H[E][1])}A=K.splice(0,1);F=F==null?1:F;L=J==null?' stroked="false" ':' strokeWeight="'+F+'px" strokeColor="'+J+'" ';C=B==null?' filled="false"':' fillColor="'+B+'" filled="true" ';G=K[0]===K[K.length-1]?"x ":"";return['<svml:shape coordorigin="0 0" coordsize="',this.pixelWidth," ",this.pixelHeight,'" id="jqsshape',I,'" ',L,C,' style="position:absolute;height:',this.pixelHeight,"px;width:",this.pixelWidth,'px" ',' path="m ',A," l ",K.join(", ")," ",G,'e"></svml:shape>'].join("")},_drawCircle:function(I,G,H,E,D,A,F){var C=E*2,J,B;G-=E;H-=E;J=D==null?' stroked="false" ':' strokeWeight="'+F+'px" strokeColor="'+D+'" ';B=A==null?' filled="false"':' fillColor="'+A+'" filled="true" ';return['<svml:oval id="jqsshape',I,'" ',J,B,' style="position:absolute;top:',H,"px; left:",G,"px;width:",C,"px;height:",C,'px"></svml:oval>'].join("")},_drawPieSlice:function(F,M,N,D,G,I,J,C){var E,L=this.pixelWidth,O=this.pixelHeight,B,A,H,P,K=J==null?' stroked="false" ':' strokeWeight="1px" strokeColor="'+J+'" ',Q=C==null?' filled="false"':' fillColor="'+C+'" filled="true" ';if(G===I){return""}if((I-G)===(2*Math.PI)){G=0;I=(2*Math.PI)}B=M+Math.round(Math.cos(G)*D);A=N+Math.round(Math.sin(G)*D);H=M+Math.round(Math.cos(I)*D);P=N+Math.round(Math.sin(I)*D);if(B===H&&A===P){if((I-G)<Math.PI){return""}B=H=M+D;A=P=N}if(B===H&&A===P&&(I-G)<Math.PI){return""}E=[M-D,N-D,M+D,N+D,B,A,H,P];return['<svml:shape coordorigin="0 0" coordsize="',L," ",O,'" id="jqsshape',F,'" ',K,Q,' style="position:absolute;height:',O,"px;width:",L,'px" path="m ',M,",",N," wa ",E.join(", "),' x e"></svml:shape>'].join("")},_drawRect:function(B,C,D,E,A,F,G){return this._drawShape(B,[[C,D],[C,D+A],[C+E,D+A],[C+E,D],[C,D]],F,G)},reset:function(){Ext.fly(this.group).empty()},appendShape:function(A){this.prerender.push(this["_draw"+A.type].apply(this,A.args));this.lastShapeId=A.id;return A.id},replaceWithShape:function(A,D){var C=this.el.getById("jqsshape"+A,true),B=this["_draw"+D.type].apply(this,D.args);C.outerHTML=B},replaceWithShapes:function(B,C){var D=this.el.getById("jqsshape"+B[0],true),E="",F=C.length,A;for(A=0;A<F;A++){E+=this["_draw"+C[A].type].apply(this,C[A].args)}D.outerHTML=E;for(A=1;A<B.length;A++){this.el.getById("jqsshape"+B[A]).destroy()}},insertAfterShape:function(A,D){var C=this.el.getById("jqsshape"+A,true),B=this["_draw"+D.type].apply(this,D.args);C.insertAdjacentHTML("afterEnd",B)},removeShapeId:function(A){var B=this.el.getById("jqsshape"+A,true);this.group.removeChild(B)},getShapeAt:function(B,C){var A=this.el.id.substr(8);return A},render:function(){this.group.dom.innerHTML=this.prerender.join("")}},function(){Ext.onReady(function(){var A=document;if(A.namespaces&&!A.namespaces.svml){A.namespaces.add("svml","urn:schemas-microsoft-com:vml","#default#VML")}})});
Ext.define("Ext.grid.locking.HeaderContainer",{extend:"Ext.grid.header.Container",requires:["Ext.grid.ColumnManager"],headerCtRelayEvents:["blur","focus","move","resize","destroy","beforedestroy","boxready","afterrender","render","beforerender","removed","hide","beforehide","show","beforeshow","enable","disable","added","deactivate","beforedeactivate","activate","beforeactivate","remove","add","beforeremove","beforeadd","afterlayout","menucreate","sortchange","columnschanged","columnshow","columnhide","columnmove","headertriggerclick","headercontextmenu","headerclick","columnresize","statesave","beforestatesave","staterestore","beforestaterestore"],constructor:function(D){var A=this,B=D.lockedGrid,C=D.normalGrid;A.lockable=D;A.callParent();B.visibleColumnManager.rootColumns=C.visibleColumnManager.rootColumns=D.visibleColumnManager=A.visibleColumnManager=new Ext.grid.ColumnManager(true,B.headerCt,C.headerCt);B.columnManager.rootColumns=C.columnManager.rootColumns=D.columnManager=A.columnManager=new Ext.grid.ColumnManager(false,B.headerCt,C.headerCt);A.relayEvents(B.headerCt,A.headerCtRelayEvents);A.relayEvents(C.headerCt,A.headerCtRelayEvents)},getRefItems:function(){return this.lockable.lockedGrid.headerCt.getRefItems().concat(this.lockable.normalGrid.headerCt.getRefItems())},getGridColumns:function(){return this.lockable.lockedGrid.headerCt.getGridColumns().concat(this.lockable.normalGrid.headerCt.getGridColumns())},getColumnsState:function(){var B=this,C=B.lockable.lockedGrid.headerCt.getColumnsState(),A=B.lockable.normalGrid.headerCt.getColumnsState();return C.concat(A)},applyColumnsState:function(E){var K=this,F=K.lockable.lockedGrid,L=F.headerCt,H=K.lockable.normalGrid.headerCt,B=Ext.Array.toValueMap(L.items.items,"headerId"),D=Ext.Array.toValueMap(H.items.items,"headerId"),M=[],N=[],J=1,G=E.length,I,C,O,A;for(I=0;I<G;I++){A=E[I];O=B[A.id];C=O||D[A.id];if(C){if(C.applyColumnState){C.applyColumnState(A)}if(C.locked===undefined){C.locked=!!O}if(C.locked){M.push(C);if(!C.hidden&&typeof C.width=="number"){J+=C.width}}else{N.push(C)}}}if(M.length+N.length==L.items.getCount()+H.items.getCount()){L.removeAll(false);H.removeAll(false);L.add(M);H.add(N);F.setWidth(J)}}});
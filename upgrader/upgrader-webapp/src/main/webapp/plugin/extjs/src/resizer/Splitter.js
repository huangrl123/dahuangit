Ext.define("Ext.resizer.Splitter",{extend:"Ext.Component",requires:["Ext.XTemplate"],uses:["Ext.resizer.SplitterTracker"],xtype:"splitter",childEls:["collapseEl"],renderTpl:['<tpl if="collapsible===true">','<div id="{id}-collapseEl" data-ref="collapseEl" role="presentation" class="',Ext.baseCSSPrefix,"collapse-el ",Ext.baseCSSPrefix,'layout-split-{collapseDir}{childElCls}">&#160;',"</div>","</tpl>"],isSplitter:true,baseCls:Ext.baseCSSPrefix+"splitter",collapsedClsInternal:Ext.baseCSSPrefix+"splitter-collapsed",canResize:true,collapsible:null,collapseOnDblClick:true,defaultSplitMin:40,defaultSplitMax:1000,collapseTarget:"next",horizontal:false,vertical:false,size:5,tracker:null,ariaRole:"separator",getTrackerConfig:function(){return Ext.apply({xclass:"Ext.resizer.SplitterTracker",el:this.el,splitter:this},this.tracker)},beforeRender:function(){var B=this,C=B.getCollapseTarget(),A=B.collapsible;B.callParent();if(C.collapsed){B.addCls(B.collapsedClsInternal)}if(!B.canResize){B.addCls(B.baseCls+"-noresize")}Ext.applyIf(B.renderData,{collapseDir:B.getCollapseDirection(),collapsible:(A!==null)?A:C.collapsible});B.protoEl.unselectable()},onRender:function(){var B=this,C,A;B.callParent(arguments);if(B.performCollapse!==false){if(B.renderData.collapsible){B.mon(B.collapseEl,"click",B.toggleTargetCmp,B)}if(B.collapseOnDblClick){B.mon(B.el,"dblclick",B.toggleTargetCmp,B)}}B.mon(B.getCollapseTarget(),{collapse:B.onTargetCollapse,expand:B.onTargetExpand,beforeexpand:B.onBeforeTargetExpand,beforecollapse:B.onBeforeTargetCollapse,scope:B});if(B.canResize){B.tracker=Ext.create(B.getTrackerConfig());B.relayEvents(B.tracker,["beforedragstart","dragstart","dragend"])}C=B.collapseEl;if(C){C.lastCollapseDirCls=B.collapseDirProps[B.collapseDirection].cls}},getCollapseDirection:function(){var C=this,A=C.collapseDirection,F,D,B,E;if(!A){F=C.collapseTarget;if(F.isComponent){A=F.collapseDirection}if(!A){E=C.ownerCt.layout.type;if(F.isComponent){B=C.ownerCt.items;D=Number(B.indexOf(F)===B.indexOf(C)-1)<<1|Number(E==="hbox")}else{D=Number(C.collapseTarget==="prev")<<1|Number(E==="hbox")}A=["bottom","right","top","left"][D]}C.collapseDirection=A}C.setOrientation((A==="top"||A==="bottom")?"horizontal":"vertical");return A},getCollapseTarget:function(){var A=this;return A.collapseTarget.isComponent?A.collapseTarget:A.collapseTarget==="prev"?A.previousSibling():A.nextSibling()},setCollapseEl:function(B){var A=this.collapseEl;if(A){A.setDisplayed(B)}},onBeforeTargetExpand:function(A){this.setCollapseEl("none")},onBeforeTargetCollapse:function(){this.setCollapseEl("none")},onTargetCollapse:function(A){this.el.addCls([this.collapsedClsInternal,this.collapsedCls]);this.setCollapseEl("")},onTargetExpand:function(A){this.el.removeCls([this.collapsedClsInternal,this.collapsedCls]);this.setCollapseEl("")},collapseDirProps:{top:{cls:Ext.baseCSSPrefix+"layout-split-top"},right:{cls:Ext.baseCSSPrefix+"layout-split-right"},bottom:{cls:Ext.baseCSSPrefix+"layout-split-bottom"},left:{cls:Ext.baseCSSPrefix+"layout-split-left"}},orientationProps:{horizontal:{opposite:"vertical",fixedAxis:"height",stretchedAxis:"width"},vertical:{opposite:"horizontal",fixedAxis:"width",stretchedAxis:"height"}},applyCollapseDirection:function(){var B=this,D=B.collapseEl,C=B.collapseDirProps[B.collapseDirection],A;if(D){A=D.lastCollapseDirCls;if(A){D.removeCls(A)}D.addCls(D.lastCollapseDirCls=C.cls)}},applyOrientation:function(){var D=this,A=D.orientation,G=D.orientationProps[A],F=D.size,B=G.fixedAxis,E=G.stretchedAxis,C=D.baseCls+"-";D[A]=true;D[G.opposite]=false;if(!D.hasOwnProperty(B)||D[B]==="100%"){D[B]=F}if(!D.hasOwnProperty(E)||D[E]===F){D[E]="100%"}D.removeCls(C+G.opposite);D.addCls(C+A)},setOrientation:function(A){var B=this;if(B.orientation!==A){B.orientation=A;B.applyOrientation()}},updateOrientation:function(){delete this.collapseDirection;this.getCollapseDirection();this.applyCollapseDirection()},toggleTargetCmp:function(A,D){var B=this.getCollapseTarget(),E=B.placeholder,C;if(Ext.isFunction(B.expand)&&Ext.isFunction(B.collapse)){if(E&&!E.hidden){C=true}else{C=!B.hidden}if(C){if(B.collapsed){B.expand()}else{if(B.collapseDirection){B.collapse()}else{B.collapse(this.renderData.collapseDir)}}}}},setSize:function(){var A=this;A.callParent(arguments);if(Ext.isIE&&A.el){A.el.repaint()}},beforeDestroy:function(){Ext.destroy(this.tracker);this.callParent()}});
Ext.define("Ext.fx.DrawPath",{singleton:true,pathToStringRE:/,?([achlmqrstvxz]),?/gi,pathCommandRE:/([achlmqstvz])[\s,]*((-?\d*\.?\d*(?:e[-+]?\d+)?\s*,?\s*)+)/ig,pathValuesRE:/(-?\d*\.?\d*(?:e[-+]?\d+)?)\s*,?\s*/ig,stopsRE:/^(\d+%?)$/,radian:Math.PI/180,is:function(B,A){A=String(A).toLowerCase();return(A=="object"&&B===Object(B))||(A=="undefined"&&typeof B==A)||(A=="null"&&B===null)||(A=="array"&&Array.isArray&&Array.isArray(B))||(Object.prototype.toString.call(B).toLowerCase().slice(8,-1))==A},path2string:function(){return this.join(",").replace(Ext.fx.DrawPath.pathToStringRE,"$1")},pathToString:function(A){return A.join(",").replace(Ext.fx.DrawPath.pathToStringRE,"$1")},parsePathString:function(C){if(!C){return null}var A={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0},D=[],B=this;if(B.is(C,"array")&&B.is(C[0],"array")){D=B.pathClone(C)}if(!D.length){String(C).replace(B.pathCommandRE,function(H,F,G){var I=[],E=F.toLowerCase();G.replace(B.pathValuesRE,function(K,J){J&&I.push(+J)});if(E=="m"&&I.length>2){D.push([F].concat(Ext.Array.splice(I,0,2)));E="l";F=(F=="m")?"l":"L"}while(I.length>=A[E]){D.push([F].concat(Ext.Array.splice(I,0,A[E])));if(!A[E]){break}}})}D.toString=B.path2string;return D},pathClone:function(A){var E=[],F,D,B,C;if(!this.is(A,"array")||!this.is(A&&A[0],"array")){A=this.parsePathString(A)}for(B=0,C=A.length;B<C;B++){E[B]=[];for(F=0,D=A[B].length;F<D;F++){E[B][F]=A[B][F]}}E.toString=this.path2string;return E},pathToAbsolute:function(B){if(!this.is(B,"array")||!this.is(B&&B[0],"array")){B=this.parsePathString(B)}var L=[],J=0,K=0,G=0,D=0,H=0,E=B.length,A,C,F,I;if(E&&B[0][0]=="M"){J=+B[0][1];K=+B[0][2];G=J;D=K;H++;L[0]=["M",J,K]}for(;H<E;H++){A=L[H]=[];C=B[H];if(C[0]!=C[0].toUpperCase()){A[0]=C[0].toUpperCase();switch(A[0]){case"A":A[1]=C[1];A[2]=C[2];A[3]=C[3];A[4]=C[4];A[5]=C[5];A[6]=+(C[6]+J);A[7]=+(C[7]+K);break;case"V":A[1]=+C[1]+K;break;case"H":A[1]=+C[1]+J;break;case"M":G=+C[1]+J;D=+C[2]+K;default:F=1;I=C.length;for(;F<I;F++){A[F]=+C[F]+((F%2)?J:K)}}}else{F=0;I=C.length;for(;F<I;F++){L[H][F]=C[F]}}switch(A[0]){case"Z":J=G;K=D;break;case"H":J=A[1];break;case"V":K=A[1];break;case"M":C=L[H];I=C.length;G=C[I-2];D=C[I-1];default:C=L[H];I=C.length;J=C[I-2];K=C[I-1]}}L.toString=this.path2string;return L},interpolatePaths:function(J,O){var K=this,B=K.pathToAbsolute(J),M=K.pathToAbsolute(O),D={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},L={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},E=function(Q,P){if(Q[P].length>7){Q[P].shift();var R=Q[P];while(R.length){Ext.Array.splice(Q,P++,0,["C"].concat(Ext.Array.splice(R,0,6)))}Ext.Array.erase(Q,P,1);C=Math.max(B.length,M.length||0)}},A=function(T,S,P,R,Q){if(T&&S&&T[Q][0]=="M"&&S[Q][0]!="M"){Ext.Array.splice(S,Q,0,["M",R.x,R.y]);P.bx=0;P.by=0;P.x=T[Q][1];P.y=T[Q][2];C=Math.max(B.length,M.length||0)}},G,C,N,I,H,F;for(G=0,C=Math.max(B.length,M.length||0);G<C;G++){B[G]=K.command2curve(B[G],D);E(B,G);(M[G]=K.command2curve(M[G],L));E(M,G);A(B,M,D,L,G);A(M,B,L,D,G);N=B[G];I=M[G];H=N.length;F=I.length;D.x=N[H-2];D.y=N[H-1];D.bx=parseFloat(N[H-4])||D.x;D.by=parseFloat(N[H-3])||D.y;L.bx=(parseFloat(I[F-4])||L.x);L.by=(parseFloat(I[F-3])||L.y);L.x=I[F-2];L.y=I[F-1]}return[B,M]},command2curve:function(C,A){var B=this;if(!C){return["C",A.x,A.y,A.x,A.y,A.x,A.y]}if(C[0]!="T"&&C[0]!="Q"){A.qx=A.qy=null}switch(C[0]){case"M":A.X=C[1];A.Y=C[2];break;case"A":C=["C"].concat(B.arc2curve.apply(B,[A.x,A.y].concat(C.slice(1))));break;case"S":C=["C",A.x+(A.x-(A.bx||A.x)),A.y+(A.y-(A.by||A.y))].concat(C.slice(1));break;case"T":A.qx=A.x+(A.x-(A.qx||A.x));A.qy=A.y+(A.y-(A.qy||A.y));C=["C"].concat(B.quadratic2curve(A.x,A.y,A.qx,A.qy,C[1],C[2]));break;case"Q":A.qx=C[1];A.qy=C[2];C=["C"].concat(B.quadratic2curve(A.x,A.y,C[1],C[2],C[3],C[4]));break;case"L":C=["C"].concat(A.x,A.y,C[1],C[2],C[1],C[2]);break;case"H":C=["C"].concat(A.x,A.y,C[1],A.y,C[1],A.y);break;case"V":C=["C"].concat(A.x,A.y,A.x,C[1],A.x,C[1]);break;case"Z":C=["C"].concat(A.x,A.y,A.X,A.Y,A.X,A.Y);break}return C},quadratic2curve:function(A,B,F,E,C,D){var G=1/3,H=2/3;return[G*A+H*F,G*B+H*E,G*C+H*F,G*D+H*E,C,D]},rotate:function(D,E,B){var G=Math.cos(B),A=Math.sin(B),C=D*G-E*A,F=D*A+E*G;return{x:C,y:F}},arc2curve:function(R,S,c,X,W,O,K,D,E,J){var M=this,Ae=Math.PI,Ad=M.radian,l=Ae*120/180,u=Ad*(+W||0),F=[],m=Math,T=m.cos,f=m.sin,Y=m.sqrt,P=m.abs,g=m.asin,U,o,p,Ab,G,A,Aa,n,e,d,Q,C,q,V,B,H,w,s,a,b,N,I,z,Z,Ac,j,v,L,r;if(!J){U=M.rotate(R,S,-u);R=U.x;S=U.y;U=M.rotate(D,E,-u);D=U.x;E=U.y;o=(R-D)/2;p=(S-E)/2;Ab=(o*o)/(c*c)+(p*p)/(X*X);if(Ab>1){Ab=Y(Ab);c=Ab*c;X=Ab*X}G=c*c;A=X*X;Aa=(O==K?-1:1)*Y(P((G*A-G*p*p-A*o*o)/(G*p*p+A*o*o)));n=Aa*c*p/X+(R+D)/2;e=Aa*-X*o/c+(S+E)/2;d=g(((S-e)/X).toFixed(7));Q=g(((E-e)/X).toFixed(7));d=R<n?Ae-d:d;Q=D<n?Ae-Q:Q;if(d<0){d=Ae*2+d}if(Q<0){Q=Ae*2+Q}if(K&&d>Q){d=d-Ae*2}if(!K&&Q>d){Q=Q-Ae*2}}else{d=J[0];Q=J[1];n=J[2];e=J[3]}C=Q-d;if(P(C)>l){v=Q;L=D;r=E;Q=d+l*(K&&Q>d?1:-1);D=n+c*T(Q);E=e+X*f(Q);F=M.arc2curve(D,E,c,X,W,0,K,L,r,[Q,v,n,e])}C=Q-d;q=T(d);V=f(d);B=T(Q);H=f(Q);w=m.tan(C/4);s=4/3*c*w;a=4/3*X*w;b=[R,S];N=[R+s*V,S-a*q];I=[D+s*H,E-a*B];z=[D,E];N[0]=2*b[0]-N[0];N[1]=2*b[1]-N[1];if(J){return[N,I,z].concat(F)}else{F=[N,I,z].concat(F).join().split(",");Z=[];j=F.length;for(Ac=0;Ac<j;Ac++){Z[Ac]=Ac%2?M.rotate(F[Ac-1],F[Ac],u).y:M.rotate(F[Ac],F[Ac+1],u).x}return Z}}});
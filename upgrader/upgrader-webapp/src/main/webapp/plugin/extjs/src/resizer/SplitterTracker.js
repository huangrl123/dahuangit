Ext.define("Ext.resizer.SplitterTracker",{extend:"Ext.dd.DragTracker",requires:["Ext.util.Region"],enabled:true,overlayCls:Ext.baseCSSPrefix+"resizable-overlay",createDragOverlay:function(){var A;A=this.overlay=Ext.getBody().createChild({role:"presentation",cls:this.overlayCls,html:"&#160;"});A.unselectable();A.setSize(Ext.dom.Element.getDocumentWidth(),Ext.dom.Element.getDocumentHeight());A.show()},getPrevCmp:function(){var A=this.getSplitter();return A.previousSibling(":not([hidden])")},getNextCmp:function(){var A=this.getSplitter();return A.nextSibling(":not([hidden])")},onBeforeStart:function(B){var D=this,C=D.getPrevCmp(),E=D.getNextCmp(),F=D.getSplitter().collapseEl,G=B.getTarget(),A;if(!C||!E){return false}if(F&&G===D.getSplitter().collapseEl.dom){return false}if(E.collapsed||C.collapsed){return false}D.prevBox=C.getEl().getBox();D.nextBox=E.getEl().getBox();D.constrainTo=A=D.calculateConstrainRegion();if(!A){return false}return A},onStart:function(A){var B=this.getSplitter();this.createDragOverlay();B.addCls(B.baseCls+"-active")},calculateConstrainRegion:function(){var K=this,A=K.getSplitter(),H=A.getWidth(),C=A.defaultSplitMin,I=A.orientation,F=K.prevBox,L=K.getPrevCmp(),D=K.nextBox,J=K.getNextCmp(),B,E,G;if(I==="vertical"){G={prevCmp:L,nextCmp:J,prevBox:F,nextBox:D,defaultMin:C,splitWidth:H};B=new Ext.util.Region(F.y,K.getVertPrevConstrainRight(G),F.bottom,K.getVertPrevConstrainLeft(G));E=new Ext.util.Region(D.y,K.getVertNextConstrainRight(G),D.bottom,K.getVertNextConstrainLeft(G))}else{B=new Ext.util.Region(F.y+(L.minHeight||C),F.right,(L.maxHeight?F.y+L.maxHeight:D.bottom-(J.minHeight||C))+H,F.x);E=new Ext.util.Region((J.maxHeight?D.bottom-J.maxHeight:F.y+(L.minHeight||C))-H,D.right,D.bottom-(J.minHeight||C),D.x)}return B.intersect(E)},performResize:function(A,C){var L=this,I=L.getSplitter(),J=I.orientation,N=L.getPrevCmp(),K=L.getNextCmp(),B=I.ownerCt,O=B.query(">[flex]"),M=O.length,D=J==="vertical",H=0,E=D?"width":"height",F=0,P,G;for(;H<M;H++){P=O[H];G=D?P.getWidth():P.getHeight();F+=G;P.flex=G}C=D?C[0]:C[1];if(N){G=L.prevBox[E]+C;if(N.flex){N.flex=G}else{N[E]=G}}if(K){G=L.nextBox[E]-C;if(K.flex){K.flex=G}else{K[E]=G}}B.updateLayout()},endDrag:function(){var A=this;if(A.overlay){A.overlay.destroy();delete A.overlay}A.callParent(arguments)},onEnd:function(A){var B=this,C=B.getSplitter();C.removeCls(C.baseCls+"-active");B.performResize(A,B.getResizeOffset())},onDrag:function(B){var D=this,A=D.getOffset("dragTarget"),E=D.getSplitter(),C=E.getEl(),F=E.orientation;if(F==="vertical"){C.setX(D.startRegion.left+A[0])}else{C.setY(D.startRegion.top+A[1])}},getSplitter:function(){return this.splitter},getVertPrevConstrainRight:function(A){return(A.prevCmp.maxWidth?A.prevBox.x+A.prevCmp.maxWidth:A.nextBox.right-(A.nextCmp.minWidth||A.defaultMin))+A.splitWidth},getVertPrevConstrainLeft:function(A){return A.prevBox.x+(A.prevCmp.minWidth||A.defaultMin)},getVertNextConstrainRight:function(A){return A.nextBox.right-(A.nextCmp.minWidth||A.defaultMin)},getVertNextConstrainLeft:function(A){return(A.nextCmp.maxWidth?A.nextBox.right-A.nextCmp.maxWidth:A.prevBox.x+(A.prevBox.minWidth||A.defaultMin))-A.splitWidth},getResizeOffset:function(){return this.getOffset("dragTarget")}});
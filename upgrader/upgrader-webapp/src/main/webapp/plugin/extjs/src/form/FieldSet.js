Ext.define("Ext.form.FieldSet",{extend:"Ext.container.Container",mixins:{fieldAncestor:"Ext.form.FieldAncestor"},alias:"widget.fieldset",uses:["Ext.form.field.Checkbox","Ext.panel.Tool","Ext.layout.container.Anchor","Ext.layout.component.FieldSet"],checkboxUI:"default",collapsed:false,toggleOnTitleClick:true,baseCls:Ext.baseCSSPrefix+"fieldset",layout:"anchor",componentLayout:"fieldset",ariaRole:null,autoEl:"fieldset",childEls:["body"],renderTpl:["{%this.renderLegend(out,values);%}",'<div id="{id}-body" data-ref="body" class="{baseCls}-body {baseCls}-body-{ui} {bodyTargetCls}" ','role="presentation"<tpl if="bodyStyle"> style="{bodyStyle}"</tpl>>',"{%this.renderContainer(out,values);%}","</div>"],stateEvents:["collapse","expand"],maskOnDisable:false,beforeDestroy:function(){var B=this,A=B.legend;if(A){delete A.ownerCt;A.destroy();B.legend=null}B.callParent()},initComponent:function(){var B=this,A=B.baseCls;B.initFieldAncestor();B.callParent();B.layout.managePadding=B.layout.manageOverflow=false;if(B.collapsed){B.addCls(A+"-collapsed");B.collapse()}if(B.title||B.checkboxToggle||B.collapsible){B.addTitleClasses();B.legend=Ext.widget(B.createLegendCt())}B.initMonitor()},initRenderData:function(){var A=this,B=A.callParent();B.bodyTargetCls=A.bodyTargetCls;A.protoBody.writeTo(B);delete A.protoBody;return B},getState:function(){var A=this.callParent();A=this.addPropertyToState(A,"collapsed");return A},afterCollapse:Ext.emptyFn,afterExpand:Ext.emptyFn,collapsedHorizontal:function(){return true},collapsedVertical:function(){return true},createLegendCt:function(){var B=this,C=[],A={xtype:"container",baseCls:B.baseCls+"-header",layout:"container",ui:B.ui,id:B.id+"-legend",autoEl:"legend",ariaRole:null,ariaLabelledBy:"."+B.baseCls+"-header-text",items:C,ownerCt:B,shrinkWrap:true,ownerLayout:B.componentLayout};if(B.checkboxToggle){C.push(B.createCheckboxCmp())}else{if(B.collapsible){C.push(B.createToggleCmp())}}C.push(B.createTitleCmp());return A},createTitleCmp:function(){var A=this,B={xtype:"component",html:A.title,ui:A.ui,cls:A.baseCls+"-header-text",id:A.id+"-legendTitle"};if(A.collapsible&&A.toggleOnTitleClick){B.listeners={click:{element:"el",scope:A,fn:A.toggle}};B.cls+=" "+A.baseCls+"-header-text-collapsible"}return(A.titleCmp=Ext.widget(B))},createCheckboxCmp:function(){var B=this,A="-checkbox",C=B.baseCls+"-header"+A;C+=" "+C+"-"+B.ui;B.checkboxCmp=Ext.widget({xtype:"checkbox",hideEmptyLabel:true,name:B.checkboxName||B.id+A,cls:C,id:B.id+"-legendChk",ui:B.checkboxUI,checked:!B.collapsed,msgTarget:"none",listeners:{change:B.onCheckChange,scope:B}});return B.checkboxCmp},createToggleCmp:function(){var A=this;A.toggleCmp=Ext.widget({xtype:"tool",cacheHeight:false,cls:A.baseCls+"-header-tool-"+A.ui,type:"toggle",handler:A.toggle,id:A.id+"-legendToggle",scope:A});return A.toggleCmp},doRenderLegend:function(C,D){var A=D.$comp,B=A.legend,E;if(B){B.ownerLayout.configureItem(B);E=B.getRenderTree();Ext.DomHelper.generateMarkup(E,C)}},getCollapsed:function(){return this.collapsed?"top":false},getCollapsedDockedItems:function(){var A=this.legend;return A?[A]:[]},setTitle:function(C){var B=this,A=B.legend;B.title=C;if(B.rendered){if(!A){B.legend=A=Ext.widget(B.createLegendCt());B.addTitleClasses();A.ownerLayout.configureItem(A);A.render(B.el,0)}B.titleCmp.update(C)}else{if(A){B.titleCmp.update(C)}else{B.addTitleClasses();B.legend=Ext.widget(B.createLegendCt())}}return B},addTitleClasses:function(){var B=this,C=B.title,A=B.baseCls;if(C){B.addCls(A+"-with-title")}if(C||B.checkboxToggle||B.collapsible){B.addCls(A+"-with-legend")}},expand:function(){return this.setExpanded(true)},collapse:function(){return this.setExpanded(false)},setExpanded:function(D){var B=this,A=B.checkboxCmp,C=D?"expand":"collapse";if(!B.rendered||B.fireEvent("before"+C,B)!==false){D=!!D;if(A){A.setValue(D)}if(D){B.removeCls(B.baseCls+"-collapsed")}else{B.addCls(B.baseCls+"-collapsed")}B.collapsed=!D;if(D){delete B.getInherited().collapsed}else{B.getInherited().collapsed=true}if(B.rendered){B.updateLayout({isRoot:false});B.fireEvent(C,B)}}return B},getRefItems:function(B){var C=this.callParent(arguments),A=this.legend;if(A){C.unshift(A);if(B){C.unshift.apply(C,A.getRefItems(true))}}return C},toggle:function(){this.setExpanded(!!this.collapsed)},privates:{applyTargetCls:function(A){this.bodyTargetCls=A},finishRender:function(){var A=this.legend;this.callParent();if(A){A.finishRender()}},getProtoBody:function(){var B=this,A=B.protoBody;if(!A){B.protoBody=A=new Ext.util.ProtoElement({styleProp:"bodyStyle",styleIsText:true})}return A},getDefaultContentTarget:function(){return this.body},getTargetEl:function(){return this.body||this.frameBody||this.el},initPadding:function(C){var A=this,B=A.getProtoBody(),E=A.padding,D;if(E!==undefined){if(Ext.isIE8){E=A.parseBox(E);D=Ext.Element.parseBox(0);D.top=E.top;E.top=0;B.setStyle("padding",A.unitizeBox(D))}C.setStyle("padding",A.unitizeBox(E))}},onCheckChange:function(B,A){this.setExpanded(A)},setupRenderTpl:function(A){this.callParent(arguments);A.renderLegend=this.doRenderLegend}}});
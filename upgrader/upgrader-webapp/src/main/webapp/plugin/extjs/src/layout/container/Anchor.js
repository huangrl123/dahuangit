Ext.define("Ext.layout.container.Anchor",{alias:"layout.anchor",extend:"Ext.layout.container.Auto",alternateClassName:"Ext.layout.AnchorLayout",type:"anchor",defaultAnchor:"100%",parseAnchorRE:/^(r|right|b|bottom)$/i,manageOverflow:true,setsItemSize:true,beginLayoutCycle:function(B){var I=this,A=0,C,D,E,G,F,H;I.callParent(arguments);E=B.childItems;F=E.length;for(G=0;G<F;++G){D=E[G];C=D.target.anchorSpec;if(C){if(D.widthModel.calculated&&C.right){A|=1}if(D.heightModel.calculated&&C.bottom){A|=2}if(A==3){break}}}B.anchorDimensions=A;I.sanityCheck(B)},calculateItems:function(C,G){var E=this,K=C.childItems,A=K.length,Q=G.gotHeight,J=G.gotWidth,I=G.height,F=G.width,M=(J?1:0)|(Q?2:0),O=C.anchorDimensions,L,B,H,N,D,P;if(!O){return true}for(D=0;D<A;D++){B=K[D];H=B.getMarginInfo();L=B.target.anchorSpec;if(J&&B.widthModel.calculated){P=L.right(F)-H.width;P=E.adjustWidthAnchor(P,B);B.setWidth(P)}if(Q&&B.heightModel.calculated){N=L.bottom(I)-H.height;N=E.adjustHeightAnchor(N,B);B.setHeight(N)}}return(M&O)===O},sanityCheck:function(A){var B=A.widthModel.shrinkWrap,I=A.heightModel.shrinkWrap,D=A.childItems,E,H,C,G,F;for(G=0,F=D.length;G<F;++G){C=D[G];H=C.target;E=H.anchorSpec;if(E){if(C.widthModel.calculated&&E.right){if(B){Ext.log({level:"warn",msg:"Right anchor on "+H.id+" in shrinkWrap width container"})}}if(C.heightModel.calculated&&E.bottom){if(I){Ext.log({level:"warn",msg:"Bottom anchor on "+H.id+" in shrinkWrap height container"})}}}}},anchorFactory:{offset:function(A){return function(B){return B+A}},ratio:function(A){return function(B){return Math.floor(B*A)}},standard:function(A){return function(B){return B-A}}},parseAnchor:function(D,E,C){if(D&&D!="none"){var A=this.anchorFactory,B;if(this.parseAnchorRE.test(D)){return A.standard(C-E)}if(D.indexOf("%")!=-1){return A.ratio(parseFloat(D.replace("%",""))*0.01)}B=parseInt(D,10);if(!isNaN(B)){return A.offset(B)}}return null},adjustWidthAnchor:function(B,A){return B},adjustHeightAnchor:function(B,A){return B},configureItem:function(D){var A=this,G=A.owner,F=D.anchor,E,C,B;A.callParent(arguments);if(!D.anchor&&D.items&&!Ext.isNumber(D.width)){D.anchor=F=A.defaultAnchor}if(G.anchorSize){if(typeof G.anchorSize=="number"){C=G.anchorSize}else{C=G.anchorSize.width;B=G.anchorSize.height}}else{C=G.initialConfig.width;B=G.initialConfig.height}if(F){E=F.split(" ");D.anchorSpec={right:A.parseAnchor(E[0],D.initialConfig.width,C),bottom:A.parseAnchor(E[1],D.initialConfig.height,B)}}},sizePolicy:{$:{readsWidth:1,readsHeight:1,setsWidth:0,setsHeight:0},b:{readsWidth:1,readsHeight:0,setsWidth:0,setsHeight:1},r:{$:{readsWidth:0,readsHeight:1,setsWidth:1,setsHeight:0},b:{readsWidth:0,readsHeight:0,setsWidth:1,setsHeight:1}}},getItemSizePolicy:function(C){var D=C.anchorSpec,A="$",B=this.sizePolicy,E;if(D){E=this.owner.getSizeModel();if(D.right&&!E.width.shrinkWrap){B=B.r}if(D.bottom&&!E.height.shrinkWrap){A="b"}}return B[A]}});
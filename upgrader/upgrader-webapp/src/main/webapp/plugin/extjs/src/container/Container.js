Ext.define("Ext.container.Container",{extend:"Ext.Component",xtype:"container",alternateClassName:["Ext.Container","Ext.AbstractContainer"],requires:["Ext.util.MixedCollection","Ext.layout.container.Auto","Ext.ZIndexManager"],mixins:["Ext.mixin.Queryable"],renderTpl:"{%this.renderContainer(out,values)%}",isContainer:true,autoDestroy:true,defaultType:"panel",detachOnRemove:true,layout:"auto",suspendLayout:false,ariaRole:"presentation",baseCls:Ext.baseCSSPrefix+"container",layoutCounter:0,add:function(){var I=this,A=Ext.Array.slice(arguments),B=(typeof A[0]=="number")?A.shift():-1,G=I.getLayout(),F=false,J,K,H,E,M,C,L,D;if(A.length==1&&Ext.isArray(A[0])){K=A[0];J=true}else{K=A}if(I.rendered){Ext.suspendLayouts()}L=K=I.prepareItems(K,true);E=K.length;if(!J&&E==1){L=K[0]}for(H=0;H<E;H++){M=K[H];if(!M){Ext.Error.raise("Cannot add null item to Container with itemId/id: "+I.getItemId())}if(M.isDestroyed){Ext.Error.raise("Cannot add destroyed item '"+M.getId()+"' to Container '"+I.getId()+"'")}C=(B<0)?I.items.length:(B+H);D=!!M.instancedCmp;delete M.instancedCmp;if(M.floating){I.floatingItems.add(M);M.onAdded(I,C,D);delete M.initOwnerCt;if(I.hasListeners.add){I.fireEvent("add",I,M,C)}}else{if((!I.hasListeners.beforeadd||I.fireEvent("beforeadd",I,M,C)!==false)&&I.onBeforeAdd(M)!==false){I.items.insert(C,M);M.onAdded(I,C,D);delete M.initOwnerCt;I.onAdd(M,C);G.onAdd(M,C);F=true;if(I.hasListeners.add){I.fireEvent("add",I,M,C)}}}}if(F){I.updateLayout()}if(I.rendered){Ext.resumeLayouts(true)}return L},onAdded:function(B,A,C){this.callParent(arguments);if(C){Ext.ComponentManager.markReferencesDirty()}},onRemoved:function(A){var B;if(!A){B=this.lookupReferenceHolder();if(B){Ext.ComponentManager.markReferencesDirty();B.clearReferences()}}this.callParent(arguments)},afterComponentLayout:function(){var B=this.floatingItems.items,D=B.length,A,C;this.callParent(arguments);for(A=0;A<D;A++){C=B[A];if(!C.rendered&&C.autoShow){C.show()}}},afterLayout:function(C){var B=this,A=B.scrollManager;++B.layoutCounter;if(A&&B.layoutCounter>1){A.refresh()}if(B.hasListeners.afterlayout){B.fireEvent("afterlayout",B,C)}},onDestroy:function(){this.callParent();this.refs=null},beforeDestroy:function(){var B=this,C=B.items,A=B.floatingItems,D;if(C){while((D=C.first())){B.doRemove(D,true)}}if(A){while((D=A.first())){B.doRemove(D,true)}}Ext.destroy(B.layout);B.callParent()},beforeRender:function(){var B=this,C=B.getLayout(),A;B.callParent();if(!C.initialized){C.initLayout()}A=C.targetCls;if(A){B.applyTargetCls(A)}},cascade:function(F,B,I){var G=this,A=G.items?G.items.items:[],H=A.length,E=0,C,J=I?I.concat(G):[G],D=J.length-1;if(F.apply(B||G,J)!==false){for(;E<H;E++){C=A[E];if(C.cascade){C.cascade(F,B,I)}else{J[D]=C;F.apply(B||C,J)}}}return this},contains:function(C,B){var A=false;if(B){this.cascade(function(D){if(D.contains&&D.contains(C)){A=true;return false}});return A}else{return this.items.contains(C)||this.floatingItems.contains(C)}},disable:function(){this.callParent(arguments);var D=this.getChildItemsToDisable(),A=D.length,C,B;for(B=0;B<A;B++){C=D[B];if(C.resetDisable!==false&&!C.disabled){C.disable();C.resetDisable=true}}return this},doLayout:function(){this.updateLayout();return this},enable:function(){this.callParent(arguments);var D=this.getChildItemsToDisable(),A=D.length,C,B;for(B=0;B<A;B++){C=D[B];if(C.resetDisable){C.enable()}}return this},getChildByElement:function(A,D){var E,F,B=0,C=this.getRefItems(),G=C.length;A=Ext.getDom(A);for(;B<G;B++){E=C[B];F=E.getEl();if(F&&((F.dom===A)||F.contains(A))){return(D&&E.getChildByElement)?E.getChildByElement(A,D):E}}return null},getComponent:function(B){if(Ext.isObject(B)){B=B.getItemId()}var A=this.items.get(B);if(!A&&typeof B!="number"){A=this.floatingItems.get(B)}return A},getLayout:function(){var A=this,B=A.layout;if(!B||!B.isLayout){A.setLayout(B)}return A.layout},getRefItems:function(D){var E=this,G=E.items.items,F=G.length,B=0,C,A=[];for(;B<F;B++){C=G[B];A[A.length]=C;if(D&&C.getRefItems){A.push.apply(A,C.getRefItems(true))}}G=E.floatingItems.items;F=G.length;for(B=0;B<F;B++){C=G[B];A[A.length]=C;if(D&&C.getRefItems){A.push.apply(A,C.getRefItems(true))}}return A},initComponent:function(){var A=this;A.callParent();A.getLayout();A.constructing=true;A.initItems();delete A.constructing},getReferences:function(){var A=Ext.ComponentManager;if(A.referencesDirty){A.fixReferences()}return this.refs||null},lookupReference:function(A){var B=this.getReferences();return(B&&B[A])||null},initItems:function(){var A=this,B=A.items;if(!B||!B.isMixedCollection){A.items=new Ext.util.AbstractMixedCollection(false,A.getComponentId);A.floatingItems=new Ext.util.MixedCollection(false,A.getComponentId);if(B){if(!Ext.isArray(B)){B=[B]}A.add(B)}}},initInheritedState:function(C,I){var G=this,F=G.controller,E=G.layout,H=G.session,A=G.viewModel,B=G.reference,D=G.referenceHolder;G.callParent([C,I]);if(G.collapsed){C.collapsed=true}if(F){C.referenceHolder=F;D=true}else{if(D){C.referenceHolder=G}}if(D){C.referencePath=""}else{if(B&&G.isParentReference){C.referencePath=G.referenceKey+"."}}if(H){C.session=H}if(A){C.viewModelPath=""}else{if(B&&G.isParentReference){C.viewModelPath=G.viewModelKey+"."}}if(E&&E.initInheritedState){E.initInheritedState(C,I)}},insert:function(B,A){var C;if(A&&A.isComponent){C=this.items.indexOf(A);if(C!==-1){return this.move(C,B)}}return this.add(B,A)},isAncestor:function(A){while(A){if(A.ownerCt===this){return true}A=A.ownerCt}},lookupComponent:function(A){if(!A.isComponent){if(typeof A==="string"){A=Ext.ComponentManager.get(A)}else{A=Ext.ComponentManager.create(A,this.defaultType)}}return A},move:function(D,B){var A=this,E=A.items,C;if(D.isComponent){D=E.indexOf(D)}C=E.getAt(D);if(D!==B){C=E.removeAt(D);if(C===false){return false}E.insert(B,C);A.onMove(C,D,B);if(A.hasListeners.move){A.fireEvent("move",A,C,D,B)}A.updateLayout()}return C},moveBefore:function(A,B){this.layout.moveItemBefore(A,B)},moveAfter:function(C,F){var A=this,E=A.items,G=A.layout,B=F?G.getMoveAfterIndex(F):0,D=E.getAt(B);G.moveItemBefore(C,D)},nextChild:function(C,F){var E=this,G=E.items,H=G.indexOf(C),D=0,A=G.length,B;if(H!==-1){if(F){for(;D<A;D++){B=G.getAt(H+D);if(!B||Ext.ComponentQuery.is(B,F)){break}}}else{B=G.getAt(H+1)}if(!B&&E.ownerCt){B=E.ownerCt.nextChild(E,F)}}return B},onAdd:Ext.emptyFn,onBeforeAdd:function(A){var B=A.ownerCt;if(B&&B!==this){B.remove(A,false)}},onMove:Ext.emptyFn,onRemove:Ext.emptyFn,onPosition:function(){this.callParent(arguments);this.repositionFloatingItems()},onResize:function(){this.callParent(arguments);this.repositionFloatingItems()},prevChild:function(C,F){var E=this,G=E.items,H=G.indexOf(C),D=0,A=G.length,B;if(H!==-1){if(F){for(;D<A;D++){B=G.getAt(H-D);if(!B||Ext.ComponentQuery.is(B,F)){break}}}else{B=G.getAt(H-1)}if(!B&&E.ownerCt){B=E.ownerCt.nextChild(E,F)}}return B},remove:function(B,D){var A=this,C=A.getComponent(B);if(Ext.isDefined(Ext.global.console)&&!C){Ext.global.console.warn("Attempted to remove a component that does not exist. Ext.container.Container: remove takes an argument of the component to remove. cmp.remove() is incorrect usage.")}if(C&&(!A.hasListeners.beforeremove||A.fireEvent("beforeremove",A,C)!==false)){A.doRemove(C,D);if(A.hasListeners.remove){A.fireEvent("remove",A,C)}if(!A.destroying&&!C.floating){A.updateLayout()}}return C},removeAll:function(G){var C=this,F=C.items.items.slice().concat(C.floatingItems.items),E=[],A=0,D=F.length,B;Ext.suspendLayouts();C.removingAll=true;for(;A<D;A++){B=F[A];C.remove(B,G);if(B.ownerCt!==C){E.push(B)}}C.removingAll=false;Ext.resumeLayouts(!!D);return E},setLayout:function(F){var E=this,D=E.layout,C=D&&D.isLayout,B,A;if(typeof F==="string"){F={type:F}}A=F.type;if(C&&(!A||(A===D.type))){delete F.type;D.setConfig(F)}else{if(C){D.setOwner(null)}B=E.self.prototype.layout;if(typeof B==="string"){F.type=A||B}else{Ext.merge(Ext.merge({},B),F)}F=this.layout=Ext.Factory.layout(F);F.setOwner(this)}if(E.rendered){E.updateLayout()}},setActiveItem:function(A){return this.getLayout().setActiveItem(A)},privates:{applyDefaults:function(A){var B=this.defaults;if(B){if(Ext.isFunction(B)){B=B.call(this,A)}if(Ext.isString(A)){A=Ext.ComponentManager.get(A)}Ext.applyIf(A,B)}return A},applyReference:function(A){var B;if(A&&A.charAt(B=A.length-1)===">"){this.isParentReference=true;A=A.substring(0,B)}if(A&&!this.validIdRe.test(A)){Ext.Error.raise('Invalid reference "'+A+'" for '+this.getId()+" - not a valid identifier")}return A},applyTargetCls:function(A){this.addCls(A)},attachReference:function(C){var B=this,A,D;if(B.destroying||B.isDestroyed){return}D=B.refs||(B.refs={});A=C.referenceKey;if(D[A]&&D[A]!==C){Ext.log.warn('Duplicate reference: "'+A+'" on '+B.id)}D[A]=C},clearReference:function(B){var C=this.refs,A=B.referenceKey;if(C&&A){B.viewModelKey=B.referenceKey=C[A]=null}},clearReferences:function(){this.refs=null},detachComponent:function(A){Ext.getDetachedBody().appendChild(A.getEl())},doRemove:function(E,D){D=D===true||(D!==false&&this.autoDestroy);var B=this,F=B.layout,G=F&&B.rendered,A=E.destroying||D,C=E.floating;if(C){B.floatingItems.remove(E)}else{B.items.remove(E)}if(G&&!C){if(F.running){Ext.Component.cancelLayout(E,A)}F.onRemove(E,A)}E.onRemoved(A);B.onRemove(E,A);if(D){E.destroy()}else{if(G&&!C){F.afterRemove(E)}if(B.detachOnRemove&&E.rendered){B.detachComponent(E)}}},finishRenderChildren:function(){this.callParent();var A=this.getLayout();if(A){A.finishRender()}},getChildItemsToDisable:function(){return this.query("[isFormField],button")},getComponentId:function(A){return A.getItemId&&A.getItemId()},getContentTarget:function(){return this.getLayout().getContentTarget()},getDefaultContentTarget:function(){return this.el},getFocusEl:function(){return this.getTargetEl()},getScrollerEl:function(){return this.layout.getScrollerEl()||this.callParent()},prepareItems:function(F,A){if(Ext.isArray(F)){F=F.slice()}else{F=[F]}var D=this,B=0,E=F.length,C;for(;B<E;B++){C=F[B];if(C==null){Ext.Array.erase(F,B,1);--B;--E}else{if(A){C=this.applyDefaults(C)}C.initOwnerCt=D;if(C.isComponent){C.instancedCmp=true}F[B]=D.lookupComponent(C);delete C.initOwnerCt}}return F},repositionFloatingItems:function(){var B=this.floatingItems.items,D=B.length,A,C;for(A=0;A<D;A++){C=B[A];if(C.el&&!C.hidden){C.setPosition(C.x,C.y)}}},_noMargin:{"margin-top":"","margin-right":"","margin-bottom":"","margin-left":""},resetItemMargins:function(){var D=this.items.items,B=D.length,A=this._noMargin,C;while(B--){C=D[B];C.margin$=null;C.el.setStyle(A)}},setupRenderTpl:function(A){this.callParent(arguments);this.getLayout().setupRenderTpl(A)}}});
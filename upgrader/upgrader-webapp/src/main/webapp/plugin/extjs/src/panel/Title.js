Ext.define("Ext.panel.Title",{extend:"Ext.Component",xtype:"title",isTitle:true,noWrap:true,textAlign:"left",iconAlign:"left",rotation:0,text:"&#160;",beforeRenderConfig:{textAlign:null,text:null,glyph:null,icon:null,iconAlign:null,iconCls:null,rotation:null},autoEl:{unselectable:"on"},childEls:["textEl","iconEl","iconWrapEl"],renderTpl:'<tpl if="iconMarkup && iconBeforeTitle">{iconMarkup}</tpl><div id="{id}-textEl" data-ref="textEl" class="{textCls} {textCls}-{ui} {itemCls}" unselectable="on"<tpl if="headerRole"> role="{headerRole}"</tpl>>{text}</div><tpl if="iconMarkup && !iconBeforeTitle">{iconMarkup}</tpl>',iconTpl:'<div id="{id}-iconWrapEl" data-ref="iconWrapEl" role="presentation" class="{iconWrapCls} {iconWrapCls}-{ui} {iconAlignCls} {itemCls}{childElCls}"<tpl if="iconWrapStyle"> style="{iconWrapStyle}"</tpl>><div id="{id}-iconEl" data-ref="iconEl" role="presentation" unselectable="on" class="{baseIconCls} {baseIconCls}-{ui} {iconCls} {glyphCls}" style="<tpl if="iconUrl">background-image:url({iconUrl});</tpl><tpl if="glyph && glyphFontFamily">font-family:{glyphFontFamily};</tpl>"><tpl if="glyph">&#{glyph};</tpl><tpl if="iconCls || iconUrl">&#160;</tpl></div></div>',_textAlignClasses:{left:Ext.baseCSSPrefix+"title-align-left",center:Ext.baseCSSPrefix+"title-align-center",right:Ext.baseCSSPrefix+"title-align-right"},_iconAlignClasses:{top:Ext.baseCSSPrefix+"title-icon-top",right:Ext.baseCSSPrefix+"title-icon-right",bottom:Ext.baseCSSPrefix+"title-icon-bottom",left:Ext.baseCSSPrefix+"title-icon-left"},_rotationClasses:{0:Ext.baseCSSPrefix+"title-rotate-none",1:Ext.baseCSSPrefix+"title-rotate-right",2:Ext.baseCSSPrefix+"title-rotate-left"},_rotationAngles:{1:90,2:270},baseCls:Ext.baseCSSPrefix+"title",_titleSuffix:"-title",_glyphCls:Ext.baseCSSPrefix+"title-glyph",_iconWrapCls:Ext.baseCSSPrefix+"title-icon-wrap",_baseIconCls:Ext.baseCSSPrefix+"title-icon",_itemCls:Ext.baseCSSPrefix+"title-item",_textCls:Ext.baseCSSPrefix+"title-text",afterComponentLayout:function(){var D=this,B=D.getRotation(),A,E,C;if(B&&!Ext.isIE8){C=D.el;A=D.lastBox;E=A.x;C.setStyle(D._getVerticalAdjustDirection(),(E+((B===1)?A.width:-A.height))+"px")}this.callParent()},onRender:function(){var C=this,B=C.getRotation(),A=C.el;C.callParent();if(B){A.setVertical(C._rotationAngles[B])}if(Ext.supports.FixedTableWidthBug){A._needsTableWidthFix=true}},applyText:function(A){if(!A){A="&#160;"}return A},beforeRender:function(){var A=this;A.callParent();A.addCls(A._rotationClasses[A.getRotation()]);A.addCls(A._textAlignClasses[A.getTextAlign()])},getIconMarkup:function(){return this.getTpl("iconTpl").apply(this.getIconRenderData())},getIconRenderData:function(){var C=this,D=C.getIcon(),F=C.getIconCls(),E=C.getGlyph(),G=Ext._glyphFontFamily,A=C.getIconAlign(),B;if(typeof E==="string"){B=E.split("@");E=B[0];G=B[1]}return{id:C.id,ui:C.ui,itemCls:C._itemCls,iconUrl:D,iconCls:F,iconWrapCls:C._iconWrapCls,baseIconCls:C._baseIconCls,iconAlignCls:C._iconAlignClasses[A],glyph:E,glyphCls:E?C._glyphCls:"",glyphFontFamily:G}},initRenderData:function(){var B=this,A,C;C={text:B.getText(),headerRole:B.headerRole,id:B.id,ui:B.ui,itemCls:B._itemCls,textCls:B._textCls,iconMarkup:null,iconBeforeTitle:null};if(B._hasIcon()){A=B.getIconAlign();C.iconMarkup=B.getIconMarkup();C.iconBeforeTitle=(A==="top"||A==="left")}return C},onAdded:function(E,D,G){var B=this,F=B.cls||"",C=B._titleSuffix,A=E.baseCls;B.addCls([A+C,A+C+"-"+E.ui]);B.callParent([E,D,G])},updateGlyph:function(E,D){E=E||0;var C=this,A=C._glyphCls,F,G,B;C.glyph=E;if(C.rendered){C._syncIconVisibility();F=C.iconEl;if(typeof E==="string"){B=E.split("@");E=B[0];G=B[1]||Ext._glyphFontFamily}if(!E){F.dom.innerHTML="";F.removeCls(A)}else{if(D!=E){F.dom.innerHTML="&#"+E+";";F.addCls(A)}}if(G){F.setStyle("font-family",G)}if(C._didIconStateChange(D,E)){C.updateLayout()}}},updateIcon:function(D,B){D=D||"";var C=this,A;if(C.rendered&&D!=B){C._syncIconVisibility();A=C.iconEl;A.setStyle("background-image",D?"url("+D+")":"");if(C._didIconStateChange(B,D)){C.updateLayout()}}},updateIconAlign:function(E,B){var F=this,D=F.iconWrapEl,A,D,C;if(F.iconWrapEl){A=F.el;C=F._iconAlignClasses;if(B){D.removeCls(C[B])}D.addCls(C[E]);if(E==="top"||E==="left"){A.insertFirst(D)}else{A.appendChild(D)}F.updateLayout()}},updateIconCls:function(B,D){B=B||"";var C=this,A;if(C.rendered&&D!=B){C._syncIconVisibility();A=C.iconEl;if(D){A.removeCls(D)}A.addCls(B);if(C._didIconStateChange(D,B)){C.updateLayout()}}},updateRotation:function(C,B){var E=this,D,A,F;if(E.rendered){A=E.el;F=E._rotationClasses;E.removeCls(F[B]);E.addCls(F[C]);A.setHorizontal();if(C){A.setVertical(E._rotationAngles[C])}A.setStyle({right:"",left:"",top:"",height:"",width:""});E.lastBox=null;E.updateLayout()}},updateText:function(A){if(this.rendered){this.textEl.setHtml(A)}},updateTextAlign:function(C,A){var D=this,B=D._textAlignClasses;if(D.rendered){if(A){D.removeCls(B[A])}D.addCls(B[C]);D.updateLayout()}},privates:{_getVerticalAdjustDirection:function(){return"left"},_didIconStateChange:function(B,C){var A=Ext.isEmpty(C);return Ext.isEmpty(B)?!A:A},_hasIcon:function(){return !!(this.getIcon()||this.getIconCls()||this.getGlyph())},_syncIconVisibility:function(){var E=this,A=E.el,C=E._hasIcon(),D=E.iconWrapEl,B,F;if(C&&!D){F=E.iconAlign;B=(F==="left"||F==="top");A.dom.insertAdjacentHTML(B?"afterbegin":"beforeend",E.getIconMarkup());D=E.iconWrapEl=A[B?"first":"last"]();E.iconEl=D.first()}if(D){D.setDisplayed(C)}}}});
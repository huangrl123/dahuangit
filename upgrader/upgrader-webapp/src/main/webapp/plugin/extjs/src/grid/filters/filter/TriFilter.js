Ext.define("Ext.grid.filters.filter.TriFilter",{extend:"Ext.grid.filters.filter.Base",menuItems:["lt","gt","-","eq"],constructor:function(A){var I=this,H=false,E={},D,F,J,B,G,C;I.callParent([A]);D=I.grid.stateful;G=I.value;J=I.getStoreFilter("lt");F=I.getStoreFilter("gt");B=I.getStoreFilter("eq");if(J||F||B){H=I.active=true}else{if(D&&I.store.saveStatefulFilters){G=undefined}I.active=!!G}E.lt=J||I.createFilter({operator:"lt",value:(!H&&G&&G.lt)||null},"lt");E.gt=F||I.createFilter({operator:"gt",value:(!H&&G&&G.gt)||null},"gt");E.eq=B||I.createFilter({operator:"eq",value:(!H&&G&&G.eq)||null},"eq");I.filter=E;if(!H&&I.active){for(C in G){I.addStoreFilter(I.filter[C])}}},activate:function(H){var E=this,G=this.filter,F=E.fields,B,D,A,C;if(E.settingValue){return}for(A in G){B=G[A];D=F[A];C=B.getValue();if(C){C=E.convertValue(C,true);D.setValue(C);D.up("menuitem").setChecked(true,true);if(!H){E.addStoreFilter(B)}}}},deactivate:function(){var A=this.filter,C,B;if(!this.hasActiveFilter()||this.settingValue){return}this.settingValue=true;for(C in A){B=A[C];if(B.getValue()){this.removeStoreFilter(B)}}this.settingValue=false},hasActiveFilter:function(){var A=false,B=this.filter,C=this.store.getFilters();if(C.length){for(filter in B){if(C.map[this.getBaseIdPrefix()+"-"+filter]){A=true;break}}}return A},onFilterRemove:function(C){var A=this,B;if(!A.menu&&!A.hasActiveFilter()){A.active=false}else{if(A.menu){B={};B[C]=null;A.setValue(B)}}},setValue:function(E){var J=this,L=J.fields,M=J.filter,D=[],F=[],H=false,A=J.store.getFilters(),G,C,B,K,I;if(J.settingValue){return}J.settingValue=true;if("eq" in E){if(M.lt.getValue()){F.push(L.lt)}if(M.gt.getValue()){F.push(L.gt)}if(E.eq){B=J.convertValue(E.eq,false);D.push(L.eq);M.eq.setValue(B)}else{F.push(L.eq)}}else{if(M.eq.getValue()){F.push(L.eq)}if("lt" in E){if(E.lt){B=J.convertValue(E.lt,false);D.push(L.lt);M.lt.setValue(B)}else{F.push(L.lt)}}if("gt" in E){if(E.gt){B=J.convertValue(E.gt,false);D.push(L.gt);M.gt.setValue(B)}else{F.push(L.gt)}}}if(F.length||D.length){A.beginUpdate();if(F.length){for(K=0,I=F.length;K<I;K++){G=F[K];C=G.filter;G.setValue(null);C.setValue(null);J.removeStoreFilter(C)}}if(D.length){for(K=0,I=D.length;K<I;K++){J.addStoreFilter(D[K].filter)}H=true}A.endUpdate()}if(!H&&A.length){H=J.hasActiveFilter()}if(!H||!J.active){J.setActive(H)}J.settingValue=false}});
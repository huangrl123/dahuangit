Ext.define("Ext.form.field.File",{extend:"Ext.form.field.Text",alias:["widget.filefield","widget.fileuploadfield"],alternateClassName:["Ext.form.FileUploadField","Ext.ux.form.FileUploadField","Ext.form.File"],requires:["Ext.form.field.FileButton","Ext.form.trigger.Component"],triggers:{filebutton:{type:"component",hideOnReadOnly:false}},buttonText:"Browse...",buttonOnly:false,buttonMargin:3,clearOnSubmit:true,extraFieldBodyCls:Ext.baseCSSPrefix+"form-file-wrap",inputCls:Ext.baseCSSPrefix+"form-text-file",readOnly:true,editable:false,submitValue:false,triggerNoEditCls:"",childEls:["browseButtonWrap"],applyTriggers:function(C){var B=this,A=(C||{}).filebutton;if(A){A.component=Ext.apply({xtype:"filebutton",ownerCt:B,id:B.id+"-button",ui:B.ui,disabled:B.disabled,text:B.buttonText,style:B.buttonOnly?"":B.getButtonMarginProp()+B.buttonMargin+"px",inputName:B.getName(),listeners:{scope:B,change:B.onFileChange}},B.buttonConfig);return B.callParent([C])}else{Ext.Error.raise(B.$className+' requires a valid trigger config containing "filebutton" specification')}},onRender:function(){var D=this,A,B,C,E;D.callParent(arguments);A=D.inputEl;A.dom.name="";E=D.getTrigger("filebutton");B=D.button=E.component;D.fileInputEl=B.fileInputEl;C=B.el;if(D.buttonOnly){D.inputWrap.setDisplayed(false);D.shrinkWrap=3}E.el.setWidth(C.getWidth()+C.getMargin("lr"));if(Ext.isIE){D.button.getEl().repaint()}},getTriggerMarkup:function(){return'<td id="'+this.id+'-browseButtonWrap" data-ref="browseButtonWrap" role="presentation"></td>'},onFileChange:function(A,B,C){this.duringFileSelect=true;Ext.form.field.File.superclass.setValue.call(this,C);delete this.duringFileSelect},didValueChange:function(){return !!this.duringFileSelect},setValue:Ext.emptyFn,reset:function(){var A=this,B=A.clearOnSubmit;if(A.rendered){A.button.reset(B);A.fileInputEl=A.button.fileInputEl;if(B){A.inputEl.dom.value="";Ext.form.field.File.superclass.setValue.call(this,null)}}A.callParent()},onShow:function(){this.callParent();this.button.updateLayout()},onDisable:function(){this.callParent();this.button.disable()},onEnable:function(){this.callParent();this.button.enable()},isFileUpload:Ext.returnTrue,extractFileInput:function(){var A=this,B;if(A.rendered){B=A.button.fileInputEl.dom;A.reset()}else{B=document.createElement("input");B.type="file";B.className=Ext.baseCSSPrefix+"hidden-display";B.name=A.getName()}return B},restoreInput:function(A){if(this.rendered){var B=this.button;B.restoreInput(A);this.fileInputEl=B.fileInputEl}},onDestroy:function(){Ext.destroyMembers(this,"button");delete this.fileInputEl;this.callParent()},getButtonMarginProp:function(){return"margin-left:"}});
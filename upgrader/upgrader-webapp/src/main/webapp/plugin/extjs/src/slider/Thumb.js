Ext.define("Ext.slider.Thumb",{requires:["Ext.dd.DragTracker","Ext.util.Format"],constructor:function(A){var B=this;Ext.apply(B,A||{},{cls:Ext.baseCSSPrefix+"slider-thumb",constrain:false});B.callParent([A])},render:function(){var A=this;A.el=A.slider.innerEl.insertFirst(A.getElConfig());A.onRender()},onRender:function(){if(this.disabled){this.disable()}this.initEvents()},getElConfig:function(){var B=this,C=B.slider,A={};A[C.vertical?"bottom":C.horizontalProp]=C.calculateThumbPosition(C.normalizeValue(B.value))+"%";return{style:A,id:this.id,cls:this.cls,role:"presentation"}},move:function(A,B){var G=this,E=G.el,C=G.slider,D=C.vertical?"bottom":C.horizontalProp,H,F;A+="%";if(!B){E.dom.style[D]=A}else{H={};H[D]=A;if(!Ext.supports.GetPositionPercentage){F={};F[D]=E.dom.style[D]}new Ext.fx.Anim({target:E,duration:350,from:F,to:H})}},enable:function(){var A=this;A.disabled=false;if(A.el){A.el.removeCls(A.slider.disabledCls)}},disable:function(){var A=this;A.disabled=true;if(A.el){A.el.addCls(A.slider.disabledCls)}},initEvents:function(){var A=this;A.tracker=new Ext.dd.DragTracker({el:A.el,onBeforeStart:A.onBeforeDragStart.bind(A),onStart:A.onDragStart.bind(A),onDrag:A.onDrag.bind(A),onEnd:A.onDragEnd.bind(A),tolerance:3,autoStart:300,overCls:Ext.baseCSSPrefix+"slider-thumb-over"})},onBeforeDragStart:function(B){var C=this,A=C.el,E=C.tracker.getXY(),D=C.pointerOffset=A.getXY();if(C.disabled){return false}else{D[0]+=Math.floor(A.getWidth()/2)-E[0];D[1]+=Math.floor(A.getHeight()/2)-E[1];C.slider.promoteThumb(C);return true}},onDragStart:function(A){var B=this,C=B.slider;C.onDragStart(B,A);B.el.addCls(Ext.baseCSSPrefix+"slider-thumb-drag");B.dragging=B.slider.dragging=true;B.dragStartValue=B.value;C.fireEvent("dragstart",C,A,B)},onDrag:function(A){var C=this,E=C.slider,D=C.index,G=C.getValueFromTracker(),B,F;if(G!==undefined){if(C.constrain){B=E.thumbs[D+1];F=E.thumbs[D-1];if(F!==undefined&&G<=F.value){G=F.value}if(B!==undefined&&G>=B.value){G=B.value}}E.setValue(D,G,false);E.fireEvent("drag",E,A,C)}},getValueFromTracker:function(){var A=this.slider,C=this.tracker.getXY(),B;C[0]+=this.pointerOffset[0];C[1]+=this.pointerOffset[1];B=A.getTrackpoint(C);if(B!==undefined){return A.reversePixelValue(B)}},onDragEnd:function(A){var B=this,D=B.slider,C=B.value;D.onDragEnd(B,A);B.el.removeCls(Ext.baseCSSPrefix+"slider-thumb-drag");B.dragging=D.dragging=false;D.fireEvent("dragend",D,A);if(B.dragStartValue!=C){D.fireEvent("changecomplete",D,C,B);if(D.publishOnComplete){D.publishValue(C)}}},destroy:function(){Ext.destroy(this.tracker);this.el.destroy();this.el=null}});
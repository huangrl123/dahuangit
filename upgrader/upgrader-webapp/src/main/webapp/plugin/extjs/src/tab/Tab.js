Ext.define("Ext.tab.Tab",{extend:"Ext.button.Button",alias:"widget.tab",requires:["Ext.util.KeyNav"],isTab:true,baseCls:Ext.baseCSSPrefix+"tab",closeElOverCls:Ext.baseCSSPrefix+"tab-close-btn-over",closeElPressedCls:Ext.baseCSSPrefix+"tab-close-btn-pressed",config:{rotation:"default",tabPosition:"top"},closable:true,closeText:"Close Tab",active:false,childEls:["closeEl"],scale:false,ariaRole:"tab",_btnWrapCls:Ext.baseCSSPrefix+"tab-wrap",_btnCls:Ext.baseCSSPrefix+"tab-button",_baseIconCls:Ext.baseCSSPrefix+"tab-icon-el",_glyphCls:Ext.baseCSSPrefix+"tab-glyph",_innerCls:Ext.baseCSSPrefix+"tab-inner",_textCls:Ext.baseCSSPrefix+"tab-text",_noTextCls:Ext.baseCSSPrefix+"tab-no-text",_hasIconCls:Ext.baseCSSPrefix+"tab-icon",_activeCls:Ext.baseCSSPrefix+"tab-active",_closableCls:Ext.baseCSSPrefix+"tab-closable",overCls:Ext.baseCSSPrefix+"tab-over",_pressedCls:Ext.baseCSSPrefix+"tab-pressed",_disabledCls:Ext.baseCSSPrefix+"tab-disabled",_rotateClasses:{1:Ext.baseCSSPrefix+"tab-rotate-right",2:Ext.baseCSSPrefix+"tab-rotate-left"},_positions:{top:{"default":"top",0:"top",1:"left",2:"right"},right:{"default":"top",0:"right",1:"top",2:"bottom"},bottom:{"default":"bottom",0:"bottom",1:"right",2:"left"},left:{"default":"top",0:"left",1:"bottom",2:"top"}},_defaultRotations:{top:0,right:1,bottom:0,left:2},initComponent:function(){var A=this;if(A.card){A.setCard(A.card)}A.callParent(arguments)},getActualRotation:function(){var A=this.getRotation();return(A!=="default")?A:this._defaultRotations[this.getTabPosition()]},updateRotation:function(){this.syncRotationAndPosition()},updateTabPosition:function(){this.syncRotationAndPosition()},syncRotationAndPosition:function(){var G=this,A=G._positions,D=G._rotateClasses,F=G.getTabPosition(),H=G.getActualRotation(),I=G._rotateCls,C=G._rotateCls=D[H],B=G._positionCls,E=G._positionCls=G._positions[F][H];if(I!==C){if(I){G.removeCls(I)}if(C){G.addCls(C)}}if(B!==E){if(B){G.removeClsWithUI(B)}if(E){G.addClsWithUI(E)}if(G.rendered){G.updateFrame()}}if(G.rendered){G.setElOrientation()}},onAdded:function(B,A,C){this.callParent([B,A,C]);this.syncRotationAndPosition()},getTemplateArgs:function(){var B=this,A=B.callParent();A.closable=B.closable;A.closeText=B.closeText;return A},beforeRender:function(){var B=this,A=B.up("tabbar"),C=B.up("tabpanel");B.callParent();if(B.active){B.addCls(B._activeCls)}B.syncClosableCls();if(!B.minWidth){B.minWidth=(A)?A.minTabWidth:B.minWidth;if(!B.minWidth&&C){B.minWidth=C.minTabWidth}if(B.minWidth&&B.iconCls){B.minWidth+=25}}if(!B.maxWidth){B.maxWidth=(A)?A.maxTabWidth:B.maxWidth;if(!B.maxWidth&&C){B.maxWidth=C.maxTabWidth}}},onRender:function(){var A=this;A.setElOrientation();A.callParent(arguments);if(A.closable){A.closeEl.addClsOnOver(A.closeElOverCls);A.closeEl.addClsOnClick(A.closeElPressedCls)}A.initKeyNav()},initKeyNav:function(){var A=this;A.keyNav=new Ext.util.KeyNav(A.el,{enter:A.onEnterKey,del:A.onDeleteKey,scope:A})},setElOrientation:function(){var C=this,B=C.getActualRotation(),A=C.el;if(B){A.setVertical(B===1?90:270)}else{A.setHorizontal()}},enable:function(B){var A=this;A.callParent(arguments);A.removeCls(A._disabledCls);return A},disable:function(B){var A=this;A.callParent(arguments);A.addCls(A._disabledCls);return A},onDestroy:function(){var A=this;Ext.destroy(A.keyNav);delete A.keyNav;A.callParent(arguments)},setClosable:function(B){var A=this;B=(!arguments.length||!!B);if(A.closable!=B){A.closable=B;if(A.card){A.card.closable=B}A.syncClosableCls();if(A.rendered){A.syncClosableElements();A.updateLayout()}}},syncClosableElements:function(){var A=this,B=A.closeEl;if(A.closable){if(!B){B=A.closeEl=A.btnWrap.insertSibling({tag:"a",role:"presentation",cls:A.baseCls+"-close-btn",href:"#",title:A.closeText},"after")}B.addClsOnOver(A.closeElOverCls);B.addClsOnClick(A.closeElPressedCls)}else{if(B){B.destroy();delete A.closeEl}}},syncClosableCls:function(){var A=this,B=A._closableCls;if(A.closable){A.addCls(B)}else{A.removeCls(B)}},setCard:function(A){var B=this;B.card=A;if(A.iconAlign){B.setIconAlign(A.iconAlign)}if(A.textAlign){B.setTextAlign(A.textAlign)}B.setText(B.title||A.title);B.setIconCls(B.iconCls||A.iconCls);B.setIcon(B.icon||A.icon);B.setGlyph(B.glyph||A.glyph)},onCloseClick:function(){var A=this;if(A.fireEvent("beforeclose",A)!==false){if(A.tabBar){if(A.tabBar.closeTab(A)===false){return}}else{A.fireClose()}}},fireClose:function(){this.fireEvent("close",this)},onEnterKey:function(A){var B=this;if(B.tabBar){B.tabBar.onClick(A,B.el)}},onDeleteKey:function(A){if(this.closable){this.onCloseClick()}},afterClick:function(A){if(!A){this.focus()}},activate:function(A){var B=this;B.active=true;B.addCls(B._activeCls);if(A!==true){B.fireEvent("activate",B)}},deactivate:function(A){var B=this;B.active=false;B.removeCls(B._activeCls);if(A!==true){B.fireEvent("deactivate",B)}},privates:{getFramingInfoCls:function(){return this.baseCls+"-"+this.ui+"-"+this._positionCls},wrapPrimaryEl:function(A){this.el=new Ext.dom.Element(A)}}});
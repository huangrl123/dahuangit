Ext.define("Ext.data.amf.XmlEncoder",{alias:"data.amf.xmlencoder",body:"",statics:{generateFlexUID:function(E){var B="",A,D,C;if(E===undefined){E=Ext.Number.randomInt(0,4294967295)}C=(E+4294967296).toString(16).toUpperCase();B=C.substr(C.length-8,8);for(D=0;D<3;D++){B+="-";for(A=0;A<4;A++){B+=Ext.Number.randomInt(0,15).toString(16).toUpperCase()}}B+="-";C=new Number(new Date()).valueOf().toString(16).toUpperCase();D=0;if(C.length<8){for(A=0;A<C.length-8;A++){D++;B+="0"}}B+=C.substr(-(8-D));for(A=0;A<4;A++){B+=Ext.Number.randomInt(0,15).toString(16).toUpperCase()}return B}},constructor:function(A){this.initConfig(A);this.clear()},clear:function(){this.body=""},encodeUndefined:function(){return this.encodeNull()},writeUndefined:function(){this.write(this.encodeUndefined())},encodeNull:function(){return"<null />"},writeNull:function(){this.write(this.encodeNull())},encodeBoolean:function(B){var A;if(B){A="<true />"}else{A="<false />"}return A},writeBoolean:function(A){this.write(this.encodeBoolean(A))},encodeString:function(A){var B;if(A===""){B="<string />"}else{B="<string>"+A+"</string>"}return B},writeString:function(A){this.write(this.encodeString(A))},encodeInt:function(A){return"<int>"+A.toString()+"</int>"},writeInt:function(A){this.write(this.encodeInt(A))},encodeDouble:function(A){return"<double>"+A.toString()+"</double>"},writeDouble:function(A){this.write(this.encodeDouble(A))},encodeNumber:function(C){var B=536870911,A=-268435455;if(typeof(C)!=="number"&&!(C instanceof Number)){Ext.log.warn("Encoder: writeNumber argument is not numeric. Can't coerce.")}if(C instanceof Number){C=C.valueOf()}if(C%1===0&&C>=A&&C<=B){return this.encodeInt(C)}else{return this.encodeDouble(C)}},writeNumber:function(A){this.write(this.encodeNumber(A))},encodeDate:function(A){return"<date>"+(new Number(A)).toString()+"</date>"},writeDate:function(A){this.write(this.encodeDate(A))},encodeEcmaElement:function(A,C){var B='<item name="'+A.toString()+'">'+this.encodeObject(C)+"</item>";return B},encodeArray:function(B){var A=[],G,E=[],C=B.length,D,F;for(D in B){if(Ext.isNumeric(D)&&(D%1==0)){A[D]=this.encodeObject(B[D])}else{E.push(this.encodeEcmaElement(D,B[D]))}}G=A.length;for(D=0;D<A.length;D++){if(A[D]===undefined){G=D;break}}if(G<A.length){for(D=firstNonOrdinals;D<A.length;D++){if(A[D]!==undefined){E.push(this.encodeEcmaElement(D,A[D]))}}A=A.slice(0,G)}F='<array length="'+A.length+'"';if(E.length>0){F+=' ecma="true"'}F+=">";for(D=0;D<A.length;D++){F+=A[D]}for(D in E){F+=E[D]}F+="</array>";return F},writeArray:function(A){this.write(this.encodeArray(A))},encodeXml:function(B){var A=this.convertXmlToString(B);return"<xml><![CDATA["+A+"]]></xml>"},writeXml:function(A){this.write(this.encodeXml(A))},encodeGenericObject:function(B){var F=[],D=[],C=null,A,E;for(A in B){if(A=="$flexType"){C=B[A]}else{F.push(this.encodeString(new String(A)));D.push(this.encodeObject(B[A]))}}if(C){E='<object type="'+C+'">'}else{E="<object>"}if(F.length>0){E+="<traits>";E+=F.join("");E+="</traits>"}else{E+="<traits />"}E+=D.join("");E+="</object>";return E},writeGenericObject:function(A){this.write(this.encodeGenericObject(A))},encodeByteArray:function(B){var D,C,A;if(B.length>0){D="<bytearray>";for(C=0;C<B.length;C++){if(!Ext.isNumber(B[C])){Ext.Error.raise("Byte array contains a non-number: "+B[C]+" in index: "+C)}if(B[C]<0||B[C]>255){Ext.Error.raise("Byte array value out of bounds: "+B[C])}A=B[C].toString(16).toUpperCase();if(B[C]<16){A="0"+A}D+=A}D+="</bytearray>"}else{D="<bytearray />"}return D},writeByteArray:function(A){this.write(this.encodeByteArray(A))},encodeObject:function(A){var B=typeof(A);if(B==="undefined"){return this.encodeUndefined()}else{if(A===null){return this.encodeNull()}else{if(Ext.isBoolean(A)){return this.encodeBoolean(A)}else{if(Ext.isString(A)){return this.encodeString(A)}else{if(B==="number"||A instanceof Number){return this.encodeNumber(A)}else{if(B==="object"){if(A instanceof Date){return this.encodeDate(A)}else{if(Ext.isArray(A)){return this.encodeArray(A)}else{if(this.isXmlDocument(A)){return this.encodeXml(A)}else{return this.encodeGenericObject(A)}}}}else{Ext.log.warn("AMFX Encoder: Unknown item type "+B+" can't be written to stream: "+A)}}}}}}return null},writeObject:function(A){this.write(this.encodeObject(A))},encodeAmfxRemotingPacket:function(C){var A,B;B='<amfx ver="3" xmlns="http://www.macromedia.com/2005/amfx"><body>';B+=C.encodeMessage();B+="</body></amfx>";return B},writeAmfxRemotingPacket:function(A){this.write(this.encodeAmfxRemotingPacket(A))},convertXmlToString:function(B){var A;if(window.XMLSerializer){A=new window.XMLSerializer().serializeToString(B)}else{A=B.xml}return A},isXmlDocument:function(A){if(window.DOMParser){if(Ext.isDefined(A.doctype)){return true}}if(Ext.isString(A.xml)){return true}return false},write:function(A){this.body+=A}});
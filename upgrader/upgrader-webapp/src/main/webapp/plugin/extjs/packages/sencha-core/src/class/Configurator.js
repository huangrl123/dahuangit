(function(){var B=Ext.Config,C=B.map,A=Ext.Object;Ext.Configurator=function(E){var F=this,G=E.prototype,D=E.superclass?E.superclass.self.$config:null;F.cls=E;if(D){F.configs=A.chain(D.configs);F.cachedConfigs=A.chain(D.cachedConfigs);F.initMap=A.chain(D.initMap);F.values=A.chain(D.values)}else{F.configs={};F.cachedConfigs={};F.initMap={};F.values={}}G.config=G.defaultConfig=F.values;E.$config=F};Ext.Configurator.prototype={self:Ext.Configurator,initList:null,add:function(D,R){var I=this,F=I.cls,P=I.configs,K=I.cachedConfigs,T=I.initMap,L=F.prototype,V=R&&R.$config.configs,Q=I.values,O,W,U,N,J,E,S,G,H,M;for(S in D){M=D[S];O=M&&M.constructor===Object;W=O&&"$value" in M?M:null;if(W){U=!!W.cached;M=W.$value}N=W&&W.merge;J=P[S];if(J){if(R){N=J.merge;if(!N){continue}W=null}else{N=N||J.merge}if(!R&&U&&!K[S]){Ext.Error.raise("Redefining config as cached: "+S+" in class: "+F.$className)}E=Q[S];if(N){M=N.call(J,M,E,F,R)}else{if(O){if(E&&E.constructor===Object){M=A.merge({},E,M)}}}}else{if(V){J=V[S];W=null}else{J=B.get(S)}P[S]=J;if(J.cached||U){K[S]=true}G=J.names;if(!L[H=G.get]){L[H]=J.getGetter()}if(!L[H=G.set]){L[H]=J.getSetter()}}if(W){if(J.owner!==F){P[S]=J=Ext.Object.chain(J);J.owner=F}Ext.apply(J,W);delete J.$value}if(M!==null){T[S]=true}else{if(L.$configPrefixed){L[P[S].names.internal]=null}else{L[P[S].name]=null}if(S in T){T[S]=false}}Q[S]=M}},configure:function(a,W){var J=this,R=J.configs,Z=J.initMap,O=J.initListMap,G=J.initList,P=J.cls.prototype,T=A.fork(J.values),E=!a.$configStrict,Y=0,F=!G,X,K,N,D,H,S,L,V,b,Q,U,M,I;if(F){J.initList=G=[];J.initListMap=O={};a.isFirstInstance=true;for(b in Z){D=Z[b];K=R[b];U=K.cached;if(D){V=K.names;Q=T[b];if(!P[V.set].$isDefault||P[V.apply]||P[V.update]||typeof Q==="object"){if(U){(X||(X=[])).push(K)}else{G.push(K);O[b]=true}a[V.get]=K.initGetter||K.getInitGetter()}else{P[K.getInternalName(P)]=Q}}else{if(U){P[K.getInternalName(P)]=undefined}}}}L=X&&X.length;if(L){for(H=0;H<L;++H){S=X[H].getInternalName(P);a[S]=null}for(H=0;H<L;++H){V=(K=X[H]).names;N=V.get;if(a.hasOwnProperty(N)){a[V.set](T[K.name]);delete a[N]}}for(H=0;H<L;++H){S=X[H].getInternalName(P);P[S]=a[S];delete a[S]}}if(F){if(a.afterCachedConfig&&!a.afterCachedConfig.$nullFn){a.afterCachedConfig(W)}}a.isConfiguring=true;a.config=T;for(H=0,L=G.length;H<L;++H){K=G[H];a[K.names.get]=K.initGetter||K.getInitGetter()}if(a.transformInstanceConfig){W=a.transformInstanceConfig(W)}if(W){for(b in W){Q=W[b];K=R[b];if(!K){if(E){a[b]=Q}}else{if(!K.lazy){++Y}if(!O[b]){a[K.names.get]=K.initGetter||K.getInitGetter()}M=K.merge;if(M){Q=M.call(K,Q,T[b],a)}else{if(Q&&Q.constructor===Object){I=T[b];if(I&&I.constructor===Object){Q=A.merge(T[b],Q)}else{Q=Ext.clone(Q)}}}}T[b]=Q}}if(a.beforeInitConfig&&!a.beforeInitConfig.$nullFn){if(a.beforeInitConfig(W)===false){return}}if(W){for(b in W){if(!Y){break}K=R[b];if(K&&!K.lazy){--Y;V=K.names;N=V.get;if(a.hasOwnProperty(N)){a[V.set](T[b]);delete a[V.get]}}}}for(H=0,L=G.length;H<L;++H){K=G[H];V=K.names;N=V.get;if(!K.lazy&&a.hasOwnProperty(N)){a[V.set](T[K.name]);delete a[N]}}delete a.isConfiguring},getCurrentConfig:function(D){var G=D.defaultConfig,E={},F;for(F in G){E[F]=D[C[F].names.get]()}return E},reconfigure:function(J,P,Q){var D=J.config,H=J.initialConfig,O=[],I=J.$configStrict,N,G,K,M,E,F,L;for(E in P){if(Q&&(E in H)){continue}D[E]=P[E];N=C[E];if(N){J[N.names.get]=N.initGetter||N.getInitGetter()}else{if(I){if(E!=="type"){Ext.log.error('No such config "'+E+'" for class '+J.$className)}continue}}O.push(E)}for(K=0,M=O.length;K<M;K++){E=O[K];N=C[E];if(N){F=N.names;G=F.get;if(J.hasOwnProperty(G)){J[F.set](P[E]);delete J[G]}}else{if(!I){N=Ext.Config.get(E);F=N.names;if(J[F.set]){J[F.set](P[E])}else{if(E!=="type"){Ext.Error.raise('Config "'+E+'" has no setter on class '+J.$className)}}}}}}}}());
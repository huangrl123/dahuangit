var Test={};var isCommonJS=typeof window=="undefined"&&typeof exports=="object";var jasmine={};if(isCommonJS){exports.jasmine=jasmine}jasmine.unimplementedMethod_=function(){throw new Error("unimplemented method")};jasmine.undefined=jasmine.___undefined___;jasmine.VERBOSE=false;jasmine.DEFAULT_UPDATE_INTERVAL=250;jasmine.MAX_PRETTY_PRINT_DEPTH=40;jasmine.DEFAULT_TIMEOUT_INTERVAL=5000;jasmine.CATCH_EXCEPTIONS=true;jasmine.getGlobal=function(){function A(){return this}return A()};jasmine.bindOriginal_=function(C,B){var A=C[B];if(A.apply){return function(){return A.apply(C,arguments)}}else{return jasmine.getGlobal()[B]}};jasmine.setTimeout=jasmine.bindOriginal_(jasmine.getGlobal(),"setTimeout");jasmine.clearTimeout=jasmine.bindOriginal_(jasmine.getGlobal(),"clearTimeout");jasmine.setInterval=jasmine.bindOriginal_(jasmine.getGlobal(),"setInterval");jasmine.clearInterval=jasmine.bindOriginal_(jasmine.getGlobal(),"clearInterval");jasmine.MessageResult=function(A){this.type="log";this.values=A;this.trace=new Error()};jasmine.MessageResult.prototype.toString=function(){var B="";for(var A=0;A<this.values.length;A++){if(A>0){B+=" "}if(jasmine.isString_(this.values[A])){B+=this.values[A]}else{B+=jasmine.pp(this.values[A])}}return B};jasmine.ExpectationResult=function(B){this.type="expect";this.matcherName=B.matcherName;this.passed_=B.passed;this.expected=B.expected;this.actual=B.actual;this.message=this.passed_?"Passed.":B.message;var A=(B.trace||new Error(this.message));this.trace=this.passed_?"":A};jasmine.ExpectationResult.prototype.toString=function(){return this.message};jasmine.ExpectationResult.prototype.passed=function(){return this.passed_};jasmine.getEnv=function(){var A=jasmine.currentEnv_=jasmine.currentEnv_||new jasmine.Env();return A};jasmine.isArray_=function(A){return jasmine.isA_("Array",A)};jasmine.isString_=function(A){return jasmine.isA_("String",A)};jasmine.isNumber_=function(A){return jasmine.isA_("Number",A)};jasmine.isA_=function(A,B){return Object.prototype.toString.apply(B)==="[object "+A+"]"};jasmine.pp=function(B){var A=new jasmine.StringPrettyPrinter();A.format(B);return A.string};jasmine.isDomNode=function(A){return A.nodeType>0};jasmine.any=function(A){return new jasmine.Matchers.Any(A)};jasmine.objectContaining=function(A){return new jasmine.Matchers.ObjectContaining(A)};jasmine.Spy=function(A){this.identity=A||"unknown";this.isSpy=true;this.plan=function(){};this.mostRecentCall={};this.argsForCall=[];this.calls=[]};jasmine.Spy.prototype.andCallThrough=function(){this.plan=this.originalValue;return this};jasmine.Spy.prototype.andReturn=function(A){this.plan=function(){return A};return this};jasmine.Spy.prototype.andThrow=function(A){this.plan=function(){throw A};return this};jasmine.Spy.prototype.andCallFake=function(A){this.plan=A;return this};jasmine.Spy.prototype.reset=function(){this.wasCalled=false;this.callCount=0;this.argsForCall=[];this.calls=[];this.mostRecentCall={}};jasmine.createSpy=function(A){var B=function(){B.wasCalled=true;B.callCount++;var E=jasmine.util.argsToArray(arguments);B.mostRecentCall.object=this;B.mostRecentCall.args=E;B.argsForCall.push(E);B.calls.push({object:this,args:E});return B.plan.apply(this,arguments)};var C=new jasmine.Spy(A);for(var D in C){B[D]=C[D]}B.reset();return B};jasmine.isSpy=function(A){return A&&A.isSpy};jasmine.createSpyObj=function(D,C){if(!jasmine.isArray_(C)||C.length===0){throw new Error("createSpyObj requires a non-empty array of method names to create spies for")}var B={};for(var A=0;A<C.length;A++){B[C[A]]=jasmine.createSpy(D+"."+C[A])}return B};jasmine.log=function(){var A=jasmine.getEnv().currentSpec;A.log.apply(A,arguments)};var spyOn=function(A,B){return jasmine.getEnv().currentSpec.spyOn(A,B)};if(isCommonJS){exports.spyOn=spyOn}var it=function(A,B){return jasmine.getEnv().it(A,B)};if(isCommonJS){exports.it=it}var xit=function(A,B){return jasmine.getEnv().xit(A,B)};if(isCommonJS){exports.xit=xit}var expect=function(A){return jasmine.getEnv().currentSpec.expect(A)};if(isCommonJS){exports.expect=expect}var runs=function(A){jasmine.getEnv().currentSpec.runs(A)};if(isCommonJS){exports.runs=runs}var waits=function(A){jasmine.getEnv().currentSpec.waits(A)};if(isCommonJS){exports.waits=waits}var waitsFor=function(B,A,C){jasmine.getEnv().currentSpec.waitsFor.apply(jasmine.getEnv().currentSpec,arguments)};if(isCommonJS){exports.waitsFor=waitsFor}var beforeEach=function(A){jasmine.getEnv().beforeEach(A)};if(isCommonJS){exports.beforeEach=beforeEach}var afterEach=function(A){jasmine.getEnv().afterEach(A)};if(isCommonJS){exports.afterEach=afterEach}var describe=function(B,A){return jasmine.getEnv().describe(B,A)};if(isCommonJS){exports.describe=describe}var xdescribe=function(B,A){return jasmine.getEnv().xdescribe(B,A)};if(isCommonJS){exports.xdescribe=xdescribe}jasmine.XmlHttpRequest=(typeof XMLHttpRequest=="undefined")?function(){function B(D){try{return D()}catch(C){}return null}var A=B(function(){return new ActiveXObject("Msxml2.XMLHTTP.6.0")})||B(function(){return new ActiveXObject("Msxml2.XMLHTTP.3.0")})||B(function(){return new ActiveXObject("Msxml2.XMLHTTP")})||B(function(){return new ActiveXObject("Microsoft.XMLHTTP")});if(!A){throw new Error("This browser does not support XMLHttpRequest.")}return A}:XMLHttpRequest;jasmine.util={};jasmine.util.inherit=function(B,A){var C=function(){};C.prototype=A.prototype;B.prototype=new C()};jasmine.util.formatException=function(B){var C;if(B.line){C=B.line}else{if(B.lineNumber){C=B.lineNumber}}var D;if(B.sourceURL){D=B.sourceURL}else{if(B.fileName){D=B.fileName}}var A=(B.name&&B.message)?(B.name+": "+B.message):B.toString();if(D&&C){A+=" in "+D+" (line "+C+")"}return A};jasmine.util.htmlEscape=function(A){if(!A){return A}return A.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")};jasmine.util.argsToArray=function(C){var B=[];for(var A=0;A<C.length;A++){B.push(C[A])}return B};jasmine.util.extend=function(A,B){for(var C in B){A[C]=B[C]}return A};jasmine.PrettyPrinter=function(){this.ppNestLevel_=0};jasmine.PrettyPrinter.prototype.format=function(A){this.ppNestLevel_++;try{if(A===jasmine.undefined){this.emitScalar("undefined")}else{if(A===null){this.emitScalar("null")}else{if(A===jasmine.getGlobal()){this.emitScalar("<global>")}else{if(A.jasmineToString){this.emitScalar(A.jasmineToString())}else{if(typeof A==="string"){this.emitString(A)}else{if(jasmine.isSpy(A)){this.emitScalar("spy on "+A.identity)}else{if(A instanceof RegExp){this.emitScalar(A.toString())}else{if(typeof A==="function"){this.emitScalar("Function")}else{if(typeof A.nodeType==="number"){this.emitScalar("HTMLNode")}else{if(A instanceof Date){this.emitScalar("Date("+A+")")}else{if(A.__Jasmine_been_here_before__){this.emitScalar("<circular reference: "+(jasmine.isArray_(A)?"Array":"Object")+">")}else{if(jasmine.isArray_(A)||typeof A=="object"){A.__Jasmine_been_here_before__=true;if(jasmine.isArray_(A)){this.emitArray(A)}else{this.emitObject(A)}delete A.__Jasmine_been_here_before__}else{this.emitScalar(A.toString())}}}}}}}}}}}}}finally{this.ppNestLevel_--}};jasmine.PrettyPrinter.prototype.iterateObject=function(A,B){for(var C in A){if(!A.hasOwnProperty(C)){continue}if(C=="__Jasmine_been_here_before__"){continue}B(C,A.__lookupGetter__?(A.__lookupGetter__(C)!==jasmine.undefined&&A.__lookupGetter__(C)!==null):false)}};jasmine.PrettyPrinter.prototype.emitArray=jasmine.unimplementedMethod_;jasmine.PrettyPrinter.prototype.emitObject=jasmine.unimplementedMethod_;jasmine.PrettyPrinter.prototype.emitScalar=jasmine.unimplementedMethod_;jasmine.PrettyPrinter.prototype.emitString=jasmine.unimplementedMethod_;jasmine.StringPrettyPrinter=function(){jasmine.PrettyPrinter.call(this);this.string=""};jasmine.util.inherit(jasmine.StringPrettyPrinter,jasmine.PrettyPrinter);jasmine.StringPrettyPrinter.prototype.emitScalar=function(A){this.append(A)};jasmine.StringPrettyPrinter.prototype.emitString=function(A){this.append("'"+A+"'")};jasmine.StringPrettyPrinter.prototype.emitArray=function(A){if(this.ppNestLevel_>jasmine.MAX_PRETTY_PRINT_DEPTH){this.append("Array");return}this.append("[ ");for(var B=0;B<A.length;B++){if(B>0){this.append(", ")}this.format(A[B])}this.append(" ]")};jasmine.StringPrettyPrinter.prototype.emitObject=function(A){if(this.ppNestLevel_>jasmine.MAX_PRETTY_PRINT_DEPTH){this.append("Object");return}var C=this;this.append("{ ");var B=true;this.iterateObject(A,function(D,E){if(B){B=false}else{C.append(", ")}C.append(D);C.append(" : ");if(E){C.append("<getter>")}else{C.format(A[D])}});this.append(" }")};jasmine.StringPrettyPrinter.prototype.append=function(A){this.string+=A};jasmine.PrettyPrinter.prototype.format=function(B){if(this.ppNestLevel_>40){throw new Error("jasmine.PrettyPrinter: format() nested too deeply!")}this.ppNestLevel_++;try{if(B===jasmine.undefined){this.emitScalar("undefined")}else{if(B===null){this.emitScalar("null")}else{if(B===jasmine.getGlobal()){this.emitScalar("<global>")}else{if(B.expectedClass){this.emitScalar(B.toString())}else{if(typeof B==="string"){this.emitString(B)}else{if(jasmine.isSpy(B)){this.emitScalar("spy on "+B.identity)}else{if(B instanceof RegExp){this.emitScalar(B.toString())}else{if(typeof B==="function"){this.emitScalar("Function")}else{if(typeof B.nodeType==="number"){this.emitScalar("HTMLNode")}else{if(B instanceof Date){this.emitScalar("Date("+B+")")}else{if(B.__Jasmine_been_here_before__){this.emitScalar("<circular reference: "+(jasmine.isArray_(B)?"Array":"Object")+">")}else{if(jasmine.isArray_(B)||typeof B=="object"){B.__Jasmine_been_here_before__=true;if(jasmine.isArray_(B)){this.emitArray(B)}else{this.emitObject(B)}delete B.__Jasmine_been_here_before__}else{this.emitScalar(B.toString())}}}}}}}}}}}}}catch(A){}finally{this.ppNestLevel_--}};jasmine.StringPrettyPrinter.prototype.getIndent=function(){var B="",A;for(A=0;A<this.ws;A++){B+=" "}return B};jasmine.StringPrettyPrinter.prototype.emitObject=function(B){var D=this,C=true,E;this.append("{\n");if(!this.ws){this.ws=0}this.ws+=4;E=this.getIndent();var A=0;this.iterateObject(B,function(F,G){if(C){C=false}else{D.append(",\n")}D.append(E+F);D.append(" : ");if(G){D.append("<getter>")}else{if(typeof B[F]!=="object"){D.format(B[F])}else{D.append("<Object>")}}});this.ws-=4;E=this.getIndent();this.append(E+"\n"+E+"}")};jasmine.browser={};jasmine.browser.isIE=!!window.ActiveXObject;jasmine.browser.isIE6=jasmine.browser.isIE&&!window.XMLHttpRequest;jasmine.browser.isIE7=jasmine.browser.isIE&&!!window.XMLHttpRequest&&!document.documentMode;jasmine.browser.isIE8=jasmine.browser.isIE&&!!window.XMLHttpRequest&&!!document.documentMode&&!window.performance;jasmine.browser.isIE9=jasmine.browser.isIE&&!!window.performance;jasmine.browser.isSafari3=/safari/.test(navigator.userAgent.toLowerCase())&&/version\/3/.test(navigator.userAgent.toLowerCase());jasmine.browser.isOpera=!!window.opera;jasmine.browser.isOpera11=jasmine.browser.isOpera&&parseInt(window.opera.version(),10)>10;jasmine.array={};jasmine.array.indexOf=function(A,E,B){if(A.indexOf){return A.indexOf(E,B)}var C,D=A.length;for(C=(B<0)?Math.max(0,D+B):B||0;C<D;C++){if(A[C]===E){return C}}return -1};jasmine.array.remove=function(A,B){var C=this.indexOf(A,B);if(C!==-1){A.splice(C,1)}return A};jasmine.Dom=function(D){var F,G,B,A,C,E;D=D||{};if(D.tagName){return D}F=document.createElement(D.tag||"div");G=D.children||[];B=G.length;delete D.tag;for(C=0;C<B;C++){A=G[C];F.appendChild(new jasmine.Dom(A))}delete D.children;if(D.cls){jasmine.Dom.setCls(F,D.cls);delete D.cls}if(D.html){jasmine.Dom.setHTML(F,D.html);delete D.html}if(D.style){jasmine.Dom.setStyle(F,D.style);delete D.style}for(E in D){if(!D.hasOwnProperty(E)){continue}F[E]=D[E]}return F};jasmine.Dom.addCls=function(D,C){var E,A,B;if(!D.className){jasmine.Dom.setCls(D,C);return}E=D.className.split(" ");A=E.length;for(B=0;B<A;B++){if(E[B]==C){return}}D.className=D.className+" "+C};jasmine.Dom.removeCls=function(E,C){var F,A,D,B;if(!E.className){return}D=[];F=E.className.split(" ");A=F.length;for(B=0;B<A;B++){if(F[B]!==C){D.push(F[B])}}E.className=D.join(" ")};jasmine.Dom.hasCls=function(E,C){var F,A,D,B;if(!E.className){return}F=E.className.split(" ");A=F.length;for(B=0;B<A;B++){if(F[B]===C){return true}}return false};jasmine.Dom.setCls=function(B,A){B.className=A};jasmine.Dom.setHTML=function(B,A){B.innerHTML=A};jasmine.Dom.setStyle=function(B,A){var C;for(C in A){if(A.hasOwnProperty(C)){B.style[C]=A[C]}}};Test.OptionsImpl=function(){this.optionCheckBoxesEl={};this.options=this.urlDecode(window.location.search.substring(1));this.options.remote=window.location.toString().search("http:")!==-1;this.startAutoReloadTask()};Test.OptionsImpl.prototype.get=function(){return this.options};Test.OptionsImpl.prototype.urlEncode=function(E){var G=[],C=encodeURIComponent,A,F,B,D;for(F in E){if(!E.hasOwnProperty(F)){continue}A=E[F];if(jasmine.isArray_(A)){B=A.length;for(D=0;D<B;D++){G.push(F+"="+C(A[D]))}}else{G.push(F+"="+C(A))}}return G.join("&")};Test.hashString=function(B,D){D=D||0;for(var E,A=0,C=B.length;A<C;++A){E=B.charCodeAt(A);D=E+(D<<6)+(D<<16)-D}return D};Test.OptionsImpl.prototype.urlDecode=function(F){var I={},G,J,C,E,A,H,D;if(F!=""){G=F.split("&");J=decodeURIComponent;D=G.length;for(H=0;H<D;H++){A=G[H].split("=");C=J(A[0]);E=J(A[1]);I[C]=!I[C]?E:[].concat(I[C]).concat(E)}}function B(K){var L=parseInt(K,10);if(String(L)!==K){L=Test.hashString(K)}return L}if(I.specs){I.specs=jasmine.isArray_(I.specs)?I.specs:[I.specs];D=I.specs.length;for(H=0;H<D;H++){I.specs[H]=B(I.specs[H])}}else{I.specs=[]}if(I.suites){I.suites=jasmine.isArray_(I.suites)?I.suites:[I.suites];D=I.suites.length;for(H=0;H<D;H++){I.suites[H]=B(I.suites[H])}}else{I.suites=[]}return I};Test.OptionsImpl.prototype.renderCheckbox=function(B,D){var A=this,C=new jasmine.Dom({tag:"input",cls:"option "+B,type:"checkbox",onclick:function(){A.onCheckboxClick.apply(A,arguments)}});A.optionCheckBoxesEl[B]=C;return new jasmine.Dom({tag:"span",cls:"show",children:[C,{tag:"label",html:D}]})};Test.OptionsImpl.prototype.check=function(){var B,A;for(B in this.options){if(!this.options.hasOwnProperty(B)){continue}A=this.optionCheckBoxesEl[B];if(A){A.checked=this.options[B]}}};Test.OptionsImpl.prototype.onCheckboxClick=function(F){var A,C,E,B,D;F=F||window.event;A=F.target||F.srcElement;C=A.className.split(" ")[1];if(A.checked){this.options[C]=true}else{delete this.options[C]}};Test.OptionsImpl.prototype.reloadWindow=function(A){if(A){this.options.specs=[];this.options.suites=[]}window.location.search=this.urlEncode(this.options)};Test.OptionsImpl.prototype.startAutoReloadTask=function(){var B=this;if(B.options.autoReload){var A=setInterval(function(){if(Test.SandBox.isRunning()){clearInterval(A);setTimeout(function(){B.reloadWindow()},2000)}},1500)}};Test.OptionsImpl.prototype.isChecked=function(A){var C=this.options.specs,B=this.options.suites,D=A.id;if(A.suite){return C&&jasmine.array.indexOf(C,D)!==-1}else{return B&&jasmine.array.indexOf(B,D)!==-1}return false};Test.Options=new Test.OptionsImpl();Test.SandBoxImpl=function(){};Test.SandBoxImpl.prototype.domReady=function(A){if(document.addEventListener){window.addEventListener("load",A,false)}else{window.attachEvent("onload",A,false)}};Test.SandBoxImpl.prototype.setup=function(A){var B=this;B.requires=A.requires;B.domReady(function(){B.reporter=new Test.Reporter();B.createIframe()})};Test.SandBoxImpl.prototype.createIframe=function(){var C=this,A,B,E;C.options=Test.Options.get();var D=C.options.quirksMode?"iframe-quirks.html?loadSpecs=true":"iframe.html?loadSpecs=true";D+="&compiled="+!!C.options.compiled;if(C.options.specsset){D+="&specsset="+C.options.specsset}A=new jasmine.Dom({tag:"iframe",cls:"sandboxIframe",name:"sandbox",frameBorder:0,src:D});C.reporter.getIframeContainer().appendChild(A);B=A.contentWindow||window.frames[A.name];E=A.contentDocument||B.document;this.iframe=A;this.win=B;this.doc=E};Test.SandBoxImpl.prototype.getIframe=function(){return this.iframe};Test.SandBoxImpl.prototype.getWin=function(){return this.win};Test.SandBoxImpl.prototype.getDoc=function(){return this.doc};Test.SandBoxImpl.prototype.getBody=function(){return this.getDoc().body};Test.SandBoxImpl.prototype.getHead=function(){return this.getDoc().getElementsByTagName("head")[0]};Test.SandBoxImpl.prototype.save=function(B){var E=this.getDoc(),D=E.createElement("div"),I=this.getBody(),A=I&&I.childNodes||[],C=A.length,G=0,F,H=this.lengthWas||(this.lengthWas=0);if(!this.options||!this.options.disableBodyClean){}if(C!=H){if(!window.headless){this.reporter.log(">> Warning the document.body dom element contains childNodes after spec execution !<br/>Spec : "+jasmine.util.htmlEscape(B.getFullName())+' <a href="?'+Test.Options.urlEncode({specs:[B.id],suites:[],disableBodyClean:true})+'">Load this spec only and disable body autoclean</a><br/>',"warning")}else{this.reporter.log("Warning: "+B.getFullName()+"doesn't clean properly the document.body.")}this.lengthWas=C}};Test.SandBoxImpl.prototype.clearDomElements=function(){var F=this.getDoc(),D=this.getBody(),A=D.childNodes,B=A.length,C,E;if(!this.options.disableBodyClean){for(C=0;C<B;C++){E=A[C];if(E){D.removeChild(E)}}}};Test.SandBoxImpl.prototype.clearComponents=function(){var C=this,B=C.getWin(),F,E,D,A;if(B.Ext&&B.Ext.ComponentManager){F=B.Ext.ComponentManager.all.getArray();D=F.length;for(A=0;A<D;A++){E=F[A];E.destroy()}}};Test.SandBoxImpl.prototype.isRunning=function(){return !this.getWin().jasmine.getEnv().currentRunner_.queue.isRunning()};Test.SandBoxImpl.prototype.iScope=function(o){if(typeof o==="function"){o="("+o.toString()+")();"}return Test.SandBox.getWin().eval(o)};Test.SandBox=new Test.SandBoxImpl();var iScope=Test.SandBox.iScope;Test.CodeHighLighter=function(A){this.source=A.source;this.lineNumber=A.lineNumber;this.linesFromJsCoverage=A.linesFromJsCoverage;this.beautify=A.beautify||this.lineNumber===undefined;this.highLightCode=A.highLightCode===false?false:true;this.matchedComments=[];this.matchedStrings=[]};Test.CodeHighLighter.prototype.regExps={strings:/"([^\\"\n]|\\.)*"|'([^\\'\n]|\\.)*'|"([^\\"\n]|\\\n)*"|'([^\\'\n]|\\\n)*'/gm,comments:/\/\/.*$|\/\*[\s\S]*?\*\//gm,operators:/([\+\-\*\/=\?!]{1,3}|[\-\+]{1,2})/g,numbers:/\b([0-9]+)\b/g,keywords:[/\b(break)\b/g,/\b(case)\b/g,/\b(catch)\b/g,/\b(continue)\b/g,/\b(default)\b/g,/\b(delete)\b/g,/\b(do)\b/g,/\b(else)\b/g,/\b(false)\b/g,/\b(for)\b/g,/\b(function)\b/g,/\b(if)\b/g,/\b(in)\b/g,/\b(instanceof)\b/g,/\b(new)\b/g,/\b(null)\b/g,/\b(return)\b/g,/\b(switch)\b/g,/\b(this)\b/g,/\b(throw)\b/g,/\b(true)\b/g,/\b(try)\b/g,/\b(typeof)\b/g,/\b(var)\b/g,/\b(while)\b/g,/\b(with)\b/g],commasInsideParenthesis:/\(([^\(\)\{\}])+\)/g,arrayWithOneElement:/\[\n([^,\]]*)\n\]/g,commaBracket:/,\n\s*\{/g,multipleWhiteSpaces:/(\s+)/g,semiColon:/;/g,comma:/,/g,openedBrackets:/([\{\[])/g,closedBrackets:/([\}\]])/g,emptyObject:/\{\n\s*\n\}/g,openedBracketsWithNewLine:/[\{\[]$/g,closedBracketsWithNewLine:/^\s*[\}\]]/g,unwantedNewLines:/\n([\n,;\)])/g,newLine:/\n/g,firstSpaces:/^(\s)+/};Test.CodeHighLighter.prototype.matchObjects=function(C,A,D,B){D.push({origValue:C,value:'<span class="jsHl'+B+'">'+jasmine.util.htmlEscape(C).replace("$","$\b")+"</span>",start:A,end:A+C.length})};Test.CodeHighLighter.prototype.isInside=function(A,F){var G=A.start,B=A.end,C=F.length,D,E;for(E=0;E<C;E++){D=F[E];if(D.start<G&&G<D.end){return true}}return false};Test.CodeHighLighter.prototype.fixOverlaps=function(G,F,E){var C=[],A=G.length,B,D;for(D=0;D<A;D++){B=G[D];if(!this.isInside(B,F)){this.source=this.source.replace(B.origValue,E);C.push(B)}}return C};Test.CodeHighLighter.prototype.saveStringsAndComments=function(){var C=this.regExps.comments,A=this.regExps.strings,B;while((B=C.exec(this.source))){this.matchObjects(B[0],B.index,this.matchedComments,"Comment")}while((B=A.exec(this.source))){this.matchObjects(B[0],B.index,this.matchedStrings,"String")}this.matchedComments=this.fixOverlaps(this.matchedComments,this.matchedStrings,"%%%%comment%%%%");this.matchedStrings=this.fixOverlaps(this.matchedStrings,this.matchedComments,"%%%%string%%%%")};Test.CodeHighLighter.prototype.processStringsAndComments=function(){var B=this.matchedComments,A=B?B.length:0,D,C;for(C=0;C<A;C++){D=B[C].value;this.source=this.source.replace("%%%%comment%%%%",D)}B=this.matchedStrings;A=B?B.length:0;for(C=0;C<A;C++){D=B[C].value;this.source=this.source.replace("%%%%string%%%%",D)}};Test.CodeHighLighter.prototype.processOperatorsNumbersKeywords=function(){var C=this.regExps,D=C.keywords,A=D.length,B;this.source=jasmine.util.htmlEscape(this.source).replace(C.operators,'<span class="jsHlOperator">$1</span>').replace(C.numbers,'<span class="jsHlNumber">$1</span>');for(B=0;B<A;B++){this.source=this.source.replace(D[B],'<span class="jsHlKeyword">$1</span>')}};Test.CodeHighLighter.prototype.process=function(){this.saveStringsAndComments();if(this.beautify){this.prepareIndent();this.doIndent()}this.processOperatorsNumbersKeywords();this.processStringsAndComments();return this.source};Test.CodeHighLighter.prototype.renderJsSources=function(){var B="No code found.",D=this.linesFromJsCoverage,J=this.lineNumber,H=this.source,C,A,F,E,I,G;if(H){H=this.highLightCode?this.process():H;C=H.split("\n");I=C.length;B='<table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="lineNumbers">';for(F=0;F<I;F++){E="";G="";if(J){E=F===(J-1)?" error":""}if(D){G=!isNaN(D[F+1])?" lineNumberGreen":"";G=D[F+1]===0?" lineNumberRed":G}B+='<div class="lineNumber'+E+G+'">'+(F+1)+"</div>"}B+='</td><td><pre class="code">'+H+"</pre></td></tr></tbody></table>"}this.source=B;return this.source};Test.CodeHighLighter.prototype.prepareIndent=function(){var C=this.regExps,B,A,D,E;this.source=this.source.replace(C.multipleWhiteSpaces," ").replace(C.semiColon,";\n").replace(C.comma,",\n").replace(C.openedBrackets,"$1\n").replace(C.closedBrackets,"\n$1\n");B=this.source.match(C.commasInsideParenthesis);A=B?B.length:0;for(D=0;D<A;D++){E=B[D];this.source=this.source.replace(E,E.replace(C.newLine,""))}this.source=this.source.replace(C.arrayWithOneElement,"[$1]").replace(C.emptyObject,"{}").replace(C.commaBracket,", {").replace(C.unwantedNewLines,"$1")};Test.CodeHighLighter.prototype.addWhiteSpaces=function(C){var B="",A;for(A=0;A<C;A++){B+=" "}return B};Test.CodeHighLighter.prototype.doIndent=function(){var A=this.regExps,D=[],E=0,G=this.source.split("\n"),B=G.length,H="",F,C;for(C=0;C<B;C++){F=G[C].replace(A.firstSpaces,"");if(F!==""){if(F.search(A.closedBracketsWithNewLine)!==-1){E=Math.max(E-4,0);H=this.addWhiteSpaces(E)}D.push(H+F);if(F.search(A.openedBracketsWithNewLine)!==-1){E+=4;H=this.addWhiteSpaces(E)}}}this.source=D.join("\n")};Test.BadGlobalsImpl=function(A){this.results=[]};Test.BadGlobalsImpl.prototype.setup=function(){var B=this,A=Test.SandBox.getWin(),C;A.addGlobal=function(){B.addGlobal.apply(B,arguments)};B.allowedGlobals={};for(C in A){B.allowedGlobals[C]=true}B.allowedGlobals._firebug=true;B.allowedGlobals._createFirebugConsole=true;B.allowedGlobals.loadFirebugConsole=true;B.allowedGlobals.console=true};Test.BadGlobalsImpl.prototype.report=function(E,F){var G=this.allowedGlobals,B=Test.SandBox.getWin(),C,A,D;for(C in B){if(!G[C]){D=jasmine.pp(B[C]);A=">> Bad global variable found in "+(F?F.description:"global scope")+"<br/>"+C+" = "+D;E.log(A,"warning");this.results[C]={where:(F?("in suite"+F.description):"global scope"),value:D};G[C]=true}}};Test.BadGlobalsImpl.prototype.addGlobal=function(A){this.allowedGlobals[A]=true};if(!jasmine.browser.isIE&&!jasmine.browser.isOpera){Test.BadGlobals=new Test.BadGlobalsImpl()}Test.jsCoverage={executed:0,coverage:{},isEnabled:function(){return !!Test.SandBox.getWin()._$jscoverage},getCoverage:function(){return this.coverage},getSandBoxCoverage:function(){return Test.SandBox.getWin()._$jscoverage},add:function(F){var B=this.getSandBoxCoverage(),C,A,D,E;if(!B){return}C=this.getFileName(F.coverageFile);A=B[C];if(B&&A){for(D in A){if(!A.hasOwnProperty(D)){continue}E=A[D]}}},getFileName:function(B){var A=this.getSandBoxCoverage(),C;if(!A||!B){return}if(A[B]){return B}for(C in A){if(C.search(B)!==-1){return C}}},update:function(H){var F=this.getSandBoxCoverage(),B=0,G=0,C,A,E,D;if(!F){return}E=this.getFileName(H.coverageFile);D=F[E];if(D){H.jscoverage={file:[]};for(C in D){if(!D.hasOwnProperty(C)){continue}A=D[C];H.jscoverage.file[C]=A;if(!isNaN(C)&&A!==undefined){B=B+1;if(A!==0){this.executed=this.executed+1;G=G+1}}}H.jscoverage.percentage=((G/B)*100).toFixed(2);H.jscoverage.statements=B;H.jscoverage.executed=G;this.coverage[E]=H.jscoverage.file;this.coverage[E].percentage=H.jscoverage.percentage;this.coverage[E].statements=H.jscoverage.statements;this.coverage[E].executed=H.jscoverage.executed}},getSuiteCoverage:function(A){if(A.jscoverage){return" - Code coverage: "+A.jscoverage.percentage+"%"}return""},getTotal:function(){if(this.percentage){return" - Code coverage: "+this.percentage+"%"}return""},updateTotal:function(){var I=this.getSandBoxCoverage(),B=0,F,H,A,C,G,E,D;if(!I){return""}for(H in I){if(!I.hasOwnProperty(H)){continue}F=I[H];G=0;E=0;D=!this.coverage[H];if(D){this.coverage[H]=[]}for(C in F){if(!F.hasOwnProperty(C)){continue}A=F[C];if(!isNaN(C)){if(A!==undefined){B=B+1;G=G+1}if(D){this.coverage[H][C]=0}}}if(D){this.coverage[H].source=F.source;this.coverage[H].statements=G;this.coverage[H].executed=E;this.coverage[H].percentage=((E/G)*100).toFixed(2)}}this.statements=B;this.percentage=((this.executed/B)*100).toFixed(2)}};Test.panel={};Test.panel.Blocks=function(A){var H=A.spec.queue.blocks,D=H.length,C="panel blocks",B=[],E,F,G;for(E=0;E<D;E++){F=H[E];if(F.func){B.push({cls:"blockTitle "+(F.func.typeName||"specSources"),html:F.func.typeName||'it("'+jasmine.util.htmlEscape(A.spec.description)+'")'});G=new Test.CodeHighLighter({source:F.func.toString()});B.push({cls:"sources",html:G.renderJsSources()})}}this.el=new jasmine.Dom({cls:C,children:B});return this};Test.panel.Blocks.prototype.remove=function(){this.el.parentNode.removeChild(this.el)};Test.panel.Sandbox=function(A){this.persist=true;this.render();return this};Test.panel.Sandbox.prototype.render=function(){this.el=new jasmine.Dom({cls:"panel sandbox hideMe"})};Test.panel.Infos=function(){this.el=new jasmine.Dom({tag:"div",cls:"panel infos",children:[{cls:"logs"}]});this.logs=this.el.childNodes[0];this.persist=true;return this};Test.panel.Infos.prototype.log=function(C,A){var B=this.logs.appendChild(new jasmine.Dom({cls:"infoMessage",html:C}));if(A){jasmine.Dom.addCls(B,A)}};Test.panel.jsCoverage=function(A){this.el=new jasmine.Dom({tag:"div",cls:"panel jsCoverage",children:[{cls:"sources",html:new Test.CodeHighLighter({source:A.suite.jscoverage.file.source.join("\n"),linesFromJsCoverage:A.suite.jscoverage.file,highLightCode:false}).renderJsSources()}]});return this};Test.panel.jsCoverage.prototype.remove=function(){this.el.parentNode.removeChild(this.el)};Test.panel.jsCoverageSummary=function(A){var B=this;B.el=new jasmine.Dom({tag:"div",cls:"panel jsCoverageSummary hideMe",onclick:function(){B.onClick.apply(B,arguments)},children:[{cls:"sbody"}]});B.body=B.el.childNodes[0];B.persist=true;this.renderSummary();return B};Test.panel.jsCoverageSummary.prototype.renderSummary=function(){var A=Test.jsCoverage.getCoverage(),B,C;if(!this.summary){C='<table class="summary" border="0" cellpadding="0" cellspacing="0"><tbody>';C+='<tr class="line header"><td class="fileName">File</td><td class="statements">Statements</td><td class="executed">Executed</td><td class="percentage">Percentage</td></tr>';C+='<tr class="line total">';C+='<td class="fileName">Total</td>';C+='<td class="statements">'+Test.jsCoverage.statements+"</td>";C+='<td class="executed">'+Test.jsCoverage.executed+"</td>";C+='<td class="percentage">'+this.renderPercentage(Test.jsCoverage.percentage)+"</td>";C+="</tr>";for(B in A){if(!A.hasOwnProperty(B)){continue}C+='<tr class="line">';C+='<td class="fileName"><a>'+B+"</a></td>";C+='<td class="statements">'+A[B].statements+"</td>";C+='<td class="executed">'+A[B].executed+"</td>";C+='<td class="percentage">'+this.renderPercentage(A[B].percentage)+"</td>";C+="</tr>"}C+="</tbody></table>";this.summary=C}this.body.innerHTML=this.summary};Test.panel.jsCoverageSummary.prototype.renderPercentage=function(A){var B=A+'%<div class="limit" style="width:300px;">';B+='<div class="result" style="width:'+3*A+'px;"></div>';B+="</div>";return B};Test.panel.jsCoverageSummary.prototype.onClick=function(B){var A;B=B||window.event;A=B.target||B.srcElement;if(A.tagName==="A"){this.renderSource(Test.jsCoverage.getCoverage()[A.innerHTML])}if(jasmine.Dom.hasCls(A,"back")){this.renderSummary()}};Test.panel.jsCoverageSummary.prototype.renderSource=function(A){this.body.innerHTML="";this.body.appendChild(new jasmine.Dom({cls:"back",html:"Back"}));this.body.appendChild(new jasmine.Dom({cls:"sources",html:new Test.CodeHighLighter({source:A.source.join("\n"),linesFromJsCoverage:A,highLightCode:false}).renderJsSources()}))};Test.panel.StackTrace=function(D){this.spec=D.spec;this.badLinesEls=[];var E=this.spec.results().getItems(),A=E.length,C,F,G,B;if(jasmine.browser.isIE||!this.spec.hasError){return this}for(B=0;B<A;B++){C=E[B];if(C.type=="expect"&&C.passed&&!C.passed()){if(C.error){F=C.error;break}}}if(F){G=this.extractStackTrace(F);this.el=new jasmine.Dom({tag:"div",cls:"panel stackTrace",children:this.renderStackLines(G)})}return this};Test.panel.StackTrace.prototype.extractStackTrace=function(C){var J=C.stack||C.stackTrace,G=[],D,A,E,F,B,I,H;if(J){D=J.split("\n");E=D.length;for(F=0;F<E;F++){A=D[F];if(A.search("jasmine.js")===-1){B=this.extractFileAndLine(A);if(B){G.push(B)}}}}else{I=C.sourceURL||C.fileName;H=C.line||C.lineNumber;if(I&&H){G.push({file:I,lineNumber:H})}}return G};Test.panel.StackTrace.prototype.extractRe=/((http:\/\/|file:\/\/\/).*\.js)[^:]*:(\d*)/;Test.panel.StackTrace.prototype.extractFileAndLine=function(B){var A=B.match(this.extractRe);if(!A){return null}return{file:A[1],lineNumber:A[3]}};Test.panel.StackTrace.prototype.renderStackLines=function(B){var C=[],D=B.length,E,A,F,G,H;for(F=0;F<D;F++){A=B[F];G=A.file;H=parseInt(A.lineNumber,0);E=new jasmine.Dom({cls:"stackTraceLine",children:[{cls:"fileName",html:"File: "+G+" (line "+H+")"},{cls:"sources",html:this.renderTraceFileSource(G,H)}]});this.badLinesEls.push({el:E.childNodes[1],line:H});C.push(E)}return C};Test.panel.StackTrace.prototype.getFile=function(B){var A;if(jasmine.browser.isIE||Test.Options.remote){return null}this.downloadedFiles=this.downloadedFiles||{};if(!this.downloadedFiles[B]){A=new XMLHttpRequest();if(!A){return null}A.open("GET",B+"?"+(new Date()).getTime(),false);A.send("");this.downloadedFiles[B]=A.responseText}return this.downloadedFiles[B]};Test.panel.StackTrace.prototype.jscoverageFileRe=/(http:\/\/|file:\/\/\/)[^\/]*/;Test.panel.StackTrace.prototype.renderTraceFileSource=function(F,G){var D=true,B,H,E,C,A;if(Test.SandBox.getWin()._$jscoverage){H=SandBox.getWin()._$jscoverage[F.replace(this.jscoverageFileRe,"")];if(H){D=false;B=H.source.join("\n");linesFromJsCoverage={};C=H.length;for(E=0;E<C;E++){A=H[E];if(A===0){linesFromJsCoverage[E-1]=true}}}}B=B||this.getFile(F);return new Test.CodeHighLighter({source:B,highLightCode:D,lineNumber:G}).renderJsSources()};Test.panel.StackTrace.prototype.afterRender=function(){var B=this.badLinesEls.length,F,G,A,C,E,D;for(C=0;C<B;C++){F=this.badLinesEls[C];A=F.el;E=16;D=A.clientHeight/E;A.scrollTop=Math.max(F.line-D/2,0)*E}this.badLinesEls=[]};Test.panel.StackTrace.prototype.remove=function(){this.el.parentNode.removeChild(this.el)};Test.panel.TabPanel=function(A){var B=this;B.options=Test.Options.get();B.spec=A.spec;B.container=A.container;B.el=new jasmine.Dom({cls:"tabpanel",onclick:function(){B.onTabPanelClick.apply(B,arguments)},children:[{cls:"toolBar"},{cls:"panels"}]});B.toolbar=B.el.childNodes[0];B.body=B.el.childNodes[1];B.children=[];B.tabs=[];B.container.appendChild(B.el);B.renderToolBar();B.add(new Test.panel.Infos({}));B.add(new Test.panel.Sandbox({}));if(B.options.panel){B.activatePanel(B.options.panel)}return B};Test.panel.TabPanel.prototype.add=function(A){if(A.el){this.body.appendChild(A.el)}if(A.afterRender){A.afterRender()}this.children.push(A);if(A.afterRender){A.afterRender()}};Test.panel.TabPanel.prototype.addTab=function(B,C,D){var A=this.toolbar.appendChild(new jasmine.Dom({tag:"span",cls:"toolbarTab "+B,html:C}));this.tabs.push({el:A,persist:D})};Test.panel.TabPanel.prototype.activatePanel=function(E){var F=this.children,B=F.length,C=false,A,D;for(D=0;D<B;D++){A=F[D].el;jasmine.Dom.addCls(A,"hideMe");if(jasmine.Dom.hasCls(A,E)){jasmine.Dom.removeCls(A,"hideMe");if(F[D].persist&&E!=="jsCoverageSummary"){this.options.panel=E}else{delete this.options.panel}C=true}}if(C){return}if(this.spec){if(E==="blocks"){this.add(new Test.panel.Blocks({spec:this.spec}))}if(E==="stackTrace"){this.add(new Test.panel.StackTrace({spec:this.spec}))}}if(this.suite&&this.suite.jscoverage){if(E==="jsCoverage"){this.add(new Test.panel.jsCoverage({suite:this.suite}))}}};Test.panel.TabPanel.prototype.onTabPanelClick=function(B){var A;B=B||window.event;A=B.target||B.srcElement;if(jasmine.Dom.hasCls(A,"toolbarTab")){this.onTabClick(A)}};Test.panel.TabPanel.prototype.onTabClick=function(A){var D,F,B,E,C;jasmine.Dom.addCls(A,"selected");D=this.toolbar.childNodes;F=this.body.childNodes;B=D.length;for(C=0;C<B;C++){E=D[C];if(E!=A){jasmine.Dom.removeCls(E,"selected")}}this.activatePanel(A.className.split(" ")[1])};Test.panel.TabPanel.prototype.renderToolBar=function(){var A=this.spec,C=this.suite,B=this.toolbar;if(this.tabs.length===0){this.addTab("infos selected","Console",true);this.addTab("sandbox","Iframe",true)}else{jasmine.Dom.addCls(this.tabs[0].el,"selected")}if(A){this.addTab("blocks","Blocks");if(!jasmine.browser.isIE&&!jasmine.browser.isOpera&&this.spec.hasError){this.addTab("stackTrace","Stack Trace")}}if(C&&C.jscoverage){this.addTab("jsCoverage","Suite Coverage")}};Test.panel.TabPanel.prototype.resetToolBar=function(){var D=this.tabs,A=D.length,C,B;for(B=A-1;B>=0;B--){C=D[B];if(!C.persist){this.toolbar.removeChild(C.el);jasmine.array.remove(D,C)}jasmine.Dom.removeCls(C.el,"selected")}this.renderToolBar()};Test.panel.TabPanel.prototype.resetPanels=function(){var D=this.children,A=D.length,C,B;for(B=A-1;B>=0;B--){C=D[B];if(!C.persist){C.remove();jasmine.array.remove(D,C)}jasmine.Dom.addCls(C.el,"hideMe")}if(D[0]){jasmine.Dom.removeCls(D[0].el,"hideMe")}};Test.panel.TabPanel.prototype.setSpec=function(A){this.spec=A;delete this.suite;this.resetToolBar();this.resetPanels()};Test.panel.TabPanel.prototype.setSuite=function(A){this.suite=A;delete this.spec;this.resetToolBar();this.resetPanels()};Test.panel.TabPanel.prototype.resize=function(A){this.el.style.height=A+"px";this.body.style.height=A-40+"px"};Test.panel.TabPanel.prototype.addCoverageSummary=function(){this.addTab("jsCoverageSummary","Coverage Summary",true);this.add(new Test.panel.jsCoverageSummary({}))};Test.panel.TreeGrid=function(A){var B=this;B.options=Test.Options.get();B.el=document.body.appendChild(new jasmine.Dom({tag:"div",cls:"treegrid",onmousedown:function(){B.onMouseDown.apply(B,arguments)},onmouseup:function(){B.onMouseUp.apply(B,arguments)},onmousemove:function(){B.onMouseMove.apply(B,arguments)},children:[{cls:"header",children:[{cls:"logo",html:"Sencha"},{cls:"statusMessage"},{cls:"toolBar",children:[{tag:"span",cls:"options",children:[Test.Options.renderCheckbox("showPassed","Show passed"),Test.Options.renderCheckbox("showDisabled","Show disabled"),Test.Options.renderCheckbox("collapseAll","Collapse all"),Test.Options.renderCheckbox("disableBodyClean","Disable Body Autoclean"),Test.Options.renderCheckbox("disableCacheBuster","Disable CacheBuster"),Test.Options.renderCheckbox("showTimings","Show Timings"),Test.Options.renderCheckbox("verbose","Show jasmine logs"),Test.Options.renderCheckbox("autoReload","Automatic reload"),Test.Options.renderCheckbox("quirksMode","Quirks Mode")]},{tag:"a",cls:"actionLink",html:"Run checked",onclick:function(){Test.Options.reloadWindow()}},{tag:"a",cls:"actionLink",html:"Run all",onclick:function(){Test.Options.reloadWindow(true)}}]}]},{tag:"div",cls:"tbody",onclick:function(){B.onBodyClick.apply(B,arguments)}},{cls:"resizer",html:"......"}]}));B.tabPanel=new Test.panel.TabPanel({container:B.el});Test.Options.check();B.header=B.el.childNodes[0];B.statusMessage=B.header.childNodes[1];B.toolBar=B.header.childNodes[2];B.body=B.el.childNodes[1];B.resizer=B.el.childNodes[2];B.suites={};B.specs={};B.suitesEls={};B.specsEls={};if(B.options.resizer){B.tabPanel.resize(parseInt(B.options.resizer,10))}B.resizeBody();window.onresize=function(){B.resizeBody()}};Test.panel.TreeGrid.prototype.addSuite=function(I){var E={},H=I.parentSuite,A=18,F=I.isDisabled()?"xdescribe :":"describe: ",B="noexpand",D,C;if(I.children_.length!==0){B=this.options.collapseAll?"expand":"collapse"}if(H){this.suitesEls[H.id]||this.addSuite(H);while(H){A+=18;H=H.parentSuite}}D=this.createRow(this.options.collapseAll&&I.parentSuite,I);for(C in this.options){if(!this.options.hasOwnProperty(C)){continue}E[C]=this.options[C]}E.suite=I.id;delete E.spec;this.suitesEls[I.id]=new jasmine.Dom({tag:"div",id:"suite-"+I.id,cls:"suite "+(I.isDisabled()?"disabled":""),style:{"paddingLeft":A+"px"},children:[{cls:B},{tag:"span",cls:"description",html:F+I.description}]});D.appendChild(this.suitesEls[I.id]);var G=new jasmine.Dom({tag:"div"});G.style.clear="both";D.appendChild(G);this.suites[I.id]=I;return this.suitesEls[I.id]};Test.panel.TreeGrid.prototype.updateSuiteEl=function(C,B){var A=this.suitesEls[C.id].childNodes[1];jasmine.Dom.setHTML(A,A.innerHTML+B)};Test.panel.TreeGrid.prototype.addSpec=function(C){var F={},A=18,L=C.suite,B=C.time?" ("+C.time+"s)":"",E,H,J,D,G,I;if(C.isEnabled()){H="it ";J=C.results().passed()?"passed":"failed"}else{H="xit ";J="disabled"}if(L){this.suitesEls[L.id]||this.addSuite(L);while(L){A+=18;L=L.parentSuite}}E=this.createRow(this.options.collapseAll,C);for(D in this.options){if(this.options.hasOwnProperty(D)){F[D]=this.options[D]}}F.spec=C.id;delete F.suite;G={id:"spec-"+C.id,cls:"spec "+J,style:{"paddingLeft":A+"px"},children:[{cls:this.options.collapseAll?"expand":"collapse"},{tag:"span",cls:"description",html:H+C.description+B}]};I=this.renderSpecResults(C);if(this.options.collapseAll){I.style.display="none"}if(I.innerHTML===""){G.children[0].cls="noexpand"}G.children.push(I);G=new jasmine.Dom(G);this.specsEls[C.id]=G;this.specs[C.id]=C;E.appendChild(G);jasmine.Dom.addCls(E,J);var K=new jasmine.Dom({tag:"div"});K.style.clear="both";E.appendChild(K)};Test.panel.TreeGrid.prototype.getSuite=function(A){return this.suites[parseInt(A,10)]};Test.panel.TreeGrid.prototype.getSpec=function(A){return this.specs[parseInt(A,10)]};Test.panel.TreeGrid.prototype.onBodyClick=function(D){D=D||window.event;var A=D.target||D.srcElement,C=A.className,B;if(C){if(jasmine.Dom.hasCls(A,"collapse")){this.onCollapse(A);return}if(jasmine.Dom.hasCls(A,"expand")){this.onExpand(A);return}if(jasmine.Dom.hasCls(A,"select-checkbox")){this.onCheck(A);return}for(B=0;B<6;B++){if(C&&jasmine.Dom.hasCls(A,"row")){this.onRowClick(A);return}A=A.parentNode;if(!A){break}C=A.className}}};Test.panel.TreeGrid.prototype.onCheck=function(A){var B=A.parentNode.nextSibling,C;if(jasmine.Dom.hasCls(B,"spec")){C=parseInt(B.id.replace("spec-",""),10);if(A.checked){if(jasmine.array.indexOf(this.options.specs,C)===-1){this.options.specs.push(C)}}else{jasmine.array.remove(this.options.specs,C)}}else{C=parseInt(B.id.replace("suite-",""),10);if(A.checked){if(jasmine.array.indexOf(this.options.suites,C)===-1){this.options.suites.push(C)}}else{jasmine.array.remove(this.options.suites,C)}}};Test.panel.TreeGrid.prototype.getRow=function(A){if(!A.suite&&this.suitesEls[A.id]){return this.suitesEls[A.id].parentNode}else{if(this.specsEls[A.id]){return this.specsEls[A.id].parentNode}}};Test.panel.TreeGrid.prototype.onEachRow=function(B,D,C){var F=this,E=B.childNodes[1].id,G=function(K,M){var O=K.children_,J,I,L,N;if(O){L=O.length;for(J=0;J<L;J++){I=O[J];N=F.getRow(I);if(N){M.call(F,N,I);if(I.children_&&C!==false){G(I,M)}}}}},A,H;if(E.search("suite")!==-1){H=this.getSuite(E.replace("suite-",""));G(H,D)}else{A=this.getSpec(E.replace("spec-",""));G(A,D)}};Test.panel.TreeGrid.prototype.onCollapse=function(A){A=A.parentNode;jasmine.Dom.setCls(A.childNodes[0],"expand");if(jasmine.Dom.hasCls(A,"suite")){this.onEachRow(A.parentNode,function(C,B){var E=C.childNodes[1],D=E.childNodes[0],F=E.childNodes[2];C.style.display="none";if(jasmine.Dom.hasCls(D,"collapse")){jasmine.Dom.setCls(D,"expand")}if(B.suite){F.style.display="none"}})}else{A.childNodes[2].style.display="none"}};Test.panel.TreeGrid.prototype.onExpand=function(A){A=A.parentNode;jasmine.Dom.setCls(A.childNodes[0],"collapse");if(jasmine.Dom.hasCls(A,"suite")){this.onEachRow(A.parentNode,function(C,B){C.style.display="block"},false)}else{A.childNodes[2].style.display="block"}};Test.panel.TreeGrid.prototype.onRowClick=function(A){var D=A.parentNode.childNodes,B=D.length,E,C;for(C=0;C<B;C++){jasmine.Dom.removeCls(D[C],"selected")}jasmine.Dom.addCls(A,"row selected");E=A.childNodes[1].id;if(E.search("spec")!==-1){this.tabPanel.setSpec(this.getSpec(E.replace("spec-","")))}if(E.search("suite")!==-1){this.tabPanel.setSuite(this.getSuite(E.replace("suite-","")))}};Test.panel.TreeGrid.prototype.createRow=function(C,A){var B=this.body.appendChild(new jasmine.Dom({tag:"div",cls:"row",style:{display:C?"none":"block"},children:[{cls:"checkbox-col",children:[{tag:"input",cls:"select-checkbox",type:"checkbox"}]}]}));if(Test.Options.isChecked(A)){B.childNodes[0].childNodes[0].checked=true}return B};Test.panel.TreeGrid.prototype.onMouseDown=function(B){var A;B=B||window.event;A=B.target||B.srcElement;if(jasmine.Dom.hasCls(A,"resizer")){if(B.preventDefault){B.preventDefault()}else{B.returnValue=false}this.pageY=B.pageY||B.clientY;this.startHeight=this.tabPanel.el.clientHeight;document.body.style.cursor="row-resize"}};Test.panel.TreeGrid.prototype.onMouseMove=function(B){var A,C;if(this.pageY){B=B||window.event;A=B.target||B.srcElement;C=Math.max(200,this.startHeight-((B.pageY||B.clientY)-this.pageY));C=Math.min(C,document.body.clientHeight-200);this.tabPanel.resize(C);this.options.resizer=C;this.resizeBody()}};Test.panel.TreeGrid.prototype.onMouseUp=function(A){document.body.style.cursor="auto";delete this.pageY};Test.panel.TreeGrid.prototype.getInnerHeight=function(){return(window.innerHeight||document.documentElement.clientHeight)-this.header.offsetTop*2};Test.panel.TreeGrid.prototype.resizeBody=function(){var A=this.getInnerHeight();A-=this.resizer.offsetHeight+this.tabPanel.el.offsetHeight+this.header.offsetHeight;A-=2;A=Math.max(30,A);this.body.style.height=A+"px"};Test.panel.TreeGrid.prototype.renderSpecResults=function(F){var E=F.results().getItems(),A=E.length,B,G,C,D;B=new jasmine.Dom({cls:"results"});for(D=0;D<A;D++){C=E[D];if(C.type==="expect"&&C.passed){if(!C.passed()){G=this.renderFailedResult(C)}else{G=this.renderPassedResult(C)}if(D===0){jasmine.Dom.addCls(G,"first")}B.appendChild(G);if(C.error){break}}}return B};Test.panel.TreeGrid.prototype.renderFailedResult=function(A){var B=A.message,C;C=[{cls:"prettyPrint",html:jasmine.util.htmlEscape(B)}];return new jasmine.Dom({cls:"resultMessage fail",children:C})};Test.panel.TreeGrid.prototype.renderPassedResult=function(A){var B=[{cls:"prettyPrint",html:"Actual: "+jasmine.pp(A.actual)+"\nExpected: "+jasmine.pp(A.expected)+"\nMatcher: "+A.matcherName+"."}];return new jasmine.Dom({cls:"resultMessage pass",children:B})};Test.panel.TreeGrid.prototype.getInfoPanel=function(){return this.tabPanel.children[0]};Test.panel.TreeGrid.prototype.log=function(B,A){this.getInfoPanel().log(B,A)};Test.panel.TreeGrid.prototype.setStatus=function(B,A){jasmine.Dom.setHTML(this.statusMessage,B);if(A){jasmine.Dom.addCls(this.statusMessage,A)}};Test.Reporter=function(A){A=A||{};this.options=Test.Options.get();this.runnedSpecsCount=0;this.failedSpecsCount=0;this.disabledSpecsCount=0;this.optionCheckBoxesEl={};this.treeGrid=new Test.panel.TreeGrid({})};Test.Reporter.prototype.reportRunnerStarting=function(A){this.runner=A;this.startedAt=new Date();if(Test.BadGlobals){Test.BadGlobals.setup()}this.logger=this.treeGrid;this.log(">> Started at "+this.startedAt.toString(),"info");if(!this.options.remote){this.log(">> Warning! Because you access TestReporter locally, stack trace report isn't available.","warning")}this.runner.filter(this.options.suites,this.options.specs);if(Test.BadGlobals){Test.BadGlobals.report(this.logger)}};Test.Reporter.prototype.reportRunnerResults=function(A){Test.jsCoverage.updateTotal();this.renderResults(A)};Test.Reporter.prototype.reportSuiteStarting=function(A){if(this.options.showTimings){A.startedAt=new Date()}if(Test.jsCoverage.isEnabled()){Test.jsCoverage.add(A)}};Test.Reporter.prototype.reportSuiteResults=function(C){var A=this.treeGrid?this.treeGrid.suitesEls[C.id]:undefined,B;if(C.isEnabled()){if(this.options.showTimings){C.time=(((new Date()).getTime()-C.startedAt.getTime())/1000).toFixed(3)}Test.jsCoverage.update(C);if(!C.parentSuite&&Test.BadGlobals){Test.BadGlobals.report(this.logger,C)}if(this.treeGrid&&this.options.showPassed&&!A){A=this.treeGrid.addSuite(C)}if(A){B=C.results().passed()?"passed":"failed";jasmine.Dom.addCls(A,B);jasmine.Dom.addCls(A.parentNode,B);if(Test.jsCoverage.isEnabled()){this.treeGrid.updateSuiteEl(C,Test.jsCoverage.getSuiteCoverage(C))}if(C.time){this.treeGrid.updateSuiteEl(C," ("+C.time+"s)")}}}else{if(this.treeGrid&&this.options.showDisabled&&!A){this.treeGrid.addSuite(C)}}};Test.Reporter.prototype.reportSpecStarting=function(A){this.currentSpec=A;if(A.isEnabled()){if(this.options.showTimings){A.startedAt=new Date()}this.treeGrid.setStatus("Running: "+jasmine.util.htmlEscape(A.getFullName()))}};Test.Reporter.prototype.reportSpecResults=function(C){var A,B;if(C.isEnabled()){if(this.options.showTimings){C.time=(((new Date()).getTime()-C.startedAt.getTime())/1000).toFixed(3)}A=C.results();B=A.passed()?"passed":"failed";if(B==="failed"){this.failedSpecsCount=this.failedSpecsCount+1}if((B==="failed"||this.options.showPassed)&&C.isEnabled()&&this.treeGrid){this.treeGrid.addSpec(C)}Test.SandBox.save(C);this.runnedSpecsCount=this.runnedSpecsCount+1}else{this.disabledSpecsCount=this.disabledSpecsCount+1;if(this.treeGrid&&this.options.showDisabled){this.treeGrid.addSpec(C)}}};Test.Reporter.prototype.renderResults=function(A){var B=(this.failedSpecsCount>0)?"failed":"passed",C,D;C=(new Date().getTime()-this.startedAt.getTime())/1000;D=this.runnedSpecsCount+" spec"+(this.runnedSpecsCount===1?"":"s")+" ran, "+this.failedSpecsCount+" failure"+(this.failedSpecsCount===1?"":"s")+" and "+this.disabledSpecsCount+" disabled";D+=" in "+C+"s";D+=Test.jsCoverage.getTotal()+".";if(this.treeGrid){if(Test.SandBox.getWin()._$jscoverage){this.treeGrid.tabPanel.addCoverageSummary()}this.treeGrid.setStatus(D,B)}this.log(">> Finished at "+new Date().toString(),"info")};Test.Reporter.prototype.log=function(){if(this.options.verbose||arguments.length===2){this.logger.log.apply(this.logger,arguments)}};Test.Reporter.prototype.getIframeContainer=function(){if(this.treeGrid){return this.treeGrid.tabPanel.children[1].el}return document.body};
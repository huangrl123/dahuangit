Ext.define("Ext.draw.sprite.Image",{extend:"Ext.draw.sprite.Rect",alias:"sprite.image",type:"image",statics:{imageLoaders:{}},inheritableStatics:{def:{processors:{src:"string"},defaults:{src:"",width:null,height:null}}},render:function(E,F){var A=this,D=A.attr,I=D.matrix,B=D.src,J=D.x,K=D.y,H=D.width,N=D.height,G=Ext.draw.sprite.Image.imageLoaders[B],C,L,M;if(G&&G.done){I.toContext(F);L=G.image;F.drawImage(L,J,K,H||(L.naturalWidth||L.width)/E.devicePixelRatio,N||(L.naturalHeight||L.height)/E.devicePixelRatio)}else{if(!G){C=new Image();G=Ext.draw.sprite.Image.imageLoaders[B]={image:C,done:false,pendingSprites:[A],pendingSurfaces:[E]};C.width=H;C.height=N;C.onload=function(){if(!G.done){G.done=true;for(M=0;M<G.pendingSprites.length;M++){G.pendingSprites[M].setDirty(true)}for(M in G.pendingSurfaces){G.pendingSurfaces[M].renderFrame()}}};C.src=B}else{Ext.Array.include(G.pendingSprites,A);Ext.Array.include(G.pendingSurfaces,E)}}}});
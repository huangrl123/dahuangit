Ext.define("Ext.aria.grid.header.Container",{override:"Ext.grid.header.Container",requires:["Ext.aria.container.Container"],ariaSkipContainerTitleCheck:true,ariaIsSection:function(){return this.isRootHeader},initComponent:function(){var A=this;A.callParent(arguments);if(A.isRootHeader){A.ariaRole="rowgroup";A.focusableContainer=true;A.initKeyNav(A)}},ariaGetRenderAttributes:function(){var B=this,A;A=B.callParent();A["aria-readonly"]=true;return A},ariaGetAfterRenderAttributes:function(){var B=this,A;A=B.callParent();delete A["aria-label"];return A},initKeyNav:function(B){var A=this;if(!B.rendered){B.on("render",Ext.Function.bind(A.initKeyNav,A,[B],0),A,{single:true});return}B.el.set({tabIndex:-1});A.keyNav=new Ext.util.KeyNav(B.el,{ignoreInputFields:true,right:A.onKeyRight,left:A.onKeyLeft,down:A.onKeyDown,up:A.onKeyUp,enter:A.activateMenu,space:A.onSpace,scope:A});A.curSelection=null},onKeyLeft:function(A,B){this.moveFocus("left",A);return false},onKeyRight:function(A,B){this.moveFocus("right",A);return false},onKeyDown:function(A,B){return false},onKeyUp:function(A,B){return false},onSpace:function(A,C){var B=this.getCurrentPosition().cHeader;if(B){B.toggleSortState();this.onHeaderClick(B,A,C)}},activateMenu:function(B,D){var C=this,E=C.menu,A=C.getCurrentPosition().cHeader;if(A){C.onHeaderTriggerClick(A,B,A.el);if(E&&E.isVisible()){E.setActiveItem(E.child(":focusable"))}}},getFirstColumn:function(){var A=Ext.ComponentQuery.query(":not([hidden])",this.getGridColumns());if(A.length>0){return A[0]}return null},getLastColumn:function(){var B=Ext.ComponentQuery.query(":not([hidden])",this.getGridColumns()),A=B.length;if(A>0){return B[A-1]}return null},moveFocus:function(A,B){var D=this,C=D.getCurrentPosition(),E={};if(C){if(A==="left"){E.cHeader=C.cHeader.prev(":not([hidden])");if(!E.cHeader){E.cHeader=D.preventWrap?C.cHeader:D.getLastColumn()}}else{if(A==="right"){E.cHeader=C.cHeader.next(":not([hidden])");if(!E.cHeader){E.cHeader=D.preventWrap?C.cHeader:D.getFirstColumn()}}}if(E.cHeader){E.column=D.getHeaderIndex(E.cHeader);E.row=-1;return D.setCurrentPosition(E)}}return null},getCurrentPosition:function(){return this.curSelection},setCurrentPosition:function(A){var B=this,C=B.curSelection;if(C){if(A&&A.cHeader===C.cHeader){A=null}else{B.onHeaderDeselect(C);B.curSelection=null}}if(A){B.curSelection=A;if(!A.cHeader){A.cHeader=B.getVisibleHeaderClosestToIndex(A.column)}B.onHeaderSelect(A)}},selectByPosition:function(A){this.setCurrentPosition(A)},isHeaderSelected:function(B){var A=this;if(typeof B==="number"){return A.curSelection&&(A.curSelection.column===B)}else{return A.curSelection&&(A.curSelection.cHeader===B)}},onHeaderSelect:function(B){var A=this,D=A.view,C=B.cHeader;A.ariaUpdate({"aria-activedescendant":C.el.id});C.ariaUpdate({"aria-selected":true});C.addCls(A.selectedCellCls);C.addCls(A.ariaItemFocusCls);C.getTargetEl().scrollIntoView(D.el,true);A.el.focus()},onHeaderDeselect:function(B){var A=this,C=B.cHeader;A.ariaUpdate({"aria-activedescendant":undefined});C.ariaUpdate({"aria-selected":undefined});C.removeCls(A.selectedCellCls);C.removeCls(A.ariaItemFocusCls)},onFocus:function(){var A=this;A.callParent(arguments);if(!A.isHeader){A.ariaStepIn()}},onBlur:function(){var A=this,B=A.curSelection;if(B&&!(A.menu&&A.menu.isVisible())){A.onHeaderDeselect(B)}A.callParent(arguments)},ariaStepIn:function(){var B=this,A;A=B.getCurrentPosition();if(!A){B.selectByPosition({row:-1,column:0})}else{B.onHeaderSelect(A)}},getFocusFrameEl:function(){var A=this,B;B=this.up("grid");if(B){return B.el}return A.getFocusEl()},ariaNextNode:function(){var B=this,A;A=B.callParent(arguments);if(B.isRootHeader&&A.xtype==="gridview"){return A.ariaNextNode()}else{return A}}});
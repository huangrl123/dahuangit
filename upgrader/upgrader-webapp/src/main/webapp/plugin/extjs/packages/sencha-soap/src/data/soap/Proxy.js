Ext.define("Ext.data.soap.Proxy",{extend:"Ext.data.proxy.Ajax",alias:"proxy.soap",requires:["Ext.data.soap.Reader"],config:{soapAction:{},operationParam:"op",reader:"soap",url:"",envelopeTpl:['<?xml version="1.0" encoding="utf-8" ?>','<soap:Envelope xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/">',"{[values.bodyTpl.apply(values)]}","</soap:Envelope>"],createBodyTpl:null,readBodyTpl:["<soap:Body>",'<{operation} xmlns="{targetNamespace}">','<tpl foreach="params">',"<{$}>{.}</{$}>","</tpl>","</{operation}>","</soap:Body>"],updateBodyTpl:null,destroyBodyTpl:null,writeBodyTpl:["<soap:Body>",'<{operation} xmlns="{targetNamespace}">','<tpl for="records">','{% var recordName=values.modelName.split(".").pop(); %}',"<{[recordName]}>",'<tpl for="fields">',"<{name}>{[parent.get(values.name)]}</{name}>","</tpl>","</{[recordName]}>","</tpl>","</{operation}>","</soap:Body>"],targetNamespace:""},applyEnvelopeTpl:function(A){return this.createTpl(A)},applyCreateBodyTpl:function(A){return this.createTpl(A)},applyReadBodyTpl:function(A){return this.createTpl(A)},applyUpdateBodyTpl:function(A){return this.createTpl(A)},applyDestroyBodyTpl:function(A){return this.createTpl(A)},applyWriteBodyTpl:function(A){return this.createTpl(A)},createTpl:function(A){if(A&&!A.isTpl){A=new Ext.XTemplate(A)}return A},doRequest:function(E){var D=this,A=E.getAction(),C=D.getApi()[A],F=Ext.applyIf(E.getParams()||{},D.getExtraParams()||{}),G=D.getEnvelopeTpl().apply({operation:C,targetNamespace:D.getTargetNamespace(),params:F,records:E.getRecords(),bodyTpl:D.getBodyTpl(A)}),B=new Ext.data.Request({url:D.getUrl()+"?"+D.getOerationParam+"="+C,method:"POST",action:A,operation:E,xmlData:G,headers:Ext.apply({SOAPAction:D.getSoapAction()[A]},D.getHeaders()),timeout:D.getTimeout(),scope:D,disableCaching:false});B.setCallback(D.createRequestCallback(B,E));return D.sendRequest(B)},getBodyTpl:function(A){A=Ext.String.capitalize(A);var B=this["get"+A+"BodyTpl"]();return B||this.getWriteBodyTpl()}});
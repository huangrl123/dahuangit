Ext.define("Ext.data.proxy.Ajax",{requires:["Ext.Ajax"],extend:"Ext.data.proxy.Server",alias:"proxy.ajax",alternateClassName:["Ext.data.HttpProxy","Ext.data.AjaxProxy"],defaultActionMethods:{create:"POST",read:"GET",update:"POST",destroy:"POST"},config:{binary:false,headers:undefined,paramsAsJson:false,withCredentials:false,useDefaultXhrHeader:true,username:null,password:null,actionMethods:{create:"POST",read:"GET",update:"POST",destroy:"POST"}},doRequest:function(E){var C=this,F=C.getWriter(),A=C.buildRequest(E),D=C.getMethod(A),B,G;if(F&&E.allowWrite()){A=F.write(A)}A.setConfig({binary:C.getBinary(),headers:C.getHeaders(),timeout:C.getTimeout(),scope:C,callback:C.createRequestCallback(A,E),method:D,useDefaultXhrHeader:C.getUseDefaultXhrHeader(),disableCaching:false});if(D.toUpperCase()!=="GET"&&C.getParamsAsJson()){G=A.getParams();if(G){B=A.getJsonData();if(B){B=Ext.Object.merge({},B,G)}else{B=G}A.setJsonData(B);A.setParams(undefined)}}if(C.getWithCredentials()){A.setWithCredentials(true);A.setUsername(C.getUsername());A.setPassword(C.getPassword())}return C.sendRequest(A)},sendRequest:function(A){A.setRawRequest(Ext.Ajax.request(A.getCurrentConfig()));this.lastRequest=A;return A},abort:function(A){A=A||this.lastRequest;if(A){Ext.Ajax.abort(A.getRawRequest())}},getMethod:function(B){var D=this.getActionMethods(),A=B.getAction(),C;if(D){C=D[A]}return C||this.defaultActionMethods[A]},createRequestCallback:function(A,C){var B=this;return function(E,D,F){if(A===B.lastRequest){B.lastRequest=null}B.processResponse(D,C,A,F)}}});
Ext.define("Ext.event.Controller",{isFiring:false,listenerStack:null,constructor:function(A){this.firingListeners=[];this.firingArguments=[];this.dispatcher=A;return this},setInfo:function(A){this.info=A},getInfo:function(){return this.info},setListenerStacks:function(A){this.listenerStacks=A},fire:function(B,M){var I=this.listenerStacks,A=this.firingListeners,L=this.firingArguments,N=A.push,E=I.length,K,F,C,H,G=false,D=false,J;A.length=0;if(M){if(M.order!=="after"){G=true}else{D=true}}if(E===1){K=I[0].listeners;F=K.before;C=K.current;H=K.after;if(F.length>0){N.apply(A,F)}if(G){N.call(A,M)}if(C.length>0){N.apply(A,C)}if(D){N.call(A,M)}if(H.length>0){N.apply(A,H)}}else{for(J=0;J<E;J++){F=I[J].listeners.before;if(F.length>0){N.apply(A,F)}}if(G){N.call(A,M)}for(J=0;J<E;J++){C=I[J].listeners.current;if(C.length>0){N.apply(A,C)}}if(D){N.call(A,M)}for(J=0;J<E;J++){H=I[J].listeners.after;if(H.length>0){N.apply(A,H)}}}if(A.length===0){return this}if(!B){B=[]}L.length=0;L.push.apply(L,B);L.push(null,this);this.doFire();return this},doFire:function(){var H=this,U=H.firingListeners,M=H.firingArguments,O=M[1],K=M.length-2,J=U[0].observable,A=H.info,P,G,R,C,N,T,Q,I,D,L,B,E,S,F;if(J&&J.isElement){P=M[0]}H.isPausing=H.isPaused=H.isStopped=false;H.isFiring=true;for(G=0,R=U.length;G<R;G++){C=U[G];N=C.options;T=C.fn;Q=C.firingFn;I=C.boundFn;D=C.isLateBinding;L=C.scope;if(D&&I&&I!==L[T]){I=false;Q=false}if(!I){if(D){I=L[T];if(!I){continue}}else{I=T}C.boundFn=I}if(P){S=C.type;if(S){M[0]=P.chain({type:S})}Ext.EventObject=M[0]}if(!Q){Q=I;if(N.delay){Q=Ext.Function.createDelayed(Q,N.delay,L)}else{if(N.buffer){Q=Ext.Function.createBuffered(Q,N.buffer,L)}else{if(N.onFrame){Q=Ext.Function.createAnimationFrame(Q,L)}}}C.firingFn=Q}M[K]=N;B=M;if(N.args){B=N.args.concat(B)}if(N.delegate&&H.info.targetType==="element"){M[1]=Ext.fly(O).findParent(N.delegate,O)}if(N.single){H.dispatcher.removeListener(A.targetType,A.target,A.eventName,T,L,N,C.order,C.observable)}F=N.beforeFn;if(F){E=F.apply(Ext.global,B)!==false;if(E!==false){E=Q.apply(L,B)}}else{E=Q.apply(L,B)}if(N.delegate){M[1]=O}if(E===false){H.stop()}if(H.isStopped){break}if(H.isPausing){H.isPaused=true;U.splice(0,G+1);return}if(P){M[0]=P}}H.isFiring=false;H.listenerStacks=null;U.length=M.length=0;H.connectingController=null},connect:function(A){this.connectingController=A},resume:function(){var A=this.connectingController;this.isPausing=false;if(this.isPaused&&this.firingListeners.length>0){this.isPaused=false;this.doFire()}if(A){A.resume()}return this},isInterrupted:function(){return this.isStopped||this.isPaused},stop:function(){var A=this.connectingController;this.isStopped=true;if(A){this.connectingController=null;A.stop()}this.isFiring=false;this.listenerStacks=null;return this},pause:function(){var A=this.connectingController;this.isPausing=true;if(A){A.pause()}return this}});
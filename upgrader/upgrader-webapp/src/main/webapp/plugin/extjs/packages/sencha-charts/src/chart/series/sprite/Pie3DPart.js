Ext.define("Ext.chart.series.sprite.Pie3DPart",{extend:"Ext.draw.sprite.Path",mixins:{markerHolder:"Ext.chart.MarkerHolder"},alias:"sprite.pie3dPart",type:"pie3dPart",inheritableStatics:{def:{processors:{centerX:"number",centerY:"number",startAngle:"number",endAngle:"number",startRho:"number",endRho:"number",margin:"number",thickness:"number",distortion:"number",baseColor:"color",baseRotation:"number",part:"enums(top,start,end,inner,outer)"},aliases:{rho:"endRho"},dirtyTriggers:{centerX:"path,bbox",centerY:"path,bbox",startAngle:"path,partZIndex",endAngle:"path,partZIndex",startRho:"path",endRho:"path,bbox",margin:"path,bbox",thickness:"path",baseRotation:"path,partZIndex,partColor",baseColor:"partZIndex,partColor",part:"path,partZIndex"},defaults:{centerX:0,centerY:0,startAngle:0,endAngle:0,startRho:0,endRho:150,margin:0,distortion:1,baseRotation:0,baseColor:"white",part:"top"},updaters:{"partColor":function(A){var B=Ext.draw.Color.fly(A.baseColor),C;switch(A.part){case"top":C=B.toString();break;case"outer":C=Ext.create("Ext.draw.gradient.Linear",{type:"linear",stops:[{offset:0,color:B.createDarker(0.3).toString()},{offset:0.3,color:B.toString()},{offset:0.8,color:B.createLighter(0.2).toString()},{offset:1,color:B.createDarker(0.4).toString()}]});break;case"start":C=B.createDarker(0.3).toString();break;case"end":C=B.createDarker(0.3).toString();break;case"inner":C=Ext.create("Ext.draw.gradient.Linear",{type:"linear",stops:[{offset:0,color:B.createDarker(0.4).toString()},{offset:0.2,color:B.createLighter(0.2).toString()},{offset:0.7,color:B.toString()},{offset:1,color:B.createDarker(0.3).toString()}]});break}A.fillStyle=C;A.canvasAttributes.fillStyle=C},"partZIndex":function(B){var A=B.baseRotation;switch(B.part){case"top":B.zIndex=5;break;case"outer":B.zIndex=4;break;case"start":B.zIndex=1+Math.sin(B.startAngle+A);break;case"end":B.zIndex=1+Math.sin(B.endAngle+A);break;case"inner":B.zIndex=1;break}B.dirtyZIndex=true}}}},updatePlainBBox:function(B){var C=this.attr,A=C.part==="inner"?C.startRho:C.endRho;B.width=A*2;B.height=A*C.distortion*2+C.thickness;B.x=C.centerX-A;B.y=C.centerY-A*C.distortion},updateTransformedBBox:function(A){return this.updatePlainBBox(A)},updatePath:function(A){if(this.attr.endAngle<this.attr.startAngle){return}this[this.attr.part+"Renderer"](A)},topRenderer:function(H){var E=this.attr,A=E.margin,F=E.distortion,J=E.centerX,K=E.centerY,N=E.baseRotation,G=E.startAngle+N,B=E.endAngle+N,C=E.startRho,L=E.endRho,I,D=Math.sin(B),M=Math.cos(B);I=(G+B)*0.5;J+=Math.cos(I)*A;K+=Math.sin(I)*A*F;H.ellipse(J,K,C,C*F,0,G,B,false);H.lineTo(J+M*L,K+D*L*F);H.ellipse(J,K,L,L*F,0,B,G,true);H.closePath()},startRenderer:function(I){var F=this.attr,A=F.margin,K=F.centerX,L=F.centerY,G=F.distortion,O=F.baseRotation,H=F.startAngle+O,B=F.endAngle+O,N=F.thickness,E=F.startRho,M=F.endRho,D=Math.sin(H),C=Math.cos(H),J;if(C<0){J=(H+B)*0.5;K+=Math.cos(J)*A;L+=Math.sin(J)*A*G;I.moveTo(K+C*E,L+D*E*G);I.lineTo(K+C*M,L+D*M*G);I.lineTo(K+C*M,L+D*M*G+N);I.lineTo(K+C*E,L+D*E*G+N);I.closePath()}},endRenderer:function(I){var E=this.attr,A=E.margin,K=E.centerX,L=E.centerY,G=E.distortion,O=E.baseRotation,H=E.startAngle+O,B=E.endAngle+O,N=E.thickness,C=E.startRho,M=E.endRho,D=Math.sin(B),F=Math.cos(B),J;if(F>0){J=(H+B)*0.5;K+=Math.cos(J)*A;L+=Math.sin(J)*A*G;I.moveTo(K+F*C,L+D*C*G);I.lineTo(K+F*M,L+D*M*G);I.lineTo(K+F*M,L+D*M*G+N);I.lineTo(K+F*C,L+D*C*G+N);I.closePath()}},innerRenderer:function(J){var F=this.attr,A=F.margin,L=F.centerX,M=F.centerY,G=F.distortion,P=F.baseRotation,H=F.startAngle+P,B=F.endAngle+P,O=F.thickness,E=F.startRho,K,C,I,N,D;D=(H+B)*0.5;L+=Math.cos(D)*A;M+=Math.sin(D)*A*G;if(H>=Math.PI*2){H-=Math.PI*2;B-=Math.PI*2}if(B>Math.PI&&B<Math.PI*3){I=H;N=Math.min(B,Math.PI*2);K=Math.sin(N);C=Math.cos(N);J.ellipse(L,M,E,E*G,0,I,N,false);J.lineTo(L+C*E,M+K*E*G+O);J.ellipse(L,M+O,E,E*G,0,N,I,true);J.closePath()}if(B>Math.PI*3){I=Math.PI;N=B;K=Math.sin(N);C=Math.cos(N);J.ellipse(L,M,E,E*G,0,I,N,false);J.lineTo(L+C*E,M+K*E*G+O);J.ellipse(L,M+O,E,E*G,0,N,I,true);J.closePath()}},outerRenderer:function(I){var E=this.attr,A=E.margin,L=E.centerX,M=E.centerY,F=E.distortion,P=E.baseRotation,G=E.startAngle+P,B=E.endAngle+P,O=E.thickness,N=E.endRho,K,C,H,J,D;D=(G+B)*0.5;L+=Math.cos(D)*A;M+=Math.sin(D)*A*F;if(G>=Math.PI*2){G-=Math.PI*2;B-=Math.PI*2}if(G<Math.PI){H=G;J=Math.min(B,Math.PI);K=Math.sin(J);C=Math.cos(J);I.ellipse(L,M,N,N*F,0,H,J,false);I.lineTo(L+C*N,M+K*N*F+O);I.ellipse(L,M+O,N,N*F,0,J,H,true);I.closePath()}if(B>Math.PI*2){H=Math.max(G,Math.PI*2);J=B;K=Math.sin(J);C=Math.cos(J);I.ellipse(L,M,N,N*F,0,H,J,false);I.lineTo(L+C*N,M+K*N*F+O);I.ellipse(L,M+O,N,N*F,0,J,H,true);I.closePath()}}});